name: Save to cache
description: Save to GH cache and verify
inputs:
  key:
    description: Cache key
  path:
    description: Path to save
    default: .


runs:
  using: 'composite'
  steps:
    - name: Save working directory
      uses: actions/cache/save@v4
      with:
        path: ${{ inputs.path }}
        key: ${{ inputs.key }}
    - name: Wait before verification
      shell: bash
      run: |
        sleep 2
    - name: Verify cache
      uses: actions/cache/restore@v4
      with:
        path: ${{ inputs.path }}
        key: ${{ inputs.key }}
        lookup-only: true
        fail-on-cache-miss: true
