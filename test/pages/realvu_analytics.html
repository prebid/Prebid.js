<!DOCTYPE html>
<html>
<head>
    <title>realvuBidAdapter Test</title>
    <!--script type="text/javascript" src="//ac.realvu.net/prebid/prebid.js" async></script-->
    <script type="text/javascript" src="../../build/dev/prebid.js" async=true ></script>
    <script type="text/javascript" >
        /*Begin*/
        var start_time;
        var pbjs = pbjs || {};
        pbjs.que = pbjs.que || [];
        var bhandler = function (bidResponses) {
            var s1 = "<h2>dT=" + ((new Date()) - start_time) / 1000 + "sec.</h2>";
            var targetingParams = pbjs.getAdserverTargeting();
            s1 += "A. targetingParams: " + JSON.stringify(targetingParams) + "<br>";
            for (var key in targetingParams) {
                var tp = targetingParams[key];
                var hb_adid = tp.hb_adid;
                if (typeof (hb_adid) != 'undefined') {
                    var doc = docf(document.getElementById(key));
                    pbjs.renderAd(doc, hb_adid);
                }
                var bids = bidResponses[key].bids;
                s1 += "hb_adid=" + hb_adid + ". "
                  + " "+key+"  bids.length=" + bids.length + "<br>";
                for (var j=0;j<bids.length;j++){ 
                  s1 +=  j + ") "+ bids[j].bidderCode + " cpm="+bids[j].cpm + " "+bids[j].statusMessage+"<br>";
                }
//  + JSON.stringify(bids).replace(/>/g, '&gt;').replace(/</g, '&lt;').replace(/},/g, ',<br><br>').replace(/,/g, ', ') + "</p>";
            }
            document.getElementById('msg').innerHTML += s1; 
        };

        docf = function (f) {
            if(f){
              return f.contentDocument ? f.contentDocument : (f.contentWindow ? f.contentWindow.document : null);
            }
            return null;
        };

        pbjs.que.push(function () {
            pbjs.logging = true;
/*            pbjs.enableAnalytics({
              provider: 'realvuAnalytics',
              options: {
                  partnerId: 'K1E',
                  regAllUnits: false,
                  unit_ids:['ad_container_2']
              }
            });
*/
            var adUnits = [{
                code: 'ad_container_1',
                sizes: [[300, 250]],
                bids: [{
                    bidder: 'realvu', params: {
                        partnerId: '1Y',
                        placementId: '9339508'
                    }},
                    {
                    bidder: 'openx', params: {  // no bid
                        unit: '539110380',
                        delDomain: 'sademo-d.openx.net'
                    }}
                ]
            },
            {
                code: 'ad_container_2',
                sizes: [[300, 250]],
                bids: [{
                    bidder: 'realvu', params: {
                        partnerId: '1Y',
                        placementId: '9339508'
                    }},
                    {
                    bidder: 'openx', params: {  // no bid
                        unit: '539110381',
                        delDomain: 'sademo-d.openx.net'
                    }}
                ]
            }
            ];
            pbjs.addAdUnits(adUnits);
            start_time = new Date();
            pbjs.requestBids({
                // This callback gets triggered when all bids for this ad unit come back. 
                bidsBackHandler: bhandler
            });
        });
        /*End*/
  function zz(){
    var d = document.getElementById('no_container_1');
    d.id = 'ad_container_1';
  }
  window.setTimeout(zz, 300);
</script>
</head>
<body>
    
<div id='navbar' class='navbar'>
</div>
<script>
    var bar = [];

    var str1 = "";
    for (var i = 0; i < bar.length; i++) {
        if (location.pathname.indexOf(bar[i].href) < 0) {
            str1 += "<a href='" + bar[i].href + location.search + "'> &middot;" + bar[i].name + "</a>";
        }
        else {
            str1 += "<a class='navbar_here' href='" + bar[i].href + location.search + "'> &middot;" + bar[i].name + "</a>";
        }
    }
    function onoff_log(box) {
        if (box.checked) window.location += "?boost_log";
        else window.location = location.pathname;
    }
    var chk = (location.search == "") ? '' : 'checked';
    str1 += "<input style='margin-left:20px;' type='checkbox' " + chk + " onchange='onoff_log(this)' >Show Log";

    document.getElementById('navbar').innerHTML = str1;
</script>

    <div class='content'>
        <div style='margin-top: 100px;'>
            <h2 style='font-family:Impact;'>realvu-prebid.js demo</h2>
<table>
<tr valign='top'><td>
            <iframe id="no_container_1" src='about:blank;' marginheight="0" marginwidth="0" topmargin="0" leftmargin="0" allowtransparency="true"
    width="300" height="250" scrolling="no" style='border:gray 2px dashed;'></iframe>    
</td><td>
            <div id="msg" style='margin-left:12px;padding:12px;min-height:40px;background-color:Chocolate;'></div>
</td></tr>
<tr valign='top'><td>
            <iframe id="ad_container_2" src='about:blank;' marginheight="0" marginwidth="0" topmargin="0" leftmargin="0" allowtransparency="true"
    width="300" height="250" scrolling="no" style='border:gray 2px dashed;'></iframe>    
</td><td>
            <div id="msg_an" style='margin-left:12px;padding:12px;min-height:40px;background-color:cadetblue;'></div>
</td></tr>


</table>
            <p>
            <div id="tutor_div" style='width:1000px;background-color:White'></div>
            </p>
            <!--script src='footer.js'></script-->
</body>
</html>
    
