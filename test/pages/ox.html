<!DOCTYPE html>
<html>
<head>
    <title>OpenX+realvuBidAdapter Test</title>
    <link href="//control.realvu.net/v2boost/tutor/tutor.css" rel="stylesheet" type="text/css" />
    <!--script type="text/javascript" src="//ac.realvu.net/prebid/prebid.js" async></script-->
    <!-- prebid.js -->
    <script src="../../build/dev/prebid.js" async=true></script>

    <script type="text/javascript" >
        /*Begin*/
        var start_time;
        var pbjs = pbjs || {};
        pbjs.que = pbjs.que || [];
        var bhandler = function (bidResponses) {
            var targetingParams = pbjs.getAdserverTargeting();
            document.getElementById('msg').innerHTML += "A. targetingParams: " + JSON.stringify(targetingParams) + "<br>";
            for (var key in targetingParams) {
                document.getElementById('msg').innerHTML += key + " --> " + targetingParams[key] + " ";
            }
            document.getElementById('msg').innerHTML += "dT=" + ((new Date()) - start_time) / 1000 + "sec. ";
            if (targetingParams.ad_container_1) {
                var hb_adid = targetingParams.ad_container_1.hb_adid;
                if (typeof (hb_adid) != 'undefined') {
                    var doc = docf(document.getElementById("ad_container_1"));
                pbjs.renderAd(doc, hb_adid);
                }
                document.getElementById('msg').innerHTML += "hb_adid=" + hb_adid + ". ";
                var bids = bidResponses.ad_container_1.bids;
                document.getElementById('msg').innerHTML += "<br><br>bids.length=" + bids.length + "<br>" + JSON.stringify(bidResponses).replace(/>/g, '&gt;').replace(/</g, '&lt;').replace(/},/g, ',<br><br>').replace(/,/g, ', ') + "<br>";
            }
        };

        docf = function (f) {
            return f.contentDocument ? f.contentDocument : (f.contentWindow ? f.contentWindow.document : null);
        };

        pbjs.que.push(function () {
            pbjs.logging = true;

            var adUnits = [{
                code: 'ad_container_1',
                sizes: [[300, 250]],
                bids: [{
                    bidder: 'openx', params: {
                        unit: '539168550',
                        delDomain: 'realvu-d.openx.net'
                    }
                }]
            },
            {
                code: 'ad_container_2',
                sizes: [[300, 250]],
                bids: [{
                    bidder: 'openx', params: {
                        unit: '539168550',
                        delDomain: 'realvu-d.openx.net'
                    }
                }]
            }
            ];
            pbjs.addAdUnits(adUnits);
            start_time = new Date();
            pbjs.requestBids({
                // This callback gets triggered when all bids for this ad unit come back. 
                bidsBackHandler: bhandler
            });
        });
        /*End*/
</script>
</head>
<body>
    
<div id='navbar' class='navbar'>
</div>
<script>
    var bar = [
  { name: 'Home', href: '/net/revenue_report.aspx' }
  , { name: 'Demo', href: 'demo.aspx' }
    //, { name: 'RealVu Adapter', href: 'adapter.aspx' }


 ];

    var str1 = "";
    for (var i = 0; i < bar.length; i++) {
        if (location.pathname.indexOf(bar[i].href) < 0) {
            str1 += "<a href='" + bar[i].href + location.search + "'> &middot;" + bar[i].name + "</a>";
        }
        else {
            str1 += "<a class='navbar_here' href='" + bar[i].href + location.search + "'> &middot;" + bar[i].name + "</a>";
        }
    }
    function onoff_log(box) {
        if (box.checked) window.location += "?boost_log";
        else window.location = location.pathname;
    }
    var chk = (location.search == "") ? '' : 'checked';
    str1 += "<input style='margin-left:20px;' type='checkbox' " + chk + " onchange='onoff_log(this)' >Show Log";

    document.getElementById('navbar').innerHTML = str1;
</script>

    <div class='content'>
        <div style='margin-left: 10px;'>
            <h2>
                realvu-prebid.js demo</h2>
            <p>
             This is a working demo page for realvu header bidder. Reload the page if you see blank space below.
            There are not bid winners sometimes.<br />
             RealVu verifies that the ad unit is in-view prior to sending a request for a bid.  
             This demo is only using the header bidder from our viewable exchange meaning that if you reload 
             the page with the ad unit outside of viewport (BTF), no request will be send to fill the ad unit. 
             On real page, the space will be taken by other exchanges.
            </p>
             
            <div id="msg" style='height:100px;width:1000px;background-color:tan;'></div>
             <iframe id="ad_container_1" src='about:blank;' marginheight="0" marginwidth="0" topmargin="0" leftmargin="0" allowtransparency="true"
    width="300" height="250" scrolling="no" style='border:blue 1px dotted;'></iframe>    
              <iframe id="ad_container_2" src='about:blank;' marginheight="0" marginwidth="0" topmargin="0" leftmargin="0" allowtransparency="true"
    width="300" height="250" scrolling="no" style='border:orange 1px dotted;'></iframe>    
              
            <p>
            <div id="tutor_div" style='width:1000px;background-color:White'></div>
            </p>
            <script src='//control.realvu.net/v2boost/tutor/footer.js'></script>
</body>
</html>
    
