<html>
    <head>
        <script>
         (function () {
             var d = document, pbs = d.createElement("script"), pro = d.location.protocal;
             pbs.type = "text/javascript";
             pbs.src = '/build/dev/prebid.js';
             var target = document.getElementsByTagName("head")[0];
             target.insertBefore(pbs, target.firstChild);
         })();
        </script>
        <script>
         (function () {
             var gads = document.createElement('script');
             gads.async = true;
             gads.type = 'text/javascript';
             var useSSL = 'https:' == document.location.protocol;
             gads.src = (useSSL ? 'https:' : 'http:') +
                        '//www.googletagservices.com/tag/js/gpt.js';
             var node = document.getElementsByTagName('script')[0];
             node.parentNode.insertBefore(gads, node);
         })();
        </script>

        <script>
         var googletag = googletag || {};
         googletag.cmd = googletag.cmd || [];

         var pbjs = pbjs || {};
         pbjs.que = pbjs.que  || [];
         var PREBID_TIMEOUT = 3000;

         pbjs.que.push(function () {
             var adUnit0 = {
                 code: '/6355419/Travel/Europe/France/Paris',
                 mediaTypes: {
                     banner: {
                         sizes: [728, 90]
                     }
                 },
                 bids: [
                     {
                         bidder: 'yieldbot',
                         params: {
                             psn: '1234',
                             slot: 'leaderboard'
                         }
                     }
                 ]
             };

             var adUnit1 = {
                 code: '/6355419/Travel/Europe/France/Paris',
                 mediaTypes: {
                     banner: {
                         sizes: [[300, 250]]
                     }
                 },
                 bids: [
                     {
                         bidder: 'yieldbot',
                         params: {
                             psn: '1234',
                             slot: 'medrec'
                         }
                     }
                 ]
             };

             var adUnit2 = {
                 code: '/6355419/Travel/Europe/France/Paris',
                 mediaTypes: {
                     banner: {
                         sizes: [[300, 600]]
                     }
                 },
                 bids: [
                     {
                         bidder: 'yieldbot',
                         params: {
                             psn: '1234',
                             slot: 'sidebar'
                         }
                     }
                 ]
             };

             var adUnit3 = {
                 code: '/6355419/Travel/Europe/France/Paris',
                 mediaTypes: {
                     banner: {
                         sizes: [[160, 600]]
                     }
                 },
                 bids: [
                     {
                         bidder: 'yieldbot',
                         params: {
                             psn: '1234',
                             slot: 'skyscraper'
                         }
                     }
                 ]
             };

             pbjs.addAdUnits([adUnit0, adUnit1, adUnit2, adUnit3]);
             const customGranularity = {
                 'buckets': [{
                     'min': 3,
                     'max': 10,
                     'increment': 1
                 }]
             };

             pbjs.setConfig({
                 priceGranularity: customGranularity,
                 enableSendAllBids: false
             })
             pbjs.requestBids({
                 bidsBackHandler: sendAdserverRequest
             });
         });

         function sendAdserverRequest() {
             if (pbjs.adserverRequestSent) {
                 return;
             }
             pbjs.adserverRequestSent = true;
             googletag.cmd.push(function() {
                 pbjs.que.push(function() {
                     pbjs.setTargetingForGPTAsync();
                     googletag.pubads().refresh();
                 });
             });
         }

         setTimeout(function() {
             sendAdserverRequest();
         }, PREBID_TIMEOUT);

        </script>

        <script>
         googletag.cmd.push(function () {
             var slot0 = googletag.defineSlot('/6355419/Travel/Europe/France/Paris',
                                               [[728, 90]],
                                               'div-0')
                                   .addService(googletag.pubads());
             var slot1 = googletag.defineSlot('/6355419/Travel/Europe/France/Paris',
                                               [[300, 250]],
                                               'div-1')
                                   .addService(googletag.pubads());
             var slot2 = googletag.defineSlot('/6355419/Travel/Europe/France/Paris',
                                               [[300, 600]],
                                               'div-2')
                                   .addService(googletag.pubads());
             var slot3 = googletag.defineSlot('/6355419/Travel/Europe/France/Paris',
                                              [[160, 600]],
                                              'div-3')
                                  .addService(googletag.pubads());

             googletag.pubads().collapseEmptyDivs();
             googletag.pubads().disableInitialLoad();
             googletag.pubads().enableSingleRequest();
             googletag.enableServices();

         });

         function refreshBids() {
             var currentTime = new Date().getTime();
             pbjs.que.push(function () {
                 pbjs.requestBids({
                     timeout: PREBID_TIMEOUT,
                     bidsBackHandler: function () {
                         callGPT();
                     }
                 });
             });
         }

         function callGPT() {
             pbjs.setTargetingForGPTAsync();
             googletag.pubads().refresh();
         }
        </script>
    </head>
    <body>
        <div>
            <br>
            <b>Yieldbot integration test mode:</b>

            <ul>
                <li><a href="http://i.yldbt.com/m/start-testing" target="_blank">START</a><em>  (i.e.force bids to be returned</em>)</li>
                <li><a href="http://i.yldbt.com/m/stop-testing" target="_blank">STOP</a></li>
            </ul>
        </div>
        <button onclick="refreshBids()">Refresh Bids</button>
        <h2>Prebid.js Yieldbot Adapter Test</h2>
        <div style="-moz-column-count: 2; -webkit-column-count: 2; column-count: 2;">
            <div id='div-0'>
                <script type='text/javascript'>
                 googletag.cmd.push(function() {
                     googletag.display('div-0');
                 });
                </script>
            </div>
            <p>Lorem ipsum dolor. Sit amet proin. Integer cursus mi mus curabitur euismod vel quos duis bibendum nec interdum porta dolor a viverra nisl fusce. Volutpat sit at. Donec nisl taciti. Eget eu lobortis. Excepteur diam orci lacus nibh pharetra. Justo neque maecenas. Viverra molestie dolor ante rutrum vivamus libero urna suscipit leo praesent ultricies. In dignissim qui ante bibendum in. Habitasse ac arcu non nulla augue. Felis lectus non tempus in aliquam. Sit porttitor nec. Sodales non sit eu duis.</p>
            <div id='div-1'>
                <script type='text/javascript'>
                 googletag.cmd.push(function() {
                     googletag.display('div-1');
                 });
                </script>
            </div>
            <p>Donec feugiat ornare a amet optio. Vitae sit sapien. Vitae nec justo. Fusce ac in semper ligula duis eget vel sit. Augue mauris sit. A adipisicing orci est augue dapibus ullamcorper faucibus fermentum. Et phasellus in tempus vivamus praesent. Nisl dui porttitor. Iaculis vulputate eros ut interdum eu. Lacus quis magna varius in quis. Congue erat porttitor sit eu vitae pharetra scelerisque nec. Dolor dui vel ut velit vestibulum. Lectus ullamcorper mi. Curabitur ipsum pellentesque sed erat est est sapien in tempor sodales viverra. Dui volutpat morbi eleifend fringilla quis. Neque erat erat. Rhoncus sed posuere. Dapibus fusce ut lacus mus est pede sed quisquam. Quis aliquam pellentesque. Wisi ac odio eu wisi amet ut ipsum a erat aliquam nunc.</p>
            <p>Dis vitae penatibus. Mollis mauris bibendum. Porta orci amet dolor sed felis in neque per cursus molestie pellentesque. Quis accusamus vel sed dapibus orci congue ut eros. Nec faucibus inceptos. Hendrerit in eget nulla tellus lacinia. Fusce ut ut mattis.</p>
            <p>Vivamus mauris metus. Ridiculus habitant lorem in nulla in quam eros ut. Libero aliquam platea. In enim consectetuer eget mattis accumsan aenean faucibus tincidunt. Amet donec vitae wisi pellentesque magna non lacinia qui. In erat in maecenas amet dui. Aliquam elit vel. Ligula sodales lacus. Nisl a purus. Pharetra velit porttitor vel vel non turpis viverra fringilla lorem arcu pellentesque sed aliquet nonummy quisque dapibus ullamcorper. Mollis ipsum nulla. Tempor tempus vitae. Luctus amet vel. Suspendisse sagittis vestibulum fusce eu.</p>
            <p>Urna et felis bibendum felis sit vestibulum wisi pharetra quisque ac quis cursus suspendisse quisque aenean luctus curabitur. Eget nec leo. Mi placerat cras nulla et integer eget in sed. Non magni parturient. Egestas iaculis malesuada. Nec a duis. Pede condimentum ullamcorper. Augue arcu tellus. In velit in in duis odio dictum wisi proin quis eget sit. Felis tempus inceptos. Turpis risus eu. Mi vivamus consequat. Lectus dui imperdiet amet orci vehicula in vel pellentesque habitant suscipit aliquam. Proin porttitor vitae ultricies a in. Est duis pede. Tristique velit vestibulum odio sodales morbi magna ut vitae. Elementum imperdiet sodales ultrices tortor mollis vehicula lorem varius pellentesque mi ut sit turpis feugiat. In convallis urna. Justo aliquam sed quis scelerisque nonummy. Lobortis rhoncus ornare. Pellentesque leo quam at beatae in. Erat lorem tempus. Molestie faucibus a id mauris montes. Sed orci vulputate. Libero justo curabitur. Amet orci ante. Non felis est erat cras purus id at id nibh nunc facilisis amet metus sagittis pellentesque eros amet. Vitae sit nulla vitae wisi diam. Tincidunt ipsum eleifend semper tortor non. Tellus amet aliquet.</p>
            <p>Dis vitae penatibus. Mollis mauris bibendum. Porta orci amet dolor sed felis in neque per cursus molestie pellentesque. Quis accusamus vel sed dapibus orci congue ut eros. Nec faucibus inceptos. Hendrerit in eget nulla tellus lacinia. Fusce ut ut mattis.</p>
            <p>Vivamus mauris metus. Ridiculus habitant lorem in nulla in quam eros ut. Libero aliquam platea. In enim consectetuer eget mattis accumsan aenean faucibus tincidunt. Amet donec vitae wisi pellentesque magna non lacinia qui. In erat in maecenas amet dui. Aliquam elit vel. Ligula sodales lacus. Nisl a purus. Pharetra velit porttitor vel vel non turpis viverra fringilla lorem arcu pellentesque sed aliquet nonummy quisque dapibus ullamcorper. Mollis ipsum nulla. Tempor tempus vitae. Luctus amet vel. Suspendisse sagittis vestibulum fusce eu.</p>
            <p>Urna et felis bibendum felis sit vestibulum wisi pharetra quisque ac quis cursus suspendisse quisque aenean luctus curabitur. Eget nec leo. Mi placerat cras nulla et integer eget in sed. Non magni parturient. Egestas iaculis malesuada. Nec a duis. Pede condimentum ullamcorper. Augue arcu tellus. In velit in in duis odio dictum wisi proin quis eget sit. Felis tempus inceptos. Turpis risus eu. Mi vivamus consequat. Lectus dui imperdiet amet orci vehicula in vel pellentesque habitant suscipit aliquam. Proin porttitor vitae ultricies a in. Est duis pede. Tristique velit vestibulum odio sodales morbi magna ut vitae. Elementum imperdiet sodales ultrices tortor mollis vehicula lorem varius pellentesque mi ut sit turpis feugiat. In convallis urna. Justo aliquam sed quis scelerisque nonummy. Lobortis rhoncus ornare. Pellentesque leo quam at beatae in. Erat lorem tempus. Molestie faucibus a id mauris montes. Sed orci vulputate. Libero justo curabitur. Amet orci ante. Non felis est erat cras purus id at id nibh nunc facilisis amet metus sagittis pellentesque eros amet. Vitae sit nulla vitae wisi diam. Tincidunt ipsum eleifend semper tortor non. Tellus amet aliquet.</p>
            <div>
                <div id='div-2' style='float:left;'>
                    <script type='text/javascript'>
                     googletag.cmd.push(function() {
                         googletag.display('div-2');
                     });
                    </script>
                </div>
                <div id='div-3'>
                    <script type='text/javascript'>
                     googletag.cmd.push(function() {
                         googletag.display('div-3');
                     });
                    </script>
                </div>
            </div>
            <p>Dis vitae penatibus. Mollis mauris bibendum. Porta orci amet dolor sed felis in neque per cursus molestie pellentesque. Quis accusamus vel sed dapibus orci congue ut eros. Nec faucibus inceptos. Hendrerit in eget nulla tellus lacinia. Fusce ut ut mattis.</p>
        </div>
    </body>
</html>
