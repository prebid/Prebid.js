<!--
  This page shows how to bid for FeedAd ads using Prebid.JS and GPT. <br>
  Exchange the clientToken and the placement ID below to test it with demand of your FeedAd publisher account.
-->
<html>
  <head>
      <script>
        var PREBID_TIMEOUT = 3300;

        var adUnits = [{
          code: 'div-gpt-ad-1460505748561-0',
          mediaTypes: {
            banner: {
              sizes: [[300, 250]],
            }
          },
          bids: [{
            bidder: 'feedad',
            params: {
              clientToken: "EiRjZDFiYzI2ZC03OTA2LTQyOTEtOGFmMC0xYzMyZmMwNTFkMDU=",
              placementId: "prebid-test"
            }
          }]

        }];

        var pbjs = pbjs || {};
        pbjs.que = pbjs.que || [];

      </script>

      <script type="text/javascript" src="../../build/dev/prebid.js" async></script>
      <script>
        var googletag = googletag || {};
        googletag.cmd = googletag.cmd || [];
        googletag.cmd.push(function() {
          googletag.pubads().disableInitialLoad();
        });

        pbjs.que.push(function() {
          pbjs.addAdUnits(adUnits);
          pbjs.requestBids({
            bidsBackHandler: sendAdserverRequest
          });
        });

        function sendAdserverRequest() {
          if (pbjs.adserverRequestSent) return;
          pbjs.adserverRequestSent = true;
          googletag.cmd.push(function() {
            pbjs.que.push(function() {
              pbjs.setTargetingForGPTAsync();
              googletag.pubads().refresh();
            });
          });
        }

        setTimeout(function() {
          sendAdserverRequest();
        }, PREBID_TIMEOUT);

      </script>

      <script>
        (function () {
          var gads = document.createElement('script');
          gads.async = true;
          gads.type = 'text/javascript';
          var useSSL = 'https:' == document.location.protocol;
          gads.src = (useSSL ? 'https:' : 'http:') +
            '//www.googletagservices.com/tag/js/gpt.js';
          var node = document.getElementsByTagName('script')[0];
          node.parentNode.insertBefore(gads, node);
        })();
      </script>

      <script>
        googletag.cmd.push(function () {
          googletag.defineSlot('/19968336/header-bid-tag-0', [[300, 250], [300, 600]], 'div-gpt-ad-1460505748561-0').addService(googletag.pubads());

          googletag.pubads().enableSingleRequest();
          googletag.enableServices();
        });
      </script>
  </head>

  <body>
  <h2>Prebid.js Test</h2>
  <h5>Div-1</h5>
  <div id='div-gpt-ad-1460505748561-0'>
      <script type='text/javascript'>
        googletag.cmd.push(function() { googletag.display('div-gpt-ad-1460505748561-0'); });
      </script>
  </div>
  </body>
  </html>
