if("undefined"==typeof console){console={},console.log=function(){console.alert===!0&&alert(JSON.stringify(Array.prototype.slice.call(arguments)))};var logWithType=function(){console.log(this.type+": ",arguments)};console.debug=function(){logWithType.apply({type:"DEBUG"},arguments)},console.dir=function(){logWithType.apply({type:"DIR"},arguments)},console.error=function(){logWithType.apply({type:"ERROR"},arguments)},console.warn=function(){logWithType.apply({type:"WARNING"},arguments)},console.group=console.groupCollapsed=console.groupEnd=console.info=console.time=console.timeEnd=console.trace=function(){console.log("command not supported")}}Object.keys||(Object.keys=function(){"use strict";var e=Object.prototype.hasOwnProperty,t=!{toString:null}.propertyIsEnumerable("toString"),i=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],n=i.length;return function(o){if("object"!=typeof o&&("function"!=typeof o||null===o))throw new TypeError("Object.keys called on non-object");var r,s,a=[];for(r in o)e.call(o,r)&&a.push(r);if(t)for(s=0;n>s;s++)e.call(o,i[s])&&a.push(i[s]);return a}}()),function(){for(var e=0,t=["webkit","moz"],i=0;i<t.length&&!window.requestAnimationFrame;++i)window.requestAnimationFrame=window[t[i]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[t[i]+"CancelAnimationFrame"]||window[t[i]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(t){var i=(new Date).getTime(),n=Math.max(0,16-(i-e)),o=window.setTimeout(function(){t(i+n)},n);return e=i+n,o}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(e){clearTimeout(e)})}(),"bind"in Function.prototype||(Function.prototype.bind=function(e){var t=this;if(arguments.length<=1)return function(){return t.apply(e,arguments)};var i=Array.prototype.slice.call(arguments,1);return function(){return t.apply(e,0===arguments.length?i:i.concat(Array.prototype.slice.call(arguments)))}}),"trim"in String.prototype||(String.prototype.trim=function(){return this.replace(/^\s+/,"").replace(/\s+$/,"")}),"indexOf"in Array.prototype||(Array.prototype.indexOf=function(e,t){void 0===t&&(t=0),0>t&&(t+=this.length),0>t&&(t=0);for(var i=this.length;i>t;t++)if(t in this&&this[t]===e)return t;return-1}),"lastIndexOf"in Array.prototype||(Array.prototype.lastIndexOf=function(e,t){for(void 0===t&&(t=this.length-1),0>t&&(t+=this.length),t>this.length-1&&(t=this.length-1),t++;t-->0;)if(t in this&&this[t]===e)return t;return-1}),"forEach"in Array.prototype||(Array.prototype.forEach=function(e,t){for(var i=0,n=this.length;n>i;i++)i in this&&e.call(t,this[i],i,this)}),"map"in Array.prototype||(Array.prototype.map=function(e,t){for(var i=new Array(this.length),n=0,o=this.length;o>n;n++)n in this&&(i[n]=e.call(t,this[n],n,this));return i}),"filter"in Array.prototype||(Array.prototype.filter=function(e,t){for(var i,n=[],o=0,r=this.length;r>o;o++)o in this&&e.call(t,i=this[o],o,this)&&n.push(i);return n}),"every"in Array.prototype||(Array.prototype.every=function(e,t){for(var i=0,n=this.length;n>i;i++)if(i in this&&!e.call(t,this[i],i,this))return!1;return!0}),"some"in Array.prototype||(Array.prototype.some=function(e,t){for(var i=0,n=this.length;n>i;i++)if(i in this&&e.call(t,this[i],i,this))return!0;return!1}),"function"!=typeof Array.prototype.reduce&&(Array.prototype.reduce=function(e,t){"use strict";if(null===this||"undefined"==typeof this)throw new TypeError("Array.prototype.reduce called on null or undefined");if("function"!=typeof e)throw new TypeError(e+" is not a function");var i,n,o=this.length>>>0,r=!1;for(1<arguments.length&&(n=t,r=!0),i=0;o>i;++i)this.hasOwnProperty(i)&&(r?n=e(n,this[i],i,this):(n=this[i],r=!0));if(!r)throw new TypeError("Reduce of empty array with no initial value");return n});var I18n=I18n||{};I18n.defaultLocale="en",I18n.fallbacks=!1,I18n.defaultSeparator=".",I18n.locale=null,I18n.PLACEHOLDER=/(?:\{\{|%\{)(.*?)(?:\}\}?)/gm,I18n.isValidNode=function(e,t,i){return null!==e[t]&&e[t]!==i},I18n.lookup=function(e,t){var i,t=t||{},n=e,o=this.prepareOptions(I18n.translations),r=o[t.locale||I18n.currentLocale()],t=this.prepareOptions(t);if(r){for("object"==typeof e&&(e=e.join(this.defaultSeparator)),t.scope&&(e=t.scope.toString()+this.defaultSeparator+e),e=e.split(this.defaultSeparator);e.length>0;)if(i=e.shift(),r=r[i],!r){I18n.fallbacks&&!t.fallback&&(r=I18n.lookup(n,this.prepareOptions({locale:I18n.defaultLocale,fallback:!0},t)));break}return!r&&this.isValidNode(t,"defaultValue")&&(r=t.defaultValue),r}},I18n.prepareOptions=function(){for(var e,t={},i=arguments.length,n=0;i>n;n++)if(e=arguments[n])for(var o in e)this.isValidNode(t,o)||(t[o]=e[o]);return t},I18n.interpolate=function(e,t){t=this.prepareOptions(t);var i,n,o,r=e.match(this.PLACEHOLDER);if(!r)return e;for(var s=0;i=r[s];s++)o=i.replace(this.PLACEHOLDER,"$1"),n=t[o],this.isValidNode(t,o)||(n="[missing "+i+" value]"),regex=new RegExp(i.replace(/\{/gm,"\\{").replace(/\}/gm,"\\}")),e=e.replace(regex,n);return e},I18n.translate=function(e,t){t=this.prepareOptions(t);var i=this.lookup(e,t);try{return"object"==typeof i?"number"==typeof t.count?this.pluralize(t.count,e,t):i:this.interpolate(i,t)}catch(n){return this.missingTranslation(e)}},I18n.localize=function(e,t){switch(e){case"currency":return this.toCurrency(t);case"number":return e=this.lookup("number.format"),this.toNumber(t,e);case"percentage":return this.toPercentage(t);default:return e.match(/^(date|time)/)?this.toTime(e,t):t.toString()}},I18n.parseDate=function(e){var t,i;if("object"==typeof e)return e;if(t=e.toString().match(/(\d{4})-(\d{2})-(\d{2})(?:[ T](\d{2}):(\d{2}):(\d{2}))?(Z|\+0000)?/)){for(var n=1;6>=n;n++)t[n]=parseInt(t[n],10)||0;t[2]-=1,i=t[7]?new Date(Date.UTC(t[1],t[2],t[3],t[4],t[5],t[6])):new Date(t[1],t[2],t[3],t[4],t[5],t[6])}else"number"==typeof e?(i=new Date,i.setTime(e)):e.match(/\d+ \d+:\d+:\d+ [+-]\d+ \d+/)?(i=new Date,i.setTime(Date.parse(e))):(i=new Date,i.setTime(Date.parse(e)));return i},I18n.toTime=function(e,t){var i=this.parseDate(t),n=this.lookup(e);return i.toString().match(/invalid/i)?i.toString():n?this.strftime(i,n):i.toString()},I18n.strftime=function(e,t){var i=this.lookup("date");if(!i)return e.toString();i.meridian=i.meridian||["AM","PM"];var n=e.getDay(),o=e.getDate(),r=e.getFullYear(),s=e.getMonth()+1,a=e.getHours(),l=a,c=a>11?1:0,u=e.getSeconds(),d=e.getMinutes(),h=e.getTimezoneOffset(),f=Math.floor(Math.abs(h/60)),p=Math.abs(h)-60*f,m=(h>0?"-":"+")+(f.toString().length<2?"0"+f:f)+(p.toString().length<2?"0"+p:p);l>12?l-=12:0===l&&(l=12);var g=function(e){var t="0"+e.toString();return t.substr(t.length-2)},v=t;return v=v.replace("%a",i.abbr_day_names[n]),v=v.replace("%A",i.day_names[n]),v=v.replace("%b",i.abbr_month_names[s]),v=v.replace("%B",i.month_names[s]),v=v.replace("%d",g(o)),v=v.replace("%e",o),v=v.replace("%-d",o),v=v.replace("%H",g(a)),v=v.replace("%-H",a),v=v.replace("%I",g(l)),v=v.replace("%-I",l),v=v.replace("%m",g(s)),v=v.replace("%-m",s),v=v.replace("%M",g(d)),v=v.replace("%-M",d),v=v.replace("%p",i.meridian[c]),v=v.replace("%S",g(u)),v=v.replace("%-S",u),v=v.replace("%w",n),v=v.replace("%y",g(r)),v=v.replace("%-y",g(r).replace(/^0+/,"")),v=v.replace("%Y",r),v=v.replace("%z",m)},I18n.toNumber=function(e,t){t=this.prepareOptions(t,this.lookup("number.format"),{precision:3,separator:".",delimiter:",",strip_insignificant_zeros:!1});var i,n,o=0>e,r=Math.abs(e).toFixed(t.precision).toString(),s=r.split("."),a=[];for(e=s[0],i=s[1];e.length>0;)a.unshift(e.substr(Math.max(0,e.length-3),3)),e=e.substr(0,e.length-3);if(n=a.join(t.delimiter),t.precision>0&&(n+=t.separator+s[1]),o&&(n="-"+n),t.strip_insignificant_zeros){var l={separator:new RegExp(t.separator.replace(/\./,"\\.")+"$"),zeros:/0+$/};n=n.replace(l.zeros,"").replace(l.separator,"")}return n},I18n.toCurrency=function(e,t){return t=this.prepareOptions(t,this.lookup("number.currency.format"),this.lookup("number.format"),{unit:"$",precision:2,format:"%u%n",delimiter:",",separator:"."}),e=this.toNumber(e,t),e=t.format.replace("%u",t.unit).replace("%n",e)},I18n.toHumanSize=function(e,t){for(var i,n,o=1024,r=e,s=0;r>=o&&4>s;)r/=o,s+=1;return 0===s?(i=this.t("number.human.storage_units.units.byte",{count:r}),n=0):(i=this.t("number.human.storage_units.units."+[null,"kb","mb","gb","tb"][s]),n=r-Math.floor(r)===0?0:1),t=this.prepareOptions(t,{precision:n,format:"%n%u",delimiter:""}),e=this.toNumber(r,t),e=t.format.replace("%u",i).replace("%n",e)},I18n.toPercentage=function(e,t){return t=this.prepareOptions(t,this.lookup("number.percentage.format"),this.lookup("number.format"),{precision:3,separator:".",delimiter:""}),e=this.toNumber(e,t),e+"%"},I18n.pluralize=function(e,t,i){var n;try{n=this.lookup(t,i)}catch(o){}if(!n)return this.missingTranslation(t);var r;switch(i=this.prepareOptions(i),i.count=e.toString(),Math.abs(e)){case 0:r=this.isValidNode(n,"zero")?n.zero:this.isValidNode(n,"none")?n.none:this.isValidNode(n,"other")?n.other:this.missingTranslation(t,"zero");break;case 1:r=this.isValidNode(n,"one")?n.one:this.missingTranslation(t,"one");break;default:r=this.isValidNode(n,"other")?n.other:this.missingTranslation(t,"other")}return this.interpolate(r,i)},I18n.missingTranslation=function(){for(var e='[missing "'+this.currentLocale(),t=arguments.length,i=0;t>i;i++)e+="."+arguments[i];return e+='" translation]'},I18n.currentLocale=function(){return I18n.locale||I18n.defaultLocale},I18n.t=I18n.translate,I18n.l=I18n.localize,I18n.p=I18n.pluralize,function(e,t){function i(e){var t,i,n=q[e]={};for(e=e.split(/\s+/),t=0,i=e.length;i>t;t++)n[e[t]]=!0;return n}function n(e,i,n){if(n===t&&1===e.nodeType){var o="data-"+i.replace(L,"-$1").toLowerCase();if(n=e.getAttribute(o),"string"==typeof n){try{n="true"===n?!0:"false"===n?!1:"null"===n?null:F.isNumeric(n)?parseFloat(n):H.test(n)?F.parseJSON(n):n}catch(r){}F.data(e,i,n)}else n=t}return n}function o(e){for(var t in e)if(("data"!==t||!F.isEmptyObject(e[t]))&&"toJSON"!==t)return!1;return!0}function r(e,t,i){var n=t+"defer",o=t+"queue",r=t+"mark",s=F._data(e,n);!s||"queue"!==i&&F._data(e,o)||"mark"!==i&&F._data(e,r)||setTimeout(function(){F._data(e,o)||F._data(e,r)||(F.removeData(e,n,!0),s.fire())},0)}function s(){return!1}function a(){return!0}function l(e){return!e||!e.parentNode||11===e.parentNode.nodeType}function c(e,t,i){if(t=t||0,F.isFunction(t))return F.grep(e,function(e,n){var o=!!t.call(e,n,e);return o===i});if(t.nodeType)return F.grep(e,function(e){return e===t===i});if("string"==typeof t){var n=F.grep(e,function(e){return 1===e.nodeType});if(dt.test(t))return F.filter(t,n,!i);t=F.filter(t,n)}return F.grep(e,function(e){return F.inArray(e,t)>=0===i})}function u(e){var t=mt.split("|"),i=e.createDocumentFragment();if(i.createElement)for(;t.length;)i.createElement(t.pop());return i}function d(e){return F.nodeName(e,"table")?e.getElementsByTagName("tbody")[0]||e.appendChild(e.ownerDocument.createElement("tbody")):e}function h(e,t){if(1===t.nodeType&&F.hasData(e)){var i,n,o,r=F._data(e),s=F._data(t,r),a=r.events;if(a){delete s.handle,s.events={};for(i in a)for(n=0,o=a[i].length;o>n;n++)F.event.add(t,i+(a[i][n].namespace?".":"")+a[i][n].namespace,a[i][n],a[i][n].data)}s.data&&(s.data=F.extend({},s.data))}}function f(e,t){var i;1===t.nodeType&&(t.clearAttributes&&t.clearAttributes(),t.mergeAttributes&&t.mergeAttributes(e),i=t.nodeName.toLowerCase(),"object"===i?t.outerHTML=e.outerHTML:"input"!==i||"checkbox"!==e.type&&"radio"!==e.type?"option"===i?t.selected=e.defaultSelected:("input"===i||"textarea"===i)&&(t.defaultValue=e.defaultValue):(e.checked&&(t.defaultChecked=t.checked=e.checked),t.value!==e.value&&(t.value=e.value)),t.removeAttribute(F.expando))}function p(e){return"undefined"!=typeof e.getElementsByTagName?e.getElementsByTagName("*"):"undefined"!=typeof e.querySelectorAll?e.querySelectorAll("*"):[]}function m(e){("checkbox"===e.type||"radio"===e.type)&&(e.defaultChecked=e.checked)}function g(e){var t=(e.nodeName||"").toLowerCase();"input"===t?m(e):"script"!==t&&"undefined"!=typeof e.getElementsByTagName&&F.grep(e.getElementsByTagName("input"),m)}function v(e){var t=N.createElement("div");return At.appendChild(t),t.innerHTML=e.outerHTML,t.firstChild}function y(e,t){t.src?F.ajax({url:t.src,async:!1,dataType:"script"}):F.globalEval((t.text||t.textContent||t.innerHTML||"").replace(St,"/*$0*/")),t.parentNode&&t.parentNode.removeChild(t)}function b(e,t,i){var n="width"===t?e.offsetWidth:e.offsetHeight,o="width"===t?Lt:Mt,r=0,s=o.length;if(n>0){if("border"!==i)for(;s>r;r++)i||(n-=parseFloat(F.css(e,"padding"+o[r]))||0),"margin"===i?n+=parseFloat(F.css(e,i+o[r]))||0:n-=parseFloat(F.css(e,"border"+o[r]+"Width"))||0;return n+"px"}if(n=It(e,t,t),(0>n||null==n)&&(n=e.style[t]||0),n=parseFloat(n)||0,i)for(;s>r;r++)n+=parseFloat(F.css(e,"padding"+o[r]))||0,"padding"!==i&&(n+=parseFloat(F.css(e,"border"+o[r]+"Width"))||0),"margin"===i&&(n+=parseFloat(F.css(e,i+o[r]))||0);return n+"px"}function w(e){return function(t,i){if("string"!=typeof t&&(i=t,t="*"),F.isFunction(i))for(var n,o,r,s=t.toLowerCase().split(ii),a=0,l=s.length;l>a;a++)n=s[a],r=/^\+/.test(n),r&&(n=n.substr(1)||"*"),o=e[n]=e[n]||[],o[r?"unshift":"push"](i)}}function _(e,i,n,o,r,s){r=r||i.dataTypes[0],s=s||{},s[r]=!0;for(var a,l=e[r],c=0,u=l?l.length:0,d=e===si;u>c&&(d||!a);c++)a=l[c](i,n,o),"string"==typeof a&&(!d||s[a]?a=t:(i.dataTypes.unshift(a),a=_(e,i,n,o,a,s)));return!d&&a||s["*"]||(a=_(e,i,n,o,"*",s)),a}function x(e,i){var n,o,r=F.ajaxSettings.flatOptions||{};for(n in i)i[n]!==t&&((r[n]?e:o||(o={}))[n]=i[n]);o&&F.extend(!0,e,o)}function k(e,t,i,n){if(F.isArray(t))F.each(t,function(t,o){i||Bt.test(e)?n(e,o):k(e+"["+("object"==typeof o||F.isArray(o)?t:"")+"]",o,i,n)});else if(i||null==t||"object"!=typeof t)n(e,t);else for(var o in t)k(e+"["+o+"]",t[o],i,n)}function $(e,i,n){var o,r,s,a,l=e.contents,c=e.dataTypes,u=e.responseFields;for(r in u)r in n&&(i[u[r]]=n[r]);for(;"*"===c[0];)c.shift(),o===t&&(o=e.mimeType||i.getResponseHeader("content-type"));if(o)for(r in l)if(l[r]&&l[r].test(o)){c.unshift(r);break}if(c[0]in n)s=c[0];else{for(r in n){if(!c[0]||e.converters[r+" "+c[0]]){s=r;break}a||(a=r)}s=s||a}return s?(s!==c[0]&&c.unshift(s),n[s]):void 0}function C(e,i){e.dataFilter&&(i=e.dataFilter(i,e.dataType));var n,o,r,s,a,l,c,u,d=e.dataTypes,h={},f=d.length,p=d[0];for(n=1;f>n;n++){if(1===n)for(o in e.converters)"string"==typeof o&&(h[o.toLowerCase()]=e.converters[o]);if(s=p,p=d[n],"*"===p)p=s;else if("*"!==s&&s!==p){if(a=s+" "+p,l=h[a]||h["* "+p],!l){u=t;for(c in h)if(r=c.split(" "),(r[0]===s||"*"===r[0])&&(u=h[r[1]+" "+p])){c=h[c],c===!0?l=u:u===!0&&(l=c);break}}l||u||F.error("No conversion from "+a.replace(" "," to ")),l!==!0&&(i=l?l(i):u(c(i)))}}return i}function j(){try{return new e.XMLHttpRequest}catch(t){}}function S(){try{return new e.ActiveXObject("Microsoft.XMLHTTP")}catch(t){}}function T(){return setTimeout(A,0),yi=F.now()}function A(){yi=t}function I(e,t){var i={};return F.each(xi.concat.apply([],xi.slice(0,t)),function(){i[this]=e}),i}function E(e){if(!bi[e]){var t=N.body,i=F("<"+e+">").appendTo(t),n=i.css("display");i.remove(),("none"===n||""===n)&&(mi||(mi=N.createElement("iframe"),mi.frameBorder=mi.width=mi.height=0),t.appendChild(mi),gi&&mi.createElement||(gi=(mi.contentWindow||mi.contentDocument).document,gi.write(("CSS1Compat"===N.compatMode?"<!doctype html>":"")+"<html><body>"),gi.close()),i=gi.createElement(e),gi.body.appendChild(i),n=F.css(i,"display"),t.removeChild(mi)),bi[e]=n}return bi[e]}function P(e){return F.isWindow(e)?e:9===e.nodeType?e.defaultView||e.parentWindow:!1}var N=e.document,D=e.navigator,O=e.location,F=function(){function i(){if(!a.isReady){try{N.documentElement.doScroll("left")}catch(e){return void setTimeout(i,1)}a.ready()}}var n,o,r,s,a=function(e,t){return new a.fn.init(e,t,n)},l=e.jQuery,c=e.$,u=/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,d=/\S/,h=/^\s+/,f=/\s+$/,p=/^<(\w+)\s*\/?>(?:<\/\1>)?$/,m=/^[\],:{}\s]*$/,g=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,v=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,y=/(?:^|:|,)(?:\s*\[)+/g,b=/(webkit)[ \/]([\w.]+)/,w=/(opera)(?:.*version)?[ \/]([\w.]+)/,_=/(msie) ([\w.]+)/,x=/(mozilla)(?:.*? rv:([\w.]+))?/,k=/-([a-z]|[0-9])/gi,$=/^-ms-/,C=function(e,t){return(t+"").toUpperCase()},j=D.userAgent,S=Object.prototype.toString,T=Object.prototype.hasOwnProperty,A=Array.prototype.push,I=Array.prototype.slice,E=String.prototype.trim,P=Array.prototype.indexOf,O={};return a.fn=a.prototype={constructor:a,init:function(e,i,n){var o,r,s,l;if(!e)return this;if(e.nodeType)return this.context=this[0]=e,this.length=1,this;if("body"===e&&!i&&N.body)return this.context=N,this[0]=N.body,this.selector=e,this.length=1,this;if("string"==typeof e){if(o="<"===e.charAt(0)&&">"===e.charAt(e.length-1)&&e.length>=3?[null,e,null]:u.exec(e),!o||!o[1]&&i)return!i||i.jquery?(i||n).find(e):this.constructor(i).find(e);if(o[1])return i=i instanceof a?i[0]:i,l=i?i.ownerDocument||i:N,s=p.exec(e),s?a.isPlainObject(i)?(e=[N.createElement(s[1])],a.fn.attr.call(e,i,!0)):e=[l.createElement(s[1])]:(s=a.buildFragment([o[1]],[l]),e=(s.cacheable?a.clone(s.fragment):s.fragment).childNodes),a.merge(this,e);if(r=N.getElementById(o[2]),r&&r.parentNode){if(r.id!==o[2])return n.find(e);this.length=1,this[0]=r}return this.context=N,this.selector=e,this}return a.isFunction(e)?n.ready(e):(e.selector!==t&&(this.selector=e.selector,this.context=e.context),a.makeArray(e,this))},selector:"",jquery:"1.7.1",length:0,size:function(){return this.length},toArray:function(){return I.call(this,0)},get:function(e){return null==e?this.toArray():0>e?this[this.length+e]:this[e]},pushStack:function(e,t,i){var n=this.constructor();return a.isArray(e)?A.apply(n,e):a.merge(n,e),n.prevObject=this,n.context=this.context,"find"===t?n.selector=this.selector+(this.selector?" ":"")+i:t&&(n.selector=this.selector+"."+t+"("+i+")"),n},each:function(e,t){return a.each(this,e,t)},ready:function(e){return a.bindReady(),r.add(e),this},eq:function(e){return e=+e,-1===e?this.slice(e):this.slice(e,e+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},slice:function(){return this.pushStack(I.apply(this,arguments),"slice",I.call(arguments).join(","))},map:function(e){return this.pushStack(a.map(this,function(t,i){return e.call(t,i,t)}))},end:function(){return this.prevObject||this.constructor(null)},push:A,sort:[].sort,splice:[].splice},a.fn.init.prototype=a.fn,a.extend=a.fn.extend=function(){var e,i,n,o,r,s,l=arguments[0]||{},c=1,u=arguments.length,d=!1;for("boolean"==typeof l&&(d=l,l=arguments[1]||{},c=2),"object"==typeof l||a.isFunction(l)||(l={}),u===c&&(l=this,--c);u>c;c++)if(null!=(e=arguments[c]))for(i in e)n=l[i],o=e[i],l!==o&&(d&&o&&(a.isPlainObject(o)||(r=a.isArray(o)))?(r?(r=!1,s=n&&a.isArray(n)?n:[]):s=n&&a.isPlainObject(n)?n:{},l[i]=a.extend(d,s,o)):o!==t&&(l[i]=o));return l},a.extend({noConflict:function(t){return e.$===a&&(e.$=c),t&&e.jQuery===a&&(e.jQuery=l),a},isReady:!1,readyWait:1,holdReady:function(e){e?a.readyWait++:a.ready(!0)},ready:function(e){if(e===!0&&!--a.readyWait||e!==!0&&!a.isReady){if(!N.body)return setTimeout(a.ready,1);if(a.isReady=!0,e!==!0&&--a.readyWait>0)return;r.fireWith(N,[a]),a.fn.trigger&&a(N).trigger("ready").off("ready")}},bindReady:function(){if(!r){if(r=a.Callbacks("once memory"),"complete"===N.readyState)return setTimeout(a.ready,1);if(N.addEventListener)N.addEventListener("DOMContentLoaded",s,!1),e.addEventListener("load",a.ready,!1);else if(N.attachEvent){N.attachEvent("onreadystatechange",s),e.attachEvent("onload",a.ready);var t=!1;try{t=null==e.frameElement}catch(n){}N.documentElement.doScroll&&t&&i()}}},isFunction:function(e){return"function"===a.type(e)},isArray:Array.isArray||function(e){return"array"===a.type(e)},isWindow:function(e){return e&&"object"==typeof e&&"setInterval"in e},isNumeric:function(e){return!isNaN(parseFloat(e))&&isFinite(e)},type:function(e){return null==e?String(e):O[S.call(e)]||"object"},isPlainObject:function(e){if(!e||"object"!==a.type(e)||e.nodeType||a.isWindow(e))return!1;try{if(e.constructor&&!T.call(e,"constructor")&&!T.call(e.constructor.prototype,"isPrototypeOf"))return!1}catch(i){return!1}var n;for(n in e);return n===t||T.call(e,n)},isEmptyObject:function(e){for(var t in e)return!1;return!0},error:function(e){throw new Error(e)},parseJSON:function(t){return"string"==typeof t&&t?(t=a.trim(t),e.JSON&&e.JSON.parse?e.JSON.parse(t):m.test(t.replace(g,"@").replace(v,"]").replace(y,""))?new Function("return "+t)():void a.error("Invalid JSON: "+t)):null},parseXML:function(i){var n,o;try{e.DOMParser?(o=new DOMParser,n=o.parseFromString(i,"text/xml")):(n=new ActiveXObject("Microsoft.XMLDOM"),n.async="false",n.loadXML(i))}catch(r){n=t}return n&&n.documentElement&&!n.getElementsByTagName("parsererror").length||a.error("Invalid XML: "+i),n},noop:function(){},globalEval:function(t){t&&d.test(t)&&(e.execScript||function(t){e.eval.call(e,t)})(t)},camelCase:function(e){return e.replace($,"ms-").replace(k,C)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toUpperCase()===t.toUpperCase()},each:function(e,i,n){var o,r=0,s=e.length,l=s===t||a.isFunction(e);if(n)if(l){for(o in e)if(i.apply(e[o],n)===!1)break}else for(;s>r&&i.apply(e[r++],n)!==!1;);else if(l){for(o in e)if(i.call(e[o],o,e[o])===!1)break}else for(;s>r&&i.call(e[r],r,e[r++])!==!1;);return e},trim:E?function(e){return null==e?"":E.call(e)}:function(e){return null==e?"":e.toString().replace(h,"").replace(f,"")},makeArray:function(e,t){var i=t||[];if(null!=e){var n=a.type(e);null==e.length||"string"===n||"function"===n||"regexp"===n||a.isWindow(e)?A.call(i,e):a.merge(i,e)}return i},inArray:function(e,t,i){var n;if(t){if(P)return P.call(t,e,i);for(n=t.length,i=i?0>i?Math.max(0,n+i):i:0;n>i;i++)if(i in t&&t[i]===e)return i}return-1},merge:function(e,i){var n=e.length,o=0;if("number"==typeof i.length)for(var r=i.length;r>o;o++)e[n++]=i[o];else for(;i[o]!==t;)e[n++]=i[o++];return e.length=n,e},grep:function(e,t,i){var n,o=[];i=!!i;for(var r=0,s=e.length;s>r;r++)n=!!t(e[r],r),i!==n&&o.push(e[r]);return o},map:function(e,i,n){var o,r,s=[],l=0,c=e.length,u=e instanceof a||c!==t&&"number"==typeof c&&(c>0&&e[0]&&e[c-1]||0===c||a.isArray(e));if(u)for(;c>l;l++)o=i(e[l],l,n),null!=o&&(s[s.length]=o);else for(r in e)o=i(e[r],r,n),null!=o&&(s[s.length]=o);return s.concat.apply([],s)},guid:1,proxy:function(e,i){if("string"==typeof i){var n=e[i];i=e,e=n}if(!a.isFunction(e))return t;var o=I.call(arguments,2),r=function(){return e.apply(i,o.concat(I.call(arguments)))};return r.guid=e.guid=e.guid||r.guid||a.guid++,r},access:function(e,i,n,o,r,s){var l=e.length;if("object"==typeof i){for(var c in i)a.access(e,c,i[c],o,r,n);return e}if(n!==t){o=!s&&o&&a.isFunction(n);for(var u=0;l>u;u++)r(e[u],i,o?n.call(e[u],u,r(e[u],i)):n,s);return e}return l?r(e[0],i):t},now:function(){return(new Date).getTime()},uaMatch:function(e){e=e.toLowerCase();var t=b.exec(e)||w.exec(e)||_.exec(e)||e.indexOf("compatible")<0&&x.exec(e)||[];return{browser:t[1]||"",version:t[2]||"0"}},sub:function(){function e(t,i){return new e.fn.init(t,i)}a.extend(!0,e,this),e.superclass=this,e.fn=e.prototype=this(),e.fn.constructor=e,e.sub=this.sub,e.fn.init=function(i,n){return n&&n instanceof a&&!(n instanceof e)&&(n=e(n)),a.fn.init.call(this,i,n,t)},e.fn.init.prototype=e.fn;var t=e(N);return e},browser:{}}),a.each("Boolean Number String Function Array Date RegExp Object".split(" "),function(e,t){O["[object "+t+"]"]=t.toLowerCase()}),o=a.uaMatch(j),o.browser&&(a.browser[o.browser]=!0,a.browser.version=o.version),a.browser.webkit&&(a.browser.safari=!0),d.test("\xa0")&&(h=/^[\s\xA0]+/,f=/[\s\xA0]+$/),n=a(N),N.addEventListener?s=function(){N.removeEventListener("DOMContentLoaded",s,!1),a.ready()}:N.attachEvent&&(s=function(){"complete"===N.readyState&&(N.detachEvent("onreadystatechange",s),a.ready())}),a}(),q={};F.Callbacks=function(e){e=e?q[e]||i(e):{};var n,o,r,s,a,l=[],c=[],u=function(t){var i,n,o,r;for(i=0,n=t.length;n>i;i++)o=t[i],r=F.type(o),"array"===r?u(o):"function"===r&&(e.unique&&h.has(o)||l.push(o))},d=function(t,i){for(i=i||[],n=!e.memory||[t,i],o=!0,a=r||0,r=0,s=l.length;l&&s>a;a++)if(l[a].apply(t,i)===!1&&e.stopOnFalse){n=!0;break}o=!1,l&&(e.once?n===!0?h.disable():l=[]:c&&c.length&&(n=c.shift(),h.fireWith(n[0],n[1])))},h={add:function(){if(l){var e=l.length;u(arguments),o?s=l.length:n&&n!==!0&&(r=e,d(n[0],n[1]))}return this},remove:function(){if(l)for(var t=arguments,i=0,n=t.length;n>i;i++)for(var r=0;r<l.length&&(t[i]!==l[r]||(o&&s>=r&&(s--,a>=r&&a--),l.splice(r--,1),!e.unique));r++);return this},has:function(e){if(l)for(var t=0,i=l.length;i>t;t++)if(e===l[t])return!0;return!1},empty:function(){return l=[],this},disable:function(){return l=c=n=t,this},disabled:function(){return!l},lock:function(){return c=t,n&&n!==!0||h.disable(),this},locked:function(){return!c},fireWith:function(t,i){return c&&(o?e.once||c.push([t,i]):e.once&&n||d(t,i)),this},fire:function(){return h.fireWith(this,arguments),this},fired:function(){return!!n}};return h};var R=[].slice;F.extend({Deferred:function(e){var t,i=F.Callbacks("once memory"),n=F.Callbacks("once memory"),o=F.Callbacks("memory"),r="pending",s={resolve:i,reject:n,notify:o},a={done:i.add,fail:n.add,progress:o.add,state:function(){return r},isResolved:i.fired,isRejected:n.fired,then:function(e,t,i){return l.done(e).fail(t).progress(i),this},always:function(){return l.done.apply(l,arguments).fail.apply(l,arguments),this},pipe:function(e,t,i){return F.Deferred(function(n){F.each({done:[e,"resolve"],fail:[t,"reject"],progress:[i,"notify"]},function(e,t){var i,o=t[0],r=t[1];l[e](F.isFunction(o)?function(){i=o.apply(this,arguments),i&&F.isFunction(i.promise)?i.promise().then(n.resolve,n.reject,n.notify):n[r+"With"](this===l?n:this,[i])}:n[r])})}).promise()},promise:function(e){if(null==e)e=a;else for(var t in a)e[t]=a[t];return e}},l=a.promise({});for(t in s)l[t]=s[t].fire,l[t+"With"]=s[t].fireWith;return l.done(function(){r="resolved"},n.disable,o.lock).fail(function(){r="rejected"},i.disable,o.lock),e&&e.call(l,l),l},when:function(e){function t(e){return function(t){n[e]=arguments.length>1?R.call(arguments,0):t,--a||l.resolveWith(l,n)}}function i(e){return function(t){s[e]=arguments.length>1?R.call(arguments,0):t,l.notifyWith(c,s)}}var n=R.call(arguments,0),o=0,r=n.length,s=new Array(r),a=r,l=1>=r&&e&&F.isFunction(e.promise)?e:F.Deferred(),c=l.promise();if(r>1){for(;r>o;o++)n[o]&&n[o].promise&&F.isFunction(n[o].promise)?n[o].promise().then(t(o),l.reject,i(o)):--a;a||l.resolveWith(l,n)}else l!==e&&l.resolveWith(l,r?[e]:[]);return c}}),F.support=function(){{var t,i,n,o,r,s,a,l,c,u,d,h,f=N.createElement("div");N.documentElement}if(f.setAttribute("className","t"),f.innerHTML="   <link/><table></table><a href='/a' style='top:1px;float:left;opacity:.55;'>a</a><input type='checkbox'/>",i=f.getElementsByTagName("*"),n=f.getElementsByTagName("a")[0],!i||!i.length||!n)return{};o=N.createElement("select"),r=o.appendChild(N.createElement("option")),s=f.getElementsByTagName("input")[0],t={leadingWhitespace:3===f.firstChild.nodeType,tbody:!f.getElementsByTagName("tbody").length,htmlSerialize:!!f.getElementsByTagName("link").length,style:/top/.test(n.getAttribute("style")),hrefNormalized:"/a"===n.getAttribute("href"),opacity:/^0.55/.test(n.style.opacity),cssFloat:!!n.style.cssFloat,checkOn:"on"===s.value,optSelected:r.selected,getSetAttribute:"t"!==f.className,enctype:!!N.createElement("form").enctype,html5Clone:"<:nav></:nav>"!==N.createElement("nav").cloneNode(!0).outerHTML,submitBubbles:!0,changeBubbles:!0,focusinBubbles:!1,deleteExpando:!0,noCloneEvent:!0,inlineBlockNeedsLayout:!1,shrinkWrapBlocks:!1,reliableMarginRight:!0},s.checked=!0,t.noCloneChecked=s.cloneNode(!0).checked,o.disabled=!0,t.optDisabled=!r.disabled;try{delete f.test}catch(p){t.deleteExpando=!1}if(!f.addEventListener&&f.attachEvent&&f.fireEvent&&(f.attachEvent("onclick",function(){t.noCloneEvent=!1}),f.cloneNode(!0).fireEvent("onclick")),s=N.createElement("input"),s.value="t",s.setAttribute("type","radio"),t.radioValue="t"===s.value,s.setAttribute("checked","checked"),f.appendChild(s),l=N.createDocumentFragment(),l.appendChild(f.lastChild),t.checkClone=l.cloneNode(!0).cloneNode(!0).lastChild.checked,t.appendChecked=s.checked,l.removeChild(s),l.appendChild(f),f.innerHTML="",e.getComputedStyle&&(a=N.createElement("div"),a.style.width="0",a.style.marginRight="0",f.style.width="2px",f.appendChild(a),t.reliableMarginRight=0===(parseInt((e.getComputedStyle(a,null)||{marginRight:0}).marginRight,10)||0)),f.attachEvent)for(d in{submit:1,change:1,focusin:1})u="on"+d,h=u in f,h||(f.setAttribute(u,"return;"),h="function"==typeof f[u]),t[d+"Bubbles"]=h;return l.removeChild(f),l=o=r=a=f=s=null,F(function(){var e,i,n,o,r,s,a,l,u,d,p=N.getElementsByTagName("body")[0];p&&(s=1,a="position:absolute;top:0;left:0;width:1px;height:1px;margin:0;",l="visibility:hidden;border:0;",u="style='"+a+"border:5px solid #000;padding:0;'",d="<div "+u+"><div></div></div><table "+u+" cellpadding='0' cellspacing='0'><tr><td></td></tr></table>",e=N.createElement("div"),e.style.cssText=l+"width:0;height:0;position:static;top:0;margin-top:"+s+"px",p.insertBefore(e,p.firstChild),f=N.createElement("div"),e.appendChild(f),f.innerHTML="<table><tr><td style='padding:0;border:0;display:none'></td><td>t</td></tr></table>",c=f.getElementsByTagName("td"),h=0===c[0].offsetHeight,c[0].style.display="",c[1].style.display="none",t.reliableHiddenOffsets=h&&0===c[0].offsetHeight,f.innerHTML="",f.style.width=f.style.paddingLeft="1px",F.boxModel=t.boxModel=2===f.offsetWidth,"undefined"!=typeof f.style.zoom&&(f.style.display="inline",f.style.zoom=1,t.inlineBlockNeedsLayout=2===f.offsetWidth,f.style.display="",f.innerHTML="<div style='width:4px;'></div>",t.shrinkWrapBlocks=2!==f.offsetWidth),f.style.cssText=a+l,f.innerHTML=d,i=f.firstChild,n=i.firstChild,o=i.nextSibling.firstChild.firstChild,r={doesNotAddBorder:5!==n.offsetTop,doesAddBorderForTableAndCells:5===o.offsetTop},n.style.position="fixed",n.style.top="20px",r.fixedPosition=20===n.offsetTop||15===n.offsetTop,n.style.position=n.style.top="",i.style.overflow="hidden",i.style.position="relative",r.subtractsBorderForOverflowNotVisible=-5===n.offsetTop,r.doesNotIncludeMarginInBodyOffset=p.offsetTop!==s,p.removeChild(e),f=e=null,F.extend(t,r))}),t}();var H=/^(?:\{.*\}|\[.*\])$/,L=/([A-Z])/g;F.extend({cache:{},uuid:0,expando:"jQuery"+(F.fn.jquery+Math.random()).replace(/\D/g,""),noData:{embed:!0,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",applet:!0},hasData:function(e){return e=e.nodeType?F.cache[e[F.expando]]:e[F.expando],!!e&&!o(e)},data:function(e,i,n,o){if(F.acceptData(e)){var r,s,a,l=F.expando,c="string"==typeof i,u=e.nodeType,d=u?F.cache:e,h=u?e[l]:e[l]&&l,f="events"===i;if(h&&d[h]&&(f||o||d[h].data)||!c||n!==t)return h||(u?e[l]=h=++F.uuid:h=l),d[h]||(d[h]={},u||(d[h].toJSON=F.noop)),("object"==typeof i||"function"==typeof i)&&(o?d[h]=F.extend(d[h],i):d[h].data=F.extend(d[h].data,i)),r=s=d[h],o||(s.data||(s.data={}),s=s.data),n!==t&&(s[F.camelCase(i)]=n),f&&!s[i]?r.events:(c?(a=s[i],null==a&&(a=s[F.camelCase(i)])):a=s,a)}},removeData:function(e,t,i){if(F.acceptData(e)){var n,r,s,a=F.expando,l=e.nodeType,c=l?F.cache:e,u=l?e[a]:a;if(c[u]){if(t&&(n=i?c[u]:c[u].data)){F.isArray(t)||(t in n?t=[t]:(t=F.camelCase(t),t=t in n?[t]:t.split(" ")));for(r=0,s=t.length;s>r;r++)delete n[t[r]];if(!(i?o:F.isEmptyObject)(n))return}(i||(delete c[u].data,o(c[u])))&&(F.support.deleteExpando||!c.setInterval?delete c[u]:c[u]=null,l&&(F.support.deleteExpando?delete e[a]:e.removeAttribute?e.removeAttribute(a):e[a]=null))}}},_data:function(e,t,i){return F.data(e,t,i,!0)},acceptData:function(e){if(e.nodeName){var t=F.noData[e.nodeName.toLowerCase()];if(t)return!(t===!0||e.getAttribute("classid")!==t)}return!0}}),F.fn.extend({data:function(e,i){var o,r,s,a=null;if("undefined"==typeof e){if(this.length&&(a=F.data(this[0]),1===this[0].nodeType&&!F._data(this[0],"parsedAttrs"))){r=this[0].attributes;for(var l=0,c=r.length;c>l;l++)s=r[l].name,0===s.indexOf("data-")&&(s=F.camelCase(s.substring(5)),n(this[0],s,a[s]));F._data(this[0],"parsedAttrs",!0)}return a}return"object"==typeof e?this.each(function(){F.data(this,e)}):(o=e.split("."),o[1]=o[1]?"."+o[1]:"",i===t?(a=this.triggerHandler("getData"+o[1]+"!",[o[0]]),a===t&&this.length&&(a=F.data(this[0],e),a=n(this[0],e,a)),a===t&&o[1]?this.data(o[0]):a):this.each(function(){var t=F(this),n=[o[0],i];t.triggerHandler("setData"+o[1]+"!",n),F.data(this,e,i),t.triggerHandler("changeData"+o[1]+"!",n)}))},removeData:function(e){return this.each(function(){F.removeData(this,e)})}}),F.extend({_mark:function(e,t){e&&(t=(t||"fx")+"mark",F._data(e,t,(F._data(e,t)||0)+1))},_unmark:function(e,t,i){if(e!==!0&&(i=t,t=e,e=!1),t){i=i||"fx";
var n=i+"mark",o=e?0:(F._data(t,n)||1)-1;o?F._data(t,n,o):(F.removeData(t,n,!0),r(t,i,"mark"))}},queue:function(e,t,i){var n;return e?(t=(t||"fx")+"queue",n=F._data(e,t),i&&(!n||F.isArray(i)?n=F._data(e,t,F.makeArray(i)):n.push(i)),n||[]):void 0},dequeue:function(e,t){t=t||"fx";var i=F.queue(e,t),n=i.shift(),o={};"inprogress"===n&&(n=i.shift()),n&&("fx"===t&&i.unshift("inprogress"),F._data(e,t+".run",o),n.call(e,function(){F.dequeue(e,t)},o)),i.length||(F.removeData(e,t+"queue "+t+".run",!0),r(e,t,"queue"))}}),F.fn.extend({queue:function(e,i){return"string"!=typeof e&&(i=e,e="fx"),i===t?F.queue(this[0],e):this.each(function(){var t=F.queue(this,e,i);"fx"===e&&"inprogress"!==t[0]&&F.dequeue(this,e)})},dequeue:function(e){return this.each(function(){F.dequeue(this,e)})},delay:function(e,t){return e=F.fx?F.fx.speeds[e]||e:e,t=t||"fx",this.queue(t,function(t,i){var n=setTimeout(t,e);i.stop=function(){clearTimeout(n)}})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,i){function n(){--l||r.resolveWith(s,[s])}"string"!=typeof e&&(i=e,e=t),e=e||"fx";for(var o,r=F.Deferred(),s=this,a=s.length,l=1,c=e+"defer",u=e+"queue",d=e+"mark";a--;)(o=F.data(s[a],c,t,!0)||(F.data(s[a],u,t,!0)||F.data(s[a],d,t,!0))&&F.data(s[a],c,F.Callbacks("once memory"),!0))&&(l++,o.add(n));return n(),r.promise()}});var M,W,U,z=/[\n\t\r]/g,B=/\s+/,G=/\r/g,X=/^(?:button|input)$/i,V=/^(?:button|input|object|select|textarea)$/i,Q=/^a(?:rea)?$/i,Y=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,J=F.support.getSetAttribute;F.fn.extend({attr:function(e,t){return F.access(this,e,t,!0,F.attr)},removeAttr:function(e){return this.each(function(){F.removeAttr(this,e)})},prop:function(e,t){return F.access(this,e,t,!0,F.prop)},removeProp:function(e){return e=F.propFix[e]||e,this.each(function(){try{this[e]=t,delete this[e]}catch(i){}})},addClass:function(e){var t,i,n,o,r,s,a;if(F.isFunction(e))return this.each(function(t){F(this).addClass(e.call(this,t,this.className))});if(e&&"string"==typeof e)for(t=e.split(B),i=0,n=this.length;n>i;i++)if(o=this[i],1===o.nodeType)if(o.className||1!==t.length){for(r=" "+o.className+" ",s=0,a=t.length;a>s;s++)~r.indexOf(" "+t[s]+" ")||(r+=t[s]+" ");o.className=F.trim(r)}else o.className=e;return this},removeClass:function(e){var i,n,o,r,s,a,l;if(F.isFunction(e))return this.each(function(t){F(this).removeClass(e.call(this,t,this.className))});if(e&&"string"==typeof e||e===t)for(i=(e||"").split(B),n=0,o=this.length;o>n;n++)if(r=this[n],1===r.nodeType&&r.className)if(e){for(s=(" "+r.className+" ").replace(z," "),a=0,l=i.length;l>a;a++)s=s.replace(" "+i[a]+" "," ");r.className=F.trim(s)}else r.className="";return this},toggleClass:function(e,t){var i=typeof e,n="boolean"==typeof t;return this.each(F.isFunction(e)?function(i){F(this).toggleClass(e.call(this,i,this.className,t),t)}:function(){if("string"===i)for(var o,r=0,s=F(this),a=t,l=e.split(B);o=l[r++];)a=n?a:!s.hasClass(o),s[a?"addClass":"removeClass"](o);else("undefined"===i||"boolean"===i)&&(this.className&&F._data(this,"__className__",this.className),this.className=this.className||e===!1?"":F._data(this,"__className__")||"")})},hasClass:function(e){for(var t=" "+e+" ",i=0,n=this.length;n>i;i++)if(1===this[i].nodeType&&(" "+this[i].className+" ").replace(z," ").indexOf(t)>-1)return!0;return!1},val:function(e){var i,n,o,r=this[0];{if(arguments.length)return o=F.isFunction(e),this.each(function(n){var r,s=F(this);1===this.nodeType&&(r=o?e.call(this,n,s.val()):e,null==r?r="":"number"==typeof r?r+="":F.isArray(r)&&(r=F.map(r,function(e){return null==e?"":e+""})),i=F.valHooks[this.nodeName.toLowerCase()]||F.valHooks[this.type],i&&"set"in i&&i.set(this,r,"value")!==t||(this.value=r))});if(r)return i=F.valHooks[r.nodeName.toLowerCase()]||F.valHooks[r.type],i&&"get"in i&&(n=i.get(r,"value"))!==t?n:(n=r.value,"string"==typeof n?n.replace(G,""):null==n?"":n)}}}),F.extend({valHooks:{option:{get:function(e){var t=e.attributes.value;return!t||t.specified?e.value:e.text}},select:{get:function(e){var t,i,n,o,r=e.selectedIndex,s=[],a=e.options,l="select-one"===e.type;if(0>r)return null;for(i=l?r:0,n=l?r+1:a.length;n>i;i++)if(o=a[i],!(!o.selected||(F.support.optDisabled?o.disabled:null!==o.getAttribute("disabled"))||o.parentNode.disabled&&F.nodeName(o.parentNode,"optgroup"))){if(t=F(o).val(),l)return t;s.push(t)}return l&&!s.length&&a.length?F(a[r]).val():s},set:function(e,t){var i=F.makeArray(t);return F(e).find("option").each(function(){this.selected=F.inArray(F(this).val(),i)>=0}),i.length||(e.selectedIndex=-1),i}}},attrFn:{val:!0,css:!0,html:!0,text:!0,data:!0,width:!0,height:!0,offset:!0},attr:function(e,i,n,o){var r,s,a,l=e.nodeType;if(e&&3!==l&&8!==l&&2!==l)return o&&i in F.attrFn?F(e)[i](n):"undefined"==typeof e.getAttribute?F.prop(e,i,n):(a=1!==l||!F.isXMLDoc(e),a&&(i=i.toLowerCase(),s=F.attrHooks[i]||(Y.test(i)?W:M)),n!==t?null===n?void F.removeAttr(e,i):s&&"set"in s&&a&&(r=s.set(e,n,i))!==t?r:(e.setAttribute(i,""+n),n):s&&"get"in s&&a&&null!==(r=s.get(e,i))?r:(r=e.getAttribute(i),null===r?t:r))},removeAttr:function(e,t){var i,n,o,r,s=0;if(t&&1===e.nodeType)for(n=t.toLowerCase().split(B),r=n.length;r>s;s++)o=n[s],o&&(i=F.propFix[o]||o,F.attr(e,o,""),e.removeAttribute(J?o:i),Y.test(o)&&i in e&&(e[i]=!1))},attrHooks:{type:{set:function(e,t){if(X.test(e.nodeName)&&e.parentNode)F.error("type property can't be changed");else if(!F.support.radioValue&&"radio"===t&&F.nodeName(e,"input")){var i=e.value;return e.setAttribute("type",t),i&&(e.value=i),t}}},value:{get:function(e,t){return M&&F.nodeName(e,"button")?M.get(e,t):t in e?e.value:null},set:function(e,t,i){return M&&F.nodeName(e,"button")?M.set(e,t,i):void(e.value=t)}}},propFix:{tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},prop:function(e,i,n){var o,r,s,a=e.nodeType;if(e&&3!==a&&8!==a&&2!==a)return s=1!==a||!F.isXMLDoc(e),s&&(i=F.propFix[i]||i,r=F.propHooks[i]),n!==t?r&&"set"in r&&(o=r.set(e,n,i))!==t?o:e[i]=n:r&&"get"in r&&null!==(o=r.get(e,i))?o:e[i]},propHooks:{tabIndex:{get:function(e){var i=e.getAttributeNode("tabindex");return i&&i.specified?parseInt(i.value,10):V.test(e.nodeName)||Q.test(e.nodeName)&&e.href?0:t}}}}),F.attrHooks.tabindex=F.propHooks.tabIndex,W={get:function(e,i){var n,o=F.prop(e,i);return o===!0||"boolean"!=typeof o&&(n=e.getAttributeNode(i))&&n.nodeValue!==!1?i.toLowerCase():t},set:function(e,t,i){var n;return t===!1?F.removeAttr(e,i):(n=F.propFix[i]||i,n in e&&(e[n]=!0),e.setAttribute(i,i.toLowerCase())),i}},J||(U={name:!0,id:!0},M=F.valHooks.button={get:function(e,i){var n;return n=e.getAttributeNode(i),n&&(U[i]?""!==n.nodeValue:n.specified)?n.nodeValue:t},set:function(e,t,i){var n=e.getAttributeNode(i);return n||(n=N.createAttribute(i),e.setAttributeNode(n)),n.nodeValue=t+""}},F.attrHooks.tabindex.set=M.set,F.each(["width","height"],function(e,t){F.attrHooks[t]=F.extend(F.attrHooks[t],{set:function(e,i){return""===i?(e.setAttribute(t,"auto"),i):void 0}})}),F.attrHooks.contenteditable={get:M.get,set:function(e,t,i){""===t&&(t="false"),M.set(e,t,i)}}),F.support.hrefNormalized||F.each(["href","src","width","height"],function(e,i){F.attrHooks[i]=F.extend(F.attrHooks[i],{get:function(e){var n=e.getAttribute(i,2);return null===n?t:n}})}),F.support.style||(F.attrHooks.style={get:function(e){return e.style.cssText.toLowerCase()||t},set:function(e,t){return e.style.cssText=""+t}}),F.support.optSelected||(F.propHooks.selected=F.extend(F.propHooks.selected,{get:function(e){var t=e.parentNode;return t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex),null}})),F.support.enctype||(F.propFix.enctype="encoding"),F.support.checkOn||F.each(["radio","checkbox"],function(){F.valHooks[this]={get:function(e){return null===e.getAttribute("value")?"on":e.value}}}),F.each(["radio","checkbox"],function(){F.valHooks[this]=F.extend(F.valHooks[this],{set:function(e,t){return F.isArray(t)?e.checked=F.inArray(F(e).val(),t)>=0:void 0}})});var Z=/^(?:textarea|input|select)$/i,K=/^([^\.]*)?(?:\.(.+))?$/,et=/\bhover(\.\S+)?\b/,tt=/^key/,it=/^(?:mouse|contextmenu)|click/,nt=/^(?:focusinfocus|focusoutblur)$/,ot=/^(\w*)(?:#([\w\-]+))?(?:\.([\w\-]+))?$/,rt=function(e){var t=ot.exec(e);return t&&(t[1]=(t[1]||"").toLowerCase(),t[3]=t[3]&&new RegExp("(?:^|\\s)"+t[3]+"(?:\\s|$)")),t},st=function(e,t){var i=e.attributes||{};return!(t[1]&&e.nodeName.toLowerCase()!==t[1]||t[2]&&(i.id||{}).value!==t[2]||t[3]&&!t[3].test((i["class"]||{}).value))},at=function(e){return F.event.special.hover?e:e.replace(et,"mouseenter$1 mouseleave$1")};F.event={add:function(e,i,n,o,r){var s,a,l,c,u,d,h,f,p,m,g;if(3!==e.nodeType&&8!==e.nodeType&&i&&n&&(s=F._data(e))){for(n.handler&&(p=n,n=p.handler),n.guid||(n.guid=F.guid++),l=s.events,l||(s.events=l={}),a=s.handle,a||(s.handle=a=function(e){return"undefined"==typeof F||e&&F.event.triggered===e.type?t:F.event.dispatch.apply(a.elem,arguments)},a.elem=e),i=F.trim(at(i)).split(" "),c=0;c<i.length;c++)u=K.exec(i[c])||[],d=u[1],h=(u[2]||"").split(".").sort(),g=F.event.special[d]||{},d=(r?g.delegateType:g.bindType)||d,g=F.event.special[d]||{},f=F.extend({type:d,origType:u[1],data:o,handler:n,guid:n.guid,selector:r,quick:rt(r),namespace:h.join(".")},p),m=l[d],m||(m=l[d]=[],m.delegateCount=0,g.setup&&g.setup.call(e,o,h,a)!==!1||(e.addEventListener?e.addEventListener(d,a,!1):e.attachEvent&&e.attachEvent("on"+d,a))),g.add&&(g.add.call(e,f),f.handler.guid||(f.handler.guid=n.guid)),r?m.splice(m.delegateCount++,0,f):m.push(f),F.event.global[d]=!0;e=null}},global:{},remove:function(e,t,i,n,o){var r,s,a,l,c,u,d,h,f,p,m,g,v=F.hasData(e)&&F._data(e);if(v&&(h=v.events)){for(t=F.trim(at(t||"")).split(" "),r=0;r<t.length;r++)if(s=K.exec(t[r])||[],a=l=s[1],c=s[2],a){for(f=F.event.special[a]||{},a=(n?f.delegateType:f.bindType)||a,m=h[a]||[],u=m.length,c=c?new RegExp("(^|\\.)"+c.split(".").sort().join("\\.(?:.*\\.)?")+"(\\.|$)"):null,d=0;d<m.length;d++)g=m[d],!o&&l!==g.origType||i&&i.guid!==g.guid||c&&!c.test(g.namespace)||n&&n!==g.selector&&("**"!==n||!g.selector)||(m.splice(d--,1),g.selector&&m.delegateCount--,f.remove&&f.remove.call(e,g));0===m.length&&u!==m.length&&(f.teardown&&f.teardown.call(e,c)!==!1||F.removeEvent(e,a,v.handle),delete h[a])}else for(a in h)F.event.remove(e,a+t[r],i,n,!0);F.isEmptyObject(h)&&(p=v.handle,p&&(p.elem=null),F.removeData(e,["events","handle"],!0))}},customEvent:{getData:!0,setData:!0,changeData:!0},trigger:function(i,n,o,r){if(!o||3!==o.nodeType&&8!==o.nodeType){var s,a,l,c,u,d,h,f,p,m,g=i.type||i,v=[];if(!nt.test(g+F.event.triggered)&&(g.indexOf("!")>=0&&(g=g.slice(0,-1),a=!0),g.indexOf(".")>=0&&(v=g.split("."),g=v.shift(),v.sort()),o&&!F.event.customEvent[g]||F.event.global[g]))if(i="object"==typeof i?i[F.expando]?i:new F.Event(g,i):new F.Event(g),i.type=g,i.isTrigger=!0,i.exclusive=a,i.namespace=v.join("."),i.namespace_re=i.namespace?new RegExp("(^|\\.)"+v.join("\\.(?:.*\\.)?")+"(\\.|$)"):null,d=g.indexOf(":")<0?"on"+g:"",o){if(i.result=t,i.target||(i.target=o),n=null!=n?F.makeArray(n):[],n.unshift(i),h=F.event.special[g]||{},!h.trigger||h.trigger.apply(o,n)!==!1){if(p=[[o,h.bindType||g]],!r&&!h.noBubble&&!F.isWindow(o)){for(m=h.delegateType||g,c=nt.test(m+g)?o:o.parentNode,u=null;c;c=c.parentNode)p.push([c,m]),u=c;u&&u===o.ownerDocument&&p.push([u.defaultView||u.parentWindow||e,m])}for(l=0;l<p.length&&!i.isPropagationStopped();l++)c=p[l][0],i.type=p[l][1],f=(F._data(c,"events")||{})[i.type]&&F._data(c,"handle"),f&&f.apply(c,n),f=d&&c[d],f&&F.acceptData(c)&&f.apply(c,n)===!1&&i.preventDefault();return i.type=g,r||i.isDefaultPrevented()||h._default&&h._default.apply(o.ownerDocument,n)!==!1||"click"===g&&F.nodeName(o,"a")||!F.acceptData(o)||d&&o[g]&&("focus"!==g&&"blur"!==g||0!==i.target.offsetWidth)&&!F.isWindow(o)&&(u=o[d],u&&(o[d]=null),F.event.triggered=g,o[g](),F.event.triggered=t,u&&(o[d]=u)),i.result}}else{s=F.cache;for(l in s)s[l].events&&s[l].events[g]&&F.event.trigger(i,n,s[l].handle.elem,!0)}}},dispatch:function(i){i=F.event.fix(i||e.event);var n,o,r,s,a,l,c,u,d,h,f=(F._data(this,"events")||{})[i.type]||[],p=f.delegateCount,m=[].slice.call(arguments,0),g=!i.exclusive&&!i.namespace,v=[];if(m[0]=i,i.delegateTarget=this,p&&!i.target.disabled&&(!i.button||"click"!==i.type))for(s=F(this),s.context=this.ownerDocument||this,r=i.target;r!=this;r=r.parentNode||this){for(l={},u=[],s[0]=r,n=0;p>n;n++)d=f[n],h=d.selector,l[h]===t&&(l[h]=d.quick?st(r,d.quick):s.is(h)),l[h]&&u.push(d);u.length&&v.push({elem:r,matches:u})}for(f.length>p&&v.push({elem:this,matches:f.slice(p)}),n=0;n<v.length&&!i.isPropagationStopped();n++)for(c=v[n],i.currentTarget=c.elem,o=0;o<c.matches.length&&!i.isImmediatePropagationStopped();o++)d=c.matches[o],(g||!i.namespace&&!d.namespace||i.namespace_re&&i.namespace_re.test(d.namespace))&&(i.data=d.data,i.handleObj=d,a=((F.event.special[d.origType]||{}).handle||d.handler).apply(c.elem,m),a!==t&&(i.result=a,a===!1&&(i.preventDefault(),i.stopPropagation())));return i.result},props:"attrChange attrName relatedNode srcElement altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return null==e.which&&(e.which=null!=t.charCode?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,i){var n,o,r,s=i.button,a=i.fromElement;return null==e.pageX&&null!=i.clientX&&(n=e.target.ownerDocument||N,o=n.documentElement,r=n.body,e.pageX=i.clientX+(o&&o.scrollLeft||r&&r.scrollLeft||0)-(o&&o.clientLeft||r&&r.clientLeft||0),e.pageY=i.clientY+(o&&o.scrollTop||r&&r.scrollTop||0)-(o&&o.clientTop||r&&r.clientTop||0)),!e.relatedTarget&&a&&(e.relatedTarget=a===e.target?i.toElement:a),e.which||s===t||(e.which=1&s?1:2&s?3:4&s?2:0),e}},fix:function(e){if(e[F.expando])return e;var i,n,o=e,r=F.event.fixHooks[e.type]||{},s=r.props?this.props.concat(r.props):this.props;for(e=F.Event(o),i=s.length;i;)n=s[--i],e[n]=o[n];return e.target||(e.target=o.srcElement||N),3===e.target.nodeType&&(e.target=e.target.parentNode),e.metaKey===t&&(e.metaKey=e.ctrlKey),r.filter?r.filter(e,o):e},special:{ready:{setup:F.bindReady},load:{noBubble:!0},focus:{delegateType:"focusin"},blur:{delegateType:"focusout"},beforeunload:{setup:function(e,t,i){F.isWindow(this)&&(this.onbeforeunload=i)},teardown:function(e,t){this.onbeforeunload===t&&(this.onbeforeunload=null)}}},simulate:function(e,t,i,n){var o=F.extend(new F.Event,i,{type:e,isSimulated:!0,originalEvent:{}});n?F.event.trigger(o,null,t):F.event.dispatch.call(t,o),o.isDefaultPrevented()&&i.preventDefault()}},F.event.handle=F.event.dispatch,F.removeEvent=N.removeEventListener?function(e,t,i){e.removeEventListener&&e.removeEventListener(t,i,!1)}:function(e,t,i){e.detachEvent&&e.detachEvent("on"+t,i)},F.Event=function(e,t){return this instanceof F.Event?(e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||e.returnValue===!1||e.getPreventDefault&&e.getPreventDefault()?a:s):this.type=e,t&&F.extend(this,t),this.timeStamp=e&&e.timeStamp||F.now(),void(this[F.expando]=!0)):new F.Event(e,t)},F.Event.prototype={preventDefault:function(){this.isDefaultPrevented=a;var e=this.originalEvent;e&&(e.preventDefault?e.preventDefault():e.returnValue=!1)},stopPropagation:function(){this.isPropagationStopped=a;var e=this.originalEvent;e&&(e.stopPropagation&&e.stopPropagation(),e.cancelBubble=!0)},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=a,this.stopPropagation()},isDefaultPrevented:s,isPropagationStopped:s,isImmediatePropagationStopped:s},F.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(e,t){F.event.special[e]={delegateType:t,bindType:t,handle:function(e){{var i,n=this,o=e.relatedTarget,r=e.handleObj;r.selector}return(!o||o!==n&&!F.contains(n,o))&&(e.type=r.origType,i=r.handler.apply(this,arguments),e.type=t),i}}}),F.support.submitBubbles||(F.event.special.submit={setup:function(){return F.nodeName(this,"form")?!1:void F.event.add(this,"click._submit keypress._submit",function(e){var i=e.target,n=F.nodeName(i,"input")||F.nodeName(i,"button")?i.form:t;n&&!n._submit_attached&&(F.event.add(n,"submit._submit",function(e){this.parentNode&&!e.isTrigger&&F.event.simulate("submit",this.parentNode,e,!0)}),n._submit_attached=!0)})},teardown:function(){return F.nodeName(this,"form")?!1:void F.event.remove(this,"._submit")}}),F.support.changeBubbles||(F.event.special.change={setup:function(){return Z.test(this.nodeName)?(("checkbox"===this.type||"radio"===this.type)&&(F.event.add(this,"propertychange._change",function(e){"checked"===e.originalEvent.propertyName&&(this._just_changed=!0)}),F.event.add(this,"click._change",function(e){this._just_changed&&!e.isTrigger&&(this._just_changed=!1,F.event.simulate("change",this,e,!0))})),!1):void F.event.add(this,"beforeactivate._change",function(e){var t=e.target;Z.test(t.nodeName)&&!t._change_attached&&(F.event.add(t,"change._change",function(e){!this.parentNode||e.isSimulated||e.isTrigger||F.event.simulate("change",this.parentNode,e,!0)}),t._change_attached=!0)})},handle:function(e){var t=e.target;return this!==t||e.isSimulated||e.isTrigger||"radio"!==t.type&&"checkbox"!==t.type?e.handleObj.handler.apply(this,arguments):void 0},teardown:function(){return F.event.remove(this,"._change"),Z.test(this.nodeName)}}),F.support.focusinBubbles||F.each({focus:"focusin",blur:"focusout"},function(e,t){var i=0,n=function(e){F.event.simulate(t,e.target,F.event.fix(e),!0)};F.event.special[t]={setup:function(){0===i++&&N.addEventListener(e,n,!0)},teardown:function(){0===--i&&N.removeEventListener(e,n,!0)}}}),F.fn.extend({on:function(e,i,n,o,r){var a,l;if("object"==typeof e){"string"!=typeof i&&(n=i,i=t);for(l in e)this.on(l,i,n,e[l],r);return this}if(null==n&&null==o?(o=i,n=i=t):null==o&&("string"==typeof i?(o=n,n=t):(o=n,n=i,i=t)),o===!1)o=s;else if(!o)return this;return 1===r&&(a=o,o=function(e){return F().off(e),a.apply(this,arguments)},o.guid=a.guid||(a.guid=F.guid++)),this.each(function(){F.event.add(this,e,o,n,i)})},one:function(e,t,i,n){return this.on.call(this,e,t,i,n,1)},off:function(e,i,n){if(e&&e.preventDefault&&e.handleObj){var o=e.handleObj;return F(e.delegateTarget).off(o.namespace?o.type+"."+o.namespace:o.type,o.selector,o.handler),this}if("object"==typeof e){for(var r in e)this.off(r,i,e[r]);return this}return(i===!1||"function"==typeof i)&&(n=i,i=t),n===!1&&(n=s),this.each(function(){F.event.remove(this,e,n,i)})},bind:function(e,t,i){return this.on(e,null,t,i)},unbind:function(e,t){return this.off(e,null,t)},live:function(e,t,i){return F(this.context).on(e,this.selector,t,i),this},die:function(e,t){return F(this.context).off(e,this.selector||"**",t),this},delegate:function(e,t,i,n){return this.on(t,e,i,n)},undelegate:function(e,t,i){return 1==arguments.length?this.off(e,"**"):this.off(t,e,i)},trigger:function(e,t){return this.each(function(){F.event.trigger(e,t,this)})},triggerHandler:function(e,t){return this[0]?F.event.trigger(e,t,this[0],!0):void 0},toggle:function(e){var t=arguments,i=e.guid||F.guid++,n=0,o=function(i){var o=(F._data(this,"lastToggle"+e.guid)||0)%n;return F._data(this,"lastToggle"+e.guid,o+1),i.preventDefault(),t[o].apply(this,arguments)||!1};for(o.guid=i;n<t.length;)t[n++].guid=i;return this.click(o)},hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),F.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(e,t){F.fn[t]=function(e,i){return null==i&&(i=e,e=null),arguments.length>0?this.on(t,null,e,i):this.trigger(t)},F.attrFn&&(F.attrFn[t]=!0),tt.test(t)&&(F.event.fixHooks[t]=F.event.keyHooks),it.test(t)&&(F.event.fixHooks[t]=F.event.mouseHooks)}),function(){function e(e,t,i,n,r,s){for(var a=0,l=n.length;l>a;a++){var c=n[a];if(c){var u=!1;for(c=c[e];c;){if(c[o]===i){u=n[c.sizset];break}if(1!==c.nodeType||s||(c[o]=i,c.sizset=a),c.nodeName.toLowerCase()===t){u=c;break}c=c[e]}n[a]=u}}}function i(e,t,i,n,r,s){for(var a=0,l=n.length;l>a;a++){var c=n[a];if(c){var u=!1;for(c=c[e];c;){if(c[o]===i){u=n[c.sizset];break}if(1===c.nodeType)if(s||(c[o]=i,c.sizset=a),"string"!=typeof t){if(c===t){u=!0;break}}else if(h.filter(t,[c]).length>0){u=c;break}c=c[e]}n[a]=u}}}var n=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^\[\]]*\]|['"][^'"]*['"]|[^\[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g,o="sizcache"+(Math.random()+"").replace(".",""),r=0,s=Object.prototype.toString,a=!1,l=!0,c=/\\/g,u=/\r\n/g,d=/\W/;[0,0].sort(function(){return l=!1,0});var h=function(e,t,i,o){i=i||[],t=t||N;var r=t;if(1!==t.nodeType&&9!==t.nodeType)return[];if(!e||"string"!=typeof e)return i;var a,l,c,u,d,f,g,v,b=!0,w=h.isXML(t),_=[],k=e;do if(n.exec(""),a=n.exec(k),a&&(k=a[3],_.push(a[1]),a[2])){u=a[3];break}while(a);if(_.length>1&&m.exec(e))if(2===_.length&&p.relative[_[0]])l=x(_[0]+_[1],t,o);else for(l=p.relative[_[0]]?[t]:h(_.shift(),t);_.length;)e=_.shift(),p.relative[e]&&(e+=_.shift()),l=x(e,l,o);else if(!o&&_.length>1&&9===t.nodeType&&!w&&p.match.ID.test(_[0])&&!p.match.ID.test(_[_.length-1])&&(d=h.find(_.shift(),t,w),t=d.expr?h.filter(d.expr,d.set)[0]:d.set[0]),t)for(d=o?{expr:_.pop(),set:y(o)}:h.find(_.pop(),1!==_.length||"~"!==_[0]&&"+"!==_[0]||!t.parentNode?t:t.parentNode,w),l=d.expr?h.filter(d.expr,d.set):d.set,_.length>0?c=y(l):b=!1;_.length;)f=_.pop(),g=f,p.relative[f]?g=_.pop():f="",null==g&&(g=t),p.relative[f](c,g,w);else c=_=[];if(c||(c=l),c||h.error(f||e),"[object Array]"===s.call(c))if(b)if(t&&1===t.nodeType)for(v=0;null!=c[v];v++)c[v]&&(c[v]===!0||1===c[v].nodeType&&h.contains(t,c[v]))&&i.push(l[v]);else for(v=0;null!=c[v];v++)c[v]&&1===c[v].nodeType&&i.push(l[v]);else i.push.apply(i,c);else y(c,i);return u&&(h(u,r,i,o),h.uniqueSort(i)),i};h.uniqueSort=function(e){if(w&&(a=l,e.sort(w),a))for(var t=1;t<e.length;t++)e[t]===e[t-1]&&e.splice(t--,1);return e},h.matches=function(e,t){return h(e,null,null,t)},h.matchesSelector=function(e,t){return h(t,null,null,[e]).length>0},h.find=function(e,t,i){var n,o,r,s,a,l;if(!e)return[];for(o=0,r=p.order.length;r>o;o++)if(a=p.order[o],(s=p.leftMatch[a].exec(e))&&(l=s[1],s.splice(1,1),"\\"!==l.substr(l.length-1)&&(s[1]=(s[1]||"").replace(c,""),n=p.find[a](s,t,i),null!=n))){e=e.replace(p.match[a],"");break}return n||(n="undefined"!=typeof t.getElementsByTagName?t.getElementsByTagName("*"):[]),{set:n,expr:e}},h.filter=function(e,i,n,o){for(var r,s,a,l,c,u,d,f,m,g=e,v=[],y=i,b=i&&i[0]&&h.isXML(i[0]);e&&i.length;){for(a in p.filter)if(null!=(r=p.leftMatch[a].exec(e))&&r[2]){if(u=p.filter[a],d=r[1],s=!1,r.splice(1,1),"\\"===d.substr(d.length-1))continue;if(y===v&&(v=[]),p.preFilter[a])if(r=p.preFilter[a](r,y,n,v,o,b)){if(r===!0)continue}else s=l=!0;if(r)for(f=0;null!=(c=y[f]);f++)c&&(l=u(c,r,f,y),m=o^l,n&&null!=l?m?s=!0:y[f]=!1:m&&(v.push(c),s=!0));if(l!==t){if(n||(y=v),e=e.replace(p.match[a],""),!s)return[];break}}if(e===g){if(null!=s)break;h.error(e)}g=e}return y},h.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)};var f=h.getText=function(e){var t,i,n=e.nodeType,o="";if(n){if(1===n||9===n){if("string"==typeof e.textContent)return e.textContent;if("string"==typeof e.innerText)return e.innerText.replace(u,"");for(e=e.firstChild;e;e=e.nextSibling)o+=f(e)}else if(3===n||4===n)return e.nodeValue}else for(t=0;i=e[t];t++)8!==i.nodeType&&(o+=f(i));return o},p=h.selectors={order:["ID","NAME","TAG"],match:{ID:/#((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,CLASS:/\.((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,NAME:/\[name=['"]*((?:[\w\u00c0-\uFFFF\-]|\\.)+)['"]*\]/,ATTR:/\[\s*((?:[\w\u00c0-\uFFFF\-]|\\.)+)\s*(?:(\S?=)\s*(?:(['"])(.*?)\3|(#?(?:[\w\u00c0-\uFFFF\-]|\\.)*)|)|)\s*\]/,TAG:/^((?:[\w\u00c0-\uFFFF\*\-]|\\.)+)/,CHILD:/:(only|nth|last|first)-child(?:\(\s*(even|odd|(?:[+\-]?\d+|(?:[+\-]?\d*)?n\s*(?:[+\-]\s*\d+)?))\s*\))?/,POS:/:(nth|eq|gt|lt|first|last|even|odd)(?:\((\d*)\))?(?=[^\-]|$)/,PSEUDO:/:((?:[\w\u00c0-\uFFFF\-]|\\.)+)(?:\((['"]?)((?:\([^\)]+\)|[^\(\)]*)+)\2\))?/},leftMatch:{},attrMap:{"class":"className","for":"htmlFor"},attrHandle:{href:function(e){return e.getAttribute("href")},type:function(e){return e.getAttribute("type")}},relative:{"+":function(e,t){var i="string"==typeof t,n=i&&!d.test(t),o=i&&!n;n&&(t=t.toLowerCase());for(var r,s=0,a=e.length;a>s;s++)if(r=e[s]){for(;(r=r.previousSibling)&&1!==r.nodeType;);e[s]=o||r&&r.nodeName.toLowerCase()===t?r||!1:r===t}o&&h.filter(t,e,!0)},">":function(e,t){var i,n="string"==typeof t,o=0,r=e.length;if(n&&!d.test(t)){for(t=t.toLowerCase();r>o;o++)if(i=e[o]){var s=i.parentNode;e[o]=s.nodeName.toLowerCase()===t?s:!1}}else{for(;r>o;o++)i=e[o],i&&(e[o]=n?i.parentNode:i.parentNode===t);n&&h.filter(t,e,!0)}},"":function(t,n,o){var s,a=r++,l=i;"string"!=typeof n||d.test(n)||(n=n.toLowerCase(),s=n,l=e),l("parentNode",n,a,t,s,o)},"~":function(t,n,o){var s,a=r++,l=i;"string"!=typeof n||d.test(n)||(n=n.toLowerCase(),s=n,l=e),l("previousSibling",n,a,t,s,o)}},find:{ID:function(e,t,i){if("undefined"!=typeof t.getElementById&&!i){var n=t.getElementById(e[1]);return n&&n.parentNode?[n]:[]}},NAME:function(e,t){if("undefined"!=typeof t.getElementsByName){for(var i=[],n=t.getElementsByName(e[1]),o=0,r=n.length;r>o;o++)n[o].getAttribute("name")===e[1]&&i.push(n[o]);return 0===i.length?null:i}},TAG:function(e,t){return"undefined"!=typeof t.getElementsByTagName?t.getElementsByTagName(e[1]):void 0}},preFilter:{CLASS:function(e,t,i,n,o,r){if(e=" "+e[1].replace(c,"")+" ",r)return e;for(var s,a=0;null!=(s=t[a]);a++)s&&(o^(s.className&&(" "+s.className+" ").replace(/[\t\n\r]/g," ").indexOf(e)>=0)?i||n.push(s):i&&(t[a]=!1));return!1},ID:function(e){return e[1].replace(c,"")},TAG:function(e){return e[1].replace(c,"").toLowerCase()},CHILD:function(e){if("nth"===e[1]){e[2]||h.error(e[0]),e[2]=e[2].replace(/^\+|\s*/g,"");var t=/(-?)(\d*)(?:n([+\-]?\d*))?/.exec("even"===e[2]&&"2n"||"odd"===e[2]&&"2n+1"||!/\D/.test(e[2])&&"0n+"+e[2]||e[2]);e[2]=t[1]+(t[2]||1)-0,e[3]=t[3]-0}else e[2]&&h.error(e[0]);return e[0]=r++,e},ATTR:function(e,t,i,n,o,r){var s=e[1]=e[1].replace(c,"");return!r&&p.attrMap[s]&&(e[1]=p.attrMap[s]),e[4]=(e[4]||e[5]||"").replace(c,""),"~="===e[2]&&(e[4]=" "+e[4]+" "),e},PSEUDO:function(e,t,i,o,r){if("not"===e[1]){if(!((n.exec(e[3])||"").length>1||/^\w/.test(e[3]))){var s=h.filter(e[3],t,i,!0^r);return i||o.push.apply(o,s),!1}e[3]=h(e[3],null,null,t)}else if(p.match.POS.test(e[0])||p.match.CHILD.test(e[0]))return!0;return e},POS:function(e){return e.unshift(!0),e}},filters:{enabled:function(e){return e.disabled===!1&&"hidden"!==e.type},disabled:function(e){return e.disabled===!0},checked:function(e){return e.checked===!0},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,e.selected===!0},parent:function(e){return!!e.firstChild},empty:function(e){return!e.firstChild},has:function(e,t,i){return!!h(i[3],e).length},header:function(e){return/h\d/i.test(e.nodeName)},text:function(e){var t=e.getAttribute("type"),i=e.type;return"input"===e.nodeName.toLowerCase()&&"text"===i&&(t===i||null===t)},radio:function(e){return"input"===e.nodeName.toLowerCase()&&"radio"===e.type},checkbox:function(e){return"input"===e.nodeName.toLowerCase()&&"checkbox"===e.type},file:function(e){return"input"===e.nodeName.toLowerCase()&&"file"===e.type},password:function(e){return"input"===e.nodeName.toLowerCase()&&"password"===e.type},submit:function(e){var t=e.nodeName.toLowerCase();return("input"===t||"button"===t)&&"submit"===e.type},image:function(e){return"input"===e.nodeName.toLowerCase()&&"image"===e.type},reset:function(e){var t=e.nodeName.toLowerCase();return("input"===t||"button"===t)&&"reset"===e.type},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},input:function(e){return/input|select|textarea|button/i.test(e.nodeName)},focus:function(e){return e===e.ownerDocument.activeElement}},setFilters:{first:function(e,t){return 0===t},last:function(e,t,i,n){return t===n.length-1},even:function(e,t){return t%2===0},odd:function(e,t){return t%2===1},lt:function(e,t,i){return t<i[3]-0},gt:function(e,t,i){return t>i[3]-0},nth:function(e,t,i){return i[3]-0===t},eq:function(e,t,i){return i[3]-0===t}},filter:{PSEUDO:function(e,t,i,n){var o=t[1],r=p.filters[o];if(r)return r(e,i,t,n);if("contains"===o)return(e.textContent||e.innerText||f([e])||"").indexOf(t[3])>=0;if("not"===o){for(var s=t[3],a=0,l=s.length;l>a;a++)if(s[a]===e)return!1;return!0}h.error(o)},CHILD:function(e,t){var i,n,r,s,a,l,c=t[1],u=e;switch(c){case"only":case"first":for(;u=u.previousSibling;)if(1===u.nodeType)return!1;if("first"===c)return!0;u=e;case"last":for(;u=u.nextSibling;)if(1===u.nodeType)return!1;return!0;case"nth":if(i=t[2],n=t[3],1===i&&0===n)return!0;if(r=t[0],s=e.parentNode,s&&(s[o]!==r||!e.nodeIndex)){for(a=0,u=s.firstChild;u;u=u.nextSibling)1===u.nodeType&&(u.nodeIndex=++a);s[o]=r}return l=e.nodeIndex-n,0===i?0===l:l%i===0&&l/i>=0}},ID:function(e,t){return 1===e.nodeType&&e.getAttribute("id")===t},TAG:function(e,t){return"*"===t&&1===e.nodeType||!!e.nodeName&&e.nodeName.toLowerCase()===t},CLASS:function(e,t){return(" "+(e.className||e.getAttribute("class"))+" ").indexOf(t)>-1},ATTR:function(e,t){var i=t[1],n=h.attr?h.attr(e,i):p.attrHandle[i]?p.attrHandle[i](e):null!=e[i]?e[i]:e.getAttribute(i),o=n+"",r=t[2],s=t[4];return null==n?"!="===r:!r&&h.attr?null!=n:"="===r?o===s:"*="===r?o.indexOf(s)>=0:"~="===r?(" "+o+" ").indexOf(s)>=0:s?"!="===r?o!==s:"^="===r?0===o.indexOf(s):"$="===r?o.substr(o.length-s.length)===s:"|="===r?o===s||o.substr(0,s.length+1)===s+"-":!1:o&&n!==!1},POS:function(e,t,i,n){var o=t[2],r=p.setFilters[o];return r?r(e,i,t,n):void 0}}},m=p.match.POS,g=function(e,t){return"\\"+(t-0+1)};for(var v in p.match)p.match[v]=new RegExp(p.match[v].source+/(?![^\[]*\])(?![^\(]*\))/.source),p.leftMatch[v]=new RegExp(/(^(?:.|\r|\n)*?)/.source+p.match[v].source.replace(/\\(\d+)/g,g));var y=function(e,t){return e=Array.prototype.slice.call(e,0),t?(t.push.apply(t,e),t):e};try{Array.prototype.slice.call(N.documentElement.childNodes,0)[0].nodeType}catch(b){y=function(e,t){var i=0,n=t||[];if("[object Array]"===s.call(e))Array.prototype.push.apply(n,e);else if("number"==typeof e.length)for(var o=e.length;o>i;i++)n.push(e[i]);else for(;e[i];i++)n.push(e[i]);return n}}var w,_;N.documentElement.compareDocumentPosition?w=function(e,t){return e===t?(a=!0,0):e.compareDocumentPosition&&t.compareDocumentPosition?4&e.compareDocumentPosition(t)?-1:1:e.compareDocumentPosition?-1:1}:(w=function(e,t){if(e===t)return a=!0,0;if(e.sourceIndex&&t.sourceIndex)return e.sourceIndex-t.sourceIndex;var i,n,o=[],r=[],s=e.parentNode,l=t.parentNode,c=s;if(s===l)return _(e,t);if(!s)return-1;if(!l)return 1;for(;c;)o.unshift(c),c=c.parentNode;for(c=l;c;)r.unshift(c),c=c.parentNode;i=o.length,n=r.length;for(var u=0;i>u&&n>u;u++)if(o[u]!==r[u])return _(o[u],r[u]);return u===i?_(e,r[u],-1):_(o[u],t,1)},_=function(e,t,i){if(e===t)return i;for(var n=e.nextSibling;n;){if(n===t)return-1;n=n.nextSibling}return 1}),function(){var e=N.createElement("div"),i="script"+(new Date).getTime(),n=N.documentElement;e.innerHTML="<a name='"+i+"'/>",n.insertBefore(e,n.firstChild),N.getElementById(i)&&(p.find.ID=function(e,i,n){if("undefined"!=typeof i.getElementById&&!n){var o=i.getElementById(e[1]);return o?o.id===e[1]||"undefined"!=typeof o.getAttributeNode&&o.getAttributeNode("id").nodeValue===e[1]?[o]:t:[]}},p.filter.ID=function(e,t){var i="undefined"!=typeof e.getAttributeNode&&e.getAttributeNode("id");return 1===e.nodeType&&i&&i.nodeValue===t}),n.removeChild(e),n=e=null}(),function(){var e=N.createElement("div");e.appendChild(N.createComment("")),e.getElementsByTagName("*").length>0&&(p.find.TAG=function(e,t){var i=t.getElementsByTagName(e[1]);if("*"===e[1]){for(var n=[],o=0;i[o];o++)1===i[o].nodeType&&n.push(i[o]);i=n}return i}),e.innerHTML="<a href='#'></a>",e.firstChild&&"undefined"!=typeof e.firstChild.getAttribute&&"#"!==e.firstChild.getAttribute("href")&&(p.attrHandle.href=function(e){return e.getAttribute("href",2)}),e=null}(),N.querySelectorAll&&!function(){var e=h,t=N.createElement("div"),i="__sizzle__";if(t.innerHTML="<p class='TEST'></p>",!t.querySelectorAll||0!==t.querySelectorAll(".TEST").length){h=function(t,n,o,r){if(n=n||N,!r&&!h.isXML(n)){var s=/^(\w+$)|^\.([\w\-]+$)|^#([\w\-]+$)/.exec(t);if(s&&(1===n.nodeType||9===n.nodeType)){if(s[1])return y(n.getElementsByTagName(t),o);if(s[2]&&p.find.CLASS&&n.getElementsByClassName)return y(n.getElementsByClassName(s[2]),o)
}if(9===n.nodeType){if("body"===t&&n.body)return y([n.body],o);if(s&&s[3]){var a=n.getElementById(s[3]);if(!a||!a.parentNode)return y([],o);if(a.id===s[3])return y([a],o)}try{return y(n.querySelectorAll(t),o)}catch(l){}}else if(1===n.nodeType&&"object"!==n.nodeName.toLowerCase()){var c=n,u=n.getAttribute("id"),d=u||i,f=n.parentNode,m=/^\s*[+~]/.test(t);u?d=d.replace(/'/g,"\\$&"):n.setAttribute("id",d),m&&f&&(n=n.parentNode);try{if(!m||f)return y(n.querySelectorAll("[id='"+d+"'] "+t),o)}catch(g){}finally{u||c.removeAttribute("id")}}}return e(t,n,o,r)};for(var n in e)h[n]=e[n];t=null}}(),function(){var e=N.documentElement,t=e.matchesSelector||e.mozMatchesSelector||e.webkitMatchesSelector||e.msMatchesSelector;if(t){var i=!t.call(N.createElement("div"),"div"),n=!1;try{t.call(N.documentElement,"[test!='']:sizzle")}catch(o){n=!0}h.matchesSelector=function(e,o){if(o=o.replace(/\=\s*([^'"\]]*)\s*\]/g,"='$1']"),!h.isXML(e))try{if(n||!p.match.PSEUDO.test(o)&&!/!=/.test(o)){var r=t.call(e,o);if(r||!i||e.document&&11!==e.document.nodeType)return r}}catch(s){}return h(o,null,null,[e]).length>0}}}(),function(){var e=N.createElement("div");e.innerHTML="<div class='test e'></div><div class='test'></div>",e.getElementsByClassName&&0!==e.getElementsByClassName("e").length&&(e.lastChild.className="e",1!==e.getElementsByClassName("e").length&&(p.order.splice(1,0,"CLASS"),p.find.CLASS=function(e,t,i){return"undefined"==typeof t.getElementsByClassName||i?void 0:t.getElementsByClassName(e[1])},e=null))}(),h.contains=N.documentElement.contains?function(e,t){return e!==t&&(e.contains?e.contains(t):!0)}:N.documentElement.compareDocumentPosition?function(e,t){return!!(16&e.compareDocumentPosition(t))}:function(){return!1},h.isXML=function(e){var t=(e?e.ownerDocument||e:0).documentElement;return t?"HTML"!==t.nodeName:!1};var x=function(e,t,i){for(var n,o=[],r="",s=t.nodeType?[t]:t;n=p.match.PSEUDO.exec(e);)r+=n[0],e=e.replace(p.match.PSEUDO,"");e=p.relative[e]?e+"*":e;for(var a=0,l=s.length;l>a;a++)h(e,s[a],o,i);return h.filter(r,o)};h.attr=F.attr,h.selectors.attrMap={},F.find=h,F.expr=h.selectors,F.expr[":"]=F.expr.filters,F.unique=h.uniqueSort,F.text=h.getText,F.isXMLDoc=h.isXML,F.contains=h.contains}();var lt=/Until$/,ct=/^(?:parents|prevUntil|prevAll)/,ut=/,/,dt=/^.[^:#\[\.,]*$/,ht=Array.prototype.slice,ft=F.expr.match.POS,pt={children:!0,contents:!0,next:!0,prev:!0};F.fn.extend({find:function(e){var t,i,n=this;if("string"!=typeof e)return F(e).filter(function(){for(t=0,i=n.length;i>t;t++)if(F.contains(n[t],this))return!0});var o,r,s,a=this.pushStack("","find",e);for(t=0,i=this.length;i>t;t++)if(o=a.length,F.find(e,this[t],a),t>0)for(r=o;r<a.length;r++)for(s=0;o>s;s++)if(a[s]===a[r]){a.splice(r--,1);break}return a},has:function(e){var t=F(e);return this.filter(function(){for(var e=0,i=t.length;i>e;e++)if(F.contains(this,t[e]))return!0})},not:function(e){return this.pushStack(c(this,e,!1),"not",e)},filter:function(e){return this.pushStack(c(this,e,!0),"filter",e)},is:function(e){return!!e&&("string"==typeof e?ft.test(e)?F(e,this.context).index(this[0])>=0:F.filter(e,this).length>0:this.filter(e).length>0)},closest:function(e,t){var i,n,o=[],r=this[0];if(F.isArray(e)){for(var s=1;r&&r.ownerDocument&&r!==t;){for(i=0;i<e.length;i++)F(r).is(e[i])&&o.push({selector:e[i],elem:r,level:s});r=r.parentNode,s++}return o}var a=ft.test(e)||"string"!=typeof e?F(e,t||this.context):0;for(i=0,n=this.length;n>i;i++)for(r=this[i];r;){if(a?a.index(r)>-1:F.find.matchesSelector(r,e)){o.push(r);break}if(r=r.parentNode,!r||!r.ownerDocument||r===t||11===r.nodeType)break}return o=o.length>1?F.unique(o):o,this.pushStack(o,"closest",e)},index:function(e){return e?"string"==typeof e?F.inArray(this[0],F(e)):F.inArray(e.jquery?e[0]:e,this):this[0]&&this[0].parentNode?this.prevAll().length:-1},add:function(e,t){var i="string"==typeof e?F(e,t):F.makeArray(e&&e.nodeType?[e]:e),n=F.merge(this.get(),i);return this.pushStack(l(i[0])||l(n[0])?n:F.unique(n))},andSelf:function(){return this.add(this.prevObject)}}),F.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return F.dir(e,"parentNode")},parentsUntil:function(e,t,i){return F.dir(e,"parentNode",i)},next:function(e){return F.nth(e,2,"nextSibling")},prev:function(e){return F.nth(e,2,"previousSibling")},nextAll:function(e){return F.dir(e,"nextSibling")},prevAll:function(e){return F.dir(e,"previousSibling")},nextUntil:function(e,t,i){return F.dir(e,"nextSibling",i)},prevUntil:function(e,t,i){return F.dir(e,"previousSibling",i)},siblings:function(e){return F.sibling(e.parentNode.firstChild,e)},children:function(e){return F.sibling(e.firstChild)},contents:function(e){return F.nodeName(e,"iframe")?e.contentDocument||e.contentWindow.document:F.makeArray(e.childNodes)}},function(e,t){F.fn[e]=function(i,n){var o=F.map(this,t,i);return lt.test(e)||(n=i),n&&"string"==typeof n&&(o=F.filter(n,o)),o=this.length>1&&!pt[e]?F.unique(o):o,(this.length>1||ut.test(n))&&ct.test(e)&&(o=o.reverse()),this.pushStack(o,e,ht.call(arguments).join(","))}}),F.extend({filter:function(e,t,i){return i&&(e=":not("+e+")"),1===t.length?F.find.matchesSelector(t[0],e)?[t[0]]:[]:F.find.matches(e,t)},dir:function(e,i,n){for(var o=[],r=e[i];r&&9!==r.nodeType&&(n===t||1!==r.nodeType||!F(r).is(n));)1===r.nodeType&&o.push(r),r=r[i];return o},nth:function(e,t,i){t=t||1;for(var n=0;e&&(1!==e.nodeType||++n!==t);e=e[i]);return e},sibling:function(e,t){for(var i=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&i.push(e);return i}});var mt="abbr|article|aside|audio|canvas|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",gt=/ jQuery\d+="(?:\d+|null)"/g,vt=/^\s+/,yt=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,bt=/<([\w:]+)/,wt=/<tbody/i,_t=/<|&#?\w+;/,xt=/<(?:script|style)/i,kt=/<(?:script|object|embed|option|style)/i,$t=new RegExp("<(?:"+mt+")","i"),Ct=/checked\s*(?:[^=]|=\s*.checked.)/i,jt=/\/(java|ecma)script/i,St=/^\s*<!(?:\[CDATA\[|\-\-)/,Tt={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],area:[1,"<map>","</map>"],_default:[0,"",""]},At=u(N);Tt.optgroup=Tt.option,Tt.tbody=Tt.tfoot=Tt.colgroup=Tt.caption=Tt.thead,Tt.th=Tt.td,F.support.htmlSerialize||(Tt._default=[1,"div<div>","</div>"]),F.fn.extend({text:function(e){return F.isFunction(e)?this.each(function(t){var i=F(this);i.text(e.call(this,t,i.text()))}):"object"!=typeof e&&e!==t?this.empty().append((this[0]&&this[0].ownerDocument||N).createTextNode(e)):F.text(this)},wrapAll:function(e){if(F.isFunction(e))return this.each(function(t){F(this).wrapAll(e.call(this,t))});if(this[0]){var t=F(e,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){for(var e=this;e.firstChild&&1===e.firstChild.nodeType;)e=e.firstChild;return e}).append(this)}return this},wrapInner:function(e){return this.each(F.isFunction(e)?function(t){F(this).wrapInner(e.call(this,t))}:function(){var t=F(this),i=t.contents();i.length?i.wrapAll(e):t.append(e)})},wrap:function(e){var t=F.isFunction(e);return this.each(function(i){F(this).wrapAll(t?e.call(this,i):e)})},unwrap:function(){return this.parent().each(function(){F.nodeName(this,"body")||F(this).replaceWith(this.childNodes)}).end()},append:function(){return this.domManip(arguments,!0,function(e){1===this.nodeType&&this.appendChild(e)})},prepend:function(){return this.domManip(arguments,!0,function(e){1===this.nodeType&&this.insertBefore(e,this.firstChild)})},before:function(){if(this[0]&&this[0].parentNode)return this.domManip(arguments,!1,function(e){this.parentNode.insertBefore(e,this)});if(arguments.length){var e=F.clean(arguments);return e.push.apply(e,this.toArray()),this.pushStack(e,"before",arguments)}},after:function(){if(this[0]&&this[0].parentNode)return this.domManip(arguments,!1,function(e){this.parentNode.insertBefore(e,this.nextSibling)});if(arguments.length){var e=this.pushStack(this,"after",arguments);return e.push.apply(e,F.clean(arguments)),e}},remove:function(e,t){for(var i,n=0;null!=(i=this[n]);n++)(!e||F.filter(e,[i]).length)&&(t||1!==i.nodeType||(F.cleanData(i.getElementsByTagName("*")),F.cleanData([i])),i.parentNode&&i.parentNode.removeChild(i));return this},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)for(1===e.nodeType&&F.cleanData(e.getElementsByTagName("*"));e.firstChild;)e.removeChild(e.firstChild);return this},clone:function(e,t){return e=null==e?!1:e,t=null==t?e:t,this.map(function(){return F.clone(this,e,t)})},html:function(e){if(e===t)return this[0]&&1===this[0].nodeType?this[0].innerHTML.replace(gt,""):null;if("string"!=typeof e||xt.test(e)||!F.support.leadingWhitespace&&vt.test(e)||Tt[(bt.exec(e)||["",""])[1].toLowerCase()])F.isFunction(e)?this.each(function(t){var i=F(this);i.html(e.call(this,t,i.html()))}):this.empty().append(e);else{e=e.replace(yt,"<$1></$2>");try{for(var i=0,n=this.length;n>i;i++)1===this[i].nodeType&&(F.cleanData(this[i].getElementsByTagName("*")),this[i].innerHTML=e)}catch(o){this.empty().append(e)}}return this},replaceWith:function(e){return this[0]&&this[0].parentNode?F.isFunction(e)?this.each(function(t){var i=F(this),n=i.html();i.replaceWith(e.call(this,t,n))}):("string"!=typeof e&&(e=F(e).detach()),this.each(function(){var t=this.nextSibling,i=this.parentNode;F(this).remove(),t?F(t).before(e):F(i).append(e)})):this.length?this.pushStack(F(F.isFunction(e)?e():e),"replaceWith",e):this},detach:function(e){return this.remove(e,!0)},domManip:function(e,i,n){var o,r,s,a,l=e[0],c=[];if(!F.support.checkClone&&3===arguments.length&&"string"==typeof l&&Ct.test(l))return this.each(function(){F(this).domManip(e,i,n,!0)});if(F.isFunction(l))return this.each(function(o){var r=F(this);e[0]=l.call(this,o,i?r.html():t),r.domManip(e,i,n)});if(this[0]){if(a=l&&l.parentNode,o=F.support.parentNode&&a&&11===a.nodeType&&a.childNodes.length===this.length?{fragment:a}:F.buildFragment(e,this,c),s=o.fragment,r=1===s.childNodes.length?s=s.firstChild:s.firstChild){i=i&&F.nodeName(r,"tr");for(var u=0,h=this.length,f=h-1;h>u;u++)n.call(i?d(this[u],r):this[u],o.cacheable||h>1&&f>u?F.clone(s,!0,!0):s)}c.length&&F.each(c,y)}return this}}),F.buildFragment=function(e,t,i){var n,o,r,s,a=e[0];return t&&t[0]&&(s=t[0].ownerDocument||t[0]),s.createDocumentFragment||(s=N),!(1===e.length&&"string"==typeof a&&a.length<512&&s===N&&"<"===a.charAt(0))||kt.test(a)||!F.support.checkClone&&Ct.test(a)||!F.support.html5Clone&&$t.test(a)||(o=!0,r=F.fragments[a],r&&1!==r&&(n=r)),n||(n=s.createDocumentFragment(),F.clean(e,s,n,i)),o&&(F.fragments[a]=r?n:1),{fragment:n,cacheable:o}},F.fragments={},F.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){F.fn[e]=function(i){var n=[],o=F(i),r=1===this.length&&this[0].parentNode;if(r&&11===r.nodeType&&1===r.childNodes.length&&1===o.length)return o[t](this[0]),this;for(var s=0,a=o.length;a>s;s++){var l=(s>0?this.clone(!0):this).get();F(o[s])[t](l),n=n.concat(l)}return this.pushStack(n,e,o.selector)}}),F.extend({clone:function(e,t,i){var n,o,r,s=F.support.html5Clone||!$t.test("<"+e.nodeName)?e.cloneNode(!0):v(e);if(!(F.support.noCloneEvent&&F.support.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||F.isXMLDoc(e)))for(f(e,s),n=p(e),o=p(s),r=0;n[r];++r)o[r]&&f(n[r],o[r]);if(t&&(h(e,s),i))for(n=p(e),o=p(s),r=0;n[r];++r)h(n[r],o[r]);return n=o=null,s},clean:function(e,t,i,n){var o;t=t||N,"undefined"==typeof t.createElement&&(t=t.ownerDocument||t[0]&&t[0].ownerDocument||N);for(var r,s,a=[],l=0;null!=(s=e[l]);l++)if("number"==typeof s&&(s+=""),s){if("string"==typeof s)if(_t.test(s)){s=s.replace(yt,"<$1></$2>");var c=(bt.exec(s)||["",""])[1].toLowerCase(),d=Tt[c]||Tt._default,h=d[0],f=t.createElement("div");for(t===N?At.appendChild(f):u(t).appendChild(f),f.innerHTML=d[1]+s+d[2];h--;)f=f.lastChild;if(!F.support.tbody){var p=wt.test(s),m="table"!==c||p?"<table>"!==d[1]||p?[]:f.childNodes:f.firstChild&&f.firstChild.childNodes;for(r=m.length-1;r>=0;--r)F.nodeName(m[r],"tbody")&&!m[r].childNodes.length&&m[r].parentNode.removeChild(m[r])}!F.support.leadingWhitespace&&vt.test(s)&&f.insertBefore(t.createTextNode(vt.exec(s)[0]),f.firstChild),s=f.childNodes}else s=t.createTextNode(s);var v;if(!F.support.appendChecked)if(s[0]&&"number"==typeof(v=s.length))for(r=0;v>r;r++)g(s[r]);else g(s);s.nodeType?a.push(s):a=F.merge(a,s)}if(i)for(o=function(e){return!e.type||jt.test(e.type)},l=0;a[l];l++)if(!n||!F.nodeName(a[l],"script")||a[l].type&&"text/javascript"!==a[l].type.toLowerCase()){if(1===a[l].nodeType){var y=F.grep(a[l].getElementsByTagName("script"),o);a.splice.apply(a,[l+1,0].concat(y))}i.appendChild(a[l])}else n.push(a[l].parentNode?a[l].parentNode.removeChild(a[l]):a[l]);return a},cleanData:function(e){for(var t,i,n,o=F.cache,r=F.event.special,s=F.support.deleteExpando,a=0;null!=(n=e[a]);a++)if((!n.nodeName||!F.noData[n.nodeName.toLowerCase()])&&(i=n[F.expando])){if(t=o[i],t&&t.events){for(var l in t.events)r[l]?F.event.remove(n,l):F.removeEvent(n,l,t.handle);t.handle&&(t.handle.elem=null)}s?delete n[F.expando]:n.removeAttribute&&n.removeAttribute(F.expando),delete o[i]}}});var It,Et,Pt,Nt=/alpha\([^)]*\)/i,Dt=/opacity=([^)]*)/,Ot=/([A-Z]|^ms)/g,Ft=/^-?\d+(?:px)?$/i,qt=/^-?\d/,Rt=/^([\-+])=([\-+.\de]+)/,Ht={position:"absolute",visibility:"hidden",display:"block"},Lt=["Left","Right"],Mt=["Top","Bottom"];F.fn.css=function(e,i){return 2===arguments.length&&i===t?this:F.access(this,e,i,!0,function(e,i,n){return n!==t?F.style(e,i,n):F.css(e,i)})},F.extend({cssHooks:{opacity:{get:function(e,t){if(t){var i=It(e,"opacity","opacity");return""===i?"1":i}return e.style.opacity}}},cssNumber:{fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":F.support.cssFloat?"cssFloat":"styleFloat"},style:function(e,i,n,o){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var r,s,a=F.camelCase(i),l=e.style,c=F.cssHooks[a];if(i=F.cssProps[a]||a,n===t)return c&&"get"in c&&(r=c.get(e,!1,o))!==t?r:l[i];if(s=typeof n,"string"===s&&(r=Rt.exec(n))&&(n=+(r[1]+1)*+r[2]+parseFloat(F.css(e,i)),s="number"),!(null==n||"number"===s&&isNaN(n)||("number"!==s||F.cssNumber[a]||(n+="px"),c&&"set"in c&&(n=c.set(e,n))===t)))try{l[i]=n}catch(u){}}},css:function(e,i,n){var o,r;return i=F.camelCase(i),r=F.cssHooks[i],i=F.cssProps[i]||i,"cssFloat"===i&&(i="float"),r&&"get"in r&&(o=r.get(e,!0,n))!==t?o:It?It(e,i):void 0},swap:function(e,t,i){var n={};for(var o in t)n[o]=e.style[o],e.style[o]=t[o];i.call(e);for(o in t)e.style[o]=n[o]}}),F.curCSS=F.css,F.each(["height","width"],function(e,t){F.cssHooks[t]={get:function(e,i,n){var o;return i?0!==e.offsetWidth?b(e,t,n):(F.swap(e,Ht,function(){o=b(e,t,n)}),o):void 0},set:function(e,t){return Ft.test(t)?(t=parseFloat(t),t>=0?t+"px":void 0):t}}}),F.support.opacity||(F.cssHooks.opacity={get:function(e,t){return Dt.test((t&&e.currentStyle?e.currentStyle.filter:e.style.filter)||"")?parseFloat(RegExp.$1)/100+"":t?"1":""},set:function(e,t){var i=e.style,n=e.currentStyle,o=F.isNumeric(t)?"alpha(opacity="+100*t+")":"",r=n&&n.filter||i.filter||"";i.zoom=1,t>=1&&""===F.trim(r.replace(Nt,""))&&(i.removeAttribute("filter"),n&&!n.filter)||(i.filter=Nt.test(r)?r.replace(Nt,o):r+" "+o)}}),F(function(){F.support.reliableMarginRight||(F.cssHooks.marginRight={get:function(e,t){var i;return F.swap(e,{display:"inline-block"},function(){i=t?It(e,"margin-right","marginRight"):e.style.marginRight}),i}})}),N.defaultView&&N.defaultView.getComputedStyle&&(Et=function(e,t){var i,n,o;return t=t.replace(Ot,"-$1").toLowerCase(),(n=e.ownerDocument.defaultView)&&(o=n.getComputedStyle(e,null))&&(i=o.getPropertyValue(t),""!==i||F.contains(e.ownerDocument.documentElement,e)||(i=F.style(e,t))),i}),N.documentElement.currentStyle&&(Pt=function(e,t){var i,n,o,r=e.currentStyle&&e.currentStyle[t],s=e.style;return null===r&&s&&(o=s[t])&&(r=o),!Ft.test(r)&&qt.test(r)&&(i=s.left,n=e.runtimeStyle&&e.runtimeStyle.left,n&&(e.runtimeStyle.left=e.currentStyle.left),s.left="fontSize"===t?"1em":r||0,r=s.pixelLeft+"px",s.left=i,n&&(e.runtimeStyle.left=n)),""===r?"auto":r}),It=Et||Pt,F.expr&&F.expr.filters&&(F.expr.filters.hidden=function(e){var t=e.offsetWidth,i=e.offsetHeight;return 0===t&&0===i||!F.support.reliableHiddenOffsets&&"none"===(e.style&&e.style.display||F.css(e,"display"))},F.expr.filters.visible=function(e){return!F.expr.filters.hidden(e)});var Wt,Ut,zt=/%20/g,Bt=/\[\]$/,Gt=/\r?\n/g,Xt=/#.*$/,Vt=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,Qt=/^(?:color|date|datetime|datetime-local|email|hidden|month|number|password|range|search|tel|text|time|url|week)$/i,Yt=/^(?:about|app|app\-storage|.+\-extension|file|res|widget):$/,Jt=/^(?:GET|HEAD)$/,Zt=/^\/\//,Kt=/\?/,ei=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,ti=/^(?:select|textarea)/i,ii=/\s+/,ni=/([?&])_=[^&]*/,oi=/^([\w\+\.\-]+:)(?:\/\/([^\/?#:]*)(?::(\d+))?)?/,ri=F.fn.load,si={},ai={},li=["*/"]+["*"];try{Wt=O.href}catch(ci){Wt=N.createElement("a"),Wt.href="",Wt=Wt.href}Ut=oi.exec(Wt.toLowerCase())||[],F.fn.extend({load:function(e,i,n){if("string"!=typeof e&&ri)return ri.apply(this,arguments);if(!this.length)return this;var o=e.indexOf(" ");if(o>=0){var r=e.slice(o,e.length);e=e.slice(0,o)}var s="GET";i&&(F.isFunction(i)?(n=i,i=t):"object"==typeof i&&(i=F.param(i,F.ajaxSettings.traditional),s="POST"));var a=this;return F.ajax({url:e,type:s,dataType:"html",data:i,complete:function(e,t,i){i=e.responseText,e.isResolved()&&(e.done(function(e){i=e}),a.html(r?F("<div>").append(i.replace(ei,"")).find(r):i)),n&&a.each(n,[i,t,e])}}),this},serialize:function(){return F.param(this.serializeArray())},serializeArray:function(){return this.map(function(){return this.elements?F.makeArray(this.elements):this}).filter(function(){return this.name&&!this.disabled&&(this.checked||ti.test(this.nodeName)||Qt.test(this.type))}).map(function(e,t){var i=F(this).val();return null==i?null:F.isArray(i)?F.map(i,function(e){return{name:t.name,value:e.replace(Gt,"\r\n")}}):{name:t.name,value:i.replace(Gt,"\r\n")}}).get()}}),F.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),function(e,t){F.fn[t]=function(e){return this.on(t,e)}}),F.each(["get","post"],function(e,i){F[i]=function(e,n,o,r){return F.isFunction(n)&&(r=r||o,o=n,n=t),F.ajax({type:i,url:e,data:n,success:o,dataType:r})}}),F.extend({getScript:function(e,i){return F.get(e,t,i,"script")},getJSON:function(e,t,i){return F.get(e,t,i,"json")},ajaxSetup:function(e,t){return t?x(e,F.ajaxSettings):(t=e,e=F.ajaxSettings),x(e,t),e},ajaxSettings:{url:Wt,isLocal:Yt.test(Ut[1]),global:!0,type:"GET",contentType:"application/x-www-form-urlencoded",processData:!0,async:!0,accepts:{xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript","*":li},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText"},converters:{"* text":e.String,"text html":!0,"text json":F.parseJSON,"text xml":F.parseXML},flatOptions:{context:!0,url:!0}},ajaxPrefilter:w(si),ajaxTransport:w(ai),ajax:function(e,i){function n(e,i,n,s){if(2!==w){w=2,l&&clearTimeout(l),a=t,r=s||"",x.readyState=e>0?4:0;var c,d,y,b,_,k=i,j=n?$(h,x,n):t;if(e>=200&&300>e||304===e)if(h.ifModified&&((b=x.getResponseHeader("Last-Modified"))&&(F.lastModified[o]=b),(_=x.getResponseHeader("Etag"))&&(F.etag[o]=_)),304===e)k="notmodified",c=!0;else try{d=C(h,j),k="success",c=!0}catch(S){k="parsererror",y=S}else y=k,(!k||e)&&(k="error",0>e&&(e=0));x.status=e,x.statusText=""+(i||k),c?m.resolveWith(f,[d,k,x]):m.rejectWith(f,[x,k,y]),x.statusCode(v),v=t,u&&p.trigger("ajax"+(c?"Success":"Error"),[x,h,c?d:y]),g.fireWith(f,[x,k]),u&&(p.trigger("ajaxComplete",[x,h]),--F.active||F.event.trigger("ajaxStop"))}}"object"==typeof e&&(i=e,e=t),i=i||{};var o,r,s,a,l,c,u,d,h=F.ajaxSetup({},i),f=h.context||h,p=f!==h&&(f.nodeType||f instanceof F)?F(f):F.event,m=F.Deferred(),g=F.Callbacks("once memory"),v=h.statusCode||{},y={},b={},w=0,x={readyState:0,setRequestHeader:function(e,t){if(!w){var i=e.toLowerCase();e=b[i]=b[i]||e,y[e]=t}return this},getAllResponseHeaders:function(){return 2===w?r:null},getResponseHeader:function(e){var i;if(2===w){if(!s)for(s={};i=Vt.exec(r);)s[i[1].toLowerCase()]=i[2];i=s[e.toLowerCase()]}return i===t?null:i},overrideMimeType:function(e){return w||(h.mimeType=e),this},abort:function(e){return e=e||"abort",a&&a.abort(e),n(0,e),this}};if(m.promise(x),x.success=x.done,x.error=x.fail,x.complete=g.add,x.statusCode=function(e){if(e){var t;if(2>w)for(t in e)v[t]=[v[t],e[t]];else t=e[x.status],x.then(t,t)}return this},h.url=((e||h.url)+"").replace(Xt,"").replace(Zt,Ut[1]+"//"),h.dataTypes=F.trim(h.dataType||"*").toLowerCase().split(ii),null==h.crossDomain&&(c=oi.exec(h.url.toLowerCase()),h.crossDomain=!(!c||c[1]==Ut[1]&&c[2]==Ut[2]&&(c[3]||("http:"===c[1]?80:443))==(Ut[3]||("http:"===Ut[1]?80:443)))),h.data&&h.processData&&"string"!=typeof h.data&&(h.data=F.param(h.data,h.traditional)),_(si,h,i,x),2===w)return!1;if(u=h.global,h.type=h.type.toUpperCase(),h.hasContent=!Jt.test(h.type),u&&0===F.active++&&F.event.trigger("ajaxStart"),!h.hasContent&&(h.data&&(h.url+=(Kt.test(h.url)?"&":"?")+h.data,delete h.data),o=h.url,h.cache===!1)){var k=F.now(),j=h.url.replace(ni,"$1_="+k);h.url=j+(j===h.url?(Kt.test(h.url)?"&":"?")+"_="+k:"")}(h.data&&h.hasContent&&h.contentType!==!1||i.contentType)&&x.setRequestHeader("Content-Type",h.contentType),h.ifModified&&(o=o||h.url,F.lastModified[o]&&x.setRequestHeader("If-Modified-Since",F.lastModified[o]),F.etag[o]&&x.setRequestHeader("If-None-Match",F.etag[o])),x.setRequestHeader("Accept",h.dataTypes[0]&&h.accepts[h.dataTypes[0]]?h.accepts[h.dataTypes[0]]+("*"!==h.dataTypes[0]?", "+li+"; q=0.01":""):h.accepts["*"]);for(d in h.headers)x.setRequestHeader(d,h.headers[d]);if(h.beforeSend&&(h.beforeSend.call(f,x,h)===!1||2===w))return x.abort(),!1;for(d in{success:1,error:1,complete:1})x[d](h[d]);if(a=_(ai,h,i,x)){x.readyState=1,u&&p.trigger("ajaxSend",[x,h]),h.async&&h.timeout>0&&(l=setTimeout(function(){x.abort("timeout")},h.timeout));try{w=1,a.send(y,n)}catch(S){if(!(2>w))throw S;n(-1,S)}}else n(-1,"No Transport");return x},param:function(e,i){var n=[],o=function(e,t){t=F.isFunction(t)?t():t,n[n.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};if(i===t&&(i=F.ajaxSettings.traditional),F.isArray(e)||e.jquery&&!F.isPlainObject(e))F.each(e,function(){o(this.name,this.value)});else for(var r in e)k(r,e[r],i,o);return n.join("&").replace(zt,"+")}}),F.extend({active:0,lastModified:{},etag:{}});var ui=F.now(),di=/(\=)\?(&|$)|\?\?/i;F.ajaxSetup({jsonp:"callback",jsonpCallback:function(){return F.expando+"_"+ui++}}),F.ajaxPrefilter("json jsonp",function(t,i,n){var o="application/x-www-form-urlencoded"===t.contentType&&"string"==typeof t.data;if("jsonp"===t.dataTypes[0]||t.jsonp!==!1&&(di.test(t.url)||o&&di.test(t.data))){var r,s=t.jsonpCallback=F.isFunction(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,a=e[s],l=t.url,c=t.data,u="$1"+s+"$2";return t.jsonp!==!1&&(l=l.replace(di,u),t.url===l&&(o&&(c=c.replace(di,u)),t.data===c&&(l+=(/\?/.test(l)?"&":"?")+t.jsonp+"="+s))),t.url=l,t.data=c,e[s]=function(e){r=[e]},n.always(function(){e[s]=a,r&&F.isFunction(a)&&e[s](r[0])}),t.converters["script json"]=function(){return r||F.error(s+" was not called"),r[0]},t.dataTypes[0]="json","script"}}),F.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/javascript|ecmascript/},converters:{"text script":function(e){return F.globalEval(e),e}}}),F.ajaxPrefilter("script",function(e){e.cache===t&&(e.cache=!1),e.crossDomain&&(e.type="GET",e.global=!1)}),F.ajaxTransport("script",function(e){if(e.crossDomain){var i,n=N.head||N.getElementsByTagName("head")[0]||N.documentElement;return{send:function(o,r){i=N.createElement("script"),i.async="async",e.scriptCharset&&(i.charset=e.scriptCharset),i.src=e.url,i.onload=i.onreadystatechange=function(e,o){(o||!i.readyState||/loaded|complete/.test(i.readyState))&&(i.onload=i.onreadystatechange=null,n&&i.parentNode&&n.removeChild(i),i=t,o||r(200,"success"))},n.insertBefore(i,n.firstChild)},abort:function(){i&&i.onload(0,1)}}}});var hi,fi=e.ActiveXObject?function(){for(var e in hi)hi[e](0,1)}:!1,pi=0;F.ajaxSettings.xhr=e.ActiveXObject?function(){return!this.isLocal&&j()||S()}:j,function(e){F.extend(F.support,{ajax:!!e,cors:!!e&&"withCredentials"in e})}(F.ajaxSettings.xhr()),F.support.ajax&&F.ajaxTransport(function(i){if(!i.crossDomain||F.support.cors){var n;return{send:function(o,r){var s,a,l=i.xhr();if(i.username?l.open(i.type,i.url,i.async,i.username,i.password):l.open(i.type,i.url,i.async),i.xhrFields)for(a in i.xhrFields)l[a]=i.xhrFields[a];i.mimeType&&l.overrideMimeType&&l.overrideMimeType(i.mimeType),i.crossDomain||o["X-Requested-With"]||(o["X-Requested-With"]="XMLHttpRequest");try{for(a in o)l.setRequestHeader(a,o[a])}catch(c){}l.send(i.hasContent&&i.data||null),n=function(e,o){var a,c,u,d,h;try{if(n&&(o||4===l.readyState))if(n=t,s&&(l.onreadystatechange=F.noop,fi&&delete hi[s]),o)4!==l.readyState&&l.abort();else{a=l.status,u=l.getAllResponseHeaders(),d={},h=l.responseXML,h&&h.documentElement&&(d.xml=h),d.text=l.responseText;try{c=l.statusText}catch(f){c=""}a||!i.isLocal||i.crossDomain?1223===a&&(a=204):a=d.text?200:404}}catch(p){o||r(-1,p)}d&&r(a,c,d,u)},i.async&&4!==l.readyState?(s=++pi,fi&&(hi||(hi={},F(e).unload(fi)),hi[s]=n),l.onreadystatechange=n):n()},abort:function(){n&&n(0,1)}}}});var mi,gi,vi,yi,bi={},wi=/^(?:toggle|show|hide)$/,_i=/^([+\-]=)?([\d+.\-]+)([a-z%]*)$/i,xi=[["height","marginTop","marginBottom","paddingTop","paddingBottom"],["width","marginLeft","marginRight","paddingLeft","paddingRight"],["opacity"]];F.fn.extend({show:function(e,t,i){var n,o;if(e||0===e)return this.animate(I("show",3),e,t,i);for(var r=0,s=this.length;s>r;r++)n=this[r],n.style&&(o=n.style.display,F._data(n,"olddisplay")||"none"!==o||(o=n.style.display=""),""===o&&"none"===F.css(n,"display")&&F._data(n,"olddisplay",E(n.nodeName)));for(r=0;s>r;r++)n=this[r],n.style&&(o=n.style.display,(""===o||"none"===o)&&(n.style.display=F._data(n,"olddisplay")||""));return this},hide:function(e,t,i){if(e||0===e)return this.animate(I("hide",3),e,t,i);for(var n,o,r=0,s=this.length;s>r;r++)n=this[r],n.style&&(o=F.css(n,"display"),"none"===o||F._data(n,"olddisplay")||F._data(n,"olddisplay",o));for(r=0;s>r;r++)this[r].style&&(this[r].style.display="none");return this},_toggle:F.fn.toggle,toggle:function(e,t,i){var n="boolean"==typeof e;return F.isFunction(e)&&F.isFunction(t)?this._toggle.apply(this,arguments):null==e||n?this.each(function(){var t=n?e:F(this).is(":hidden");F(this)[t?"show":"hide"]()}):this.animate(I("toggle",3),e,t,i),this},fadeTo:function(e,t,i,n){return this.filter(":hidden").css("opacity",0).show().end().animate({opacity:t},e,i,n)},animate:function(e,t,i,n){function o(){r.queue===!1&&F._mark(this);var t,i,n,o,s,a,l,c,u,d=F.extend({},r),h=1===this.nodeType,f=h&&F(this).is(":hidden");d.animatedProperties={};for(n in e){if(t=F.camelCase(n),n!==t&&(e[t]=e[n],delete e[n]),i=e[t],F.isArray(i)?(d.animatedProperties[t]=i[1],i=e[t]=i[0]):d.animatedProperties[t]=d.specialEasing&&d.specialEasing[t]||d.easing||"swing","hide"===i&&f||"show"===i&&!f)return d.complete.call(this);!h||"height"!==t&&"width"!==t||(d.overflow=[this.style.overflow,this.style.overflowX,this.style.overflowY],"inline"===F.css(this,"display")&&"none"===F.css(this,"float")&&(F.support.inlineBlockNeedsLayout&&"inline"!==E(this.nodeName)?this.style.zoom=1:this.style.display="inline-block"))}null!=d.overflow&&(this.style.overflow="hidden");for(n in e)o=new F.fx(this,d,n),i=e[n],wi.test(i)?(u=F._data(this,"toggle"+n)||("toggle"===i?f?"show":"hide":0),u?(F._data(this,"toggle"+n,"show"===u?"hide":"show"),o[u]()):o[i]()):(s=_i.exec(i),a=o.cur(),s?(l=parseFloat(s[2]),c=s[3]||(F.cssNumber[n]?"":"px"),"px"!==c&&(F.style(this,n,(l||1)+c),a=(l||1)/o.cur()*a,F.style(this,n,a+c)),s[1]&&(l=("-="===s[1]?-1:1)*l+a),o.custom(a,l,c)):o.custom(a,i,""));return!0}var r=F.speed(t,i,n);return F.isEmptyObject(e)?this.each(r.complete,[!1]):(e=F.extend({},e),r.queue===!1?this.each(o):this.queue(r.queue,o))},stop:function(e,i,n){return"string"!=typeof e&&(n=i,i=e,e=t),i&&e!==!1&&this.queue(e||"fx",[]),this.each(function(){function t(e,t,i){var o=t[i];F.removeData(e,i,!0),o.stop(n)}var i,o=!1,r=F.timers,s=F._data(this);if(n||F._unmark(!0,this),null==e)for(i in s)s[i]&&s[i].stop&&i.indexOf(".run")===i.length-4&&t(this,s,i);else s[i=e+".run"]&&s[i].stop&&t(this,s,i);for(i=r.length;i--;)r[i].elem!==this||null!=e&&r[i].queue!==e||(n?r[i](!0):r[i].saveState(),o=!0,r.splice(i,1));n&&o||F.dequeue(this,e)})}}),F.each({slideDown:I("show",1),slideUp:I("hide",1),slideToggle:I("toggle",1),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){F.fn[e]=function(e,i,n){return this.animate(t,e,i,n)}}),F.extend({speed:function(e,t,i){var n=e&&"object"==typeof e?F.extend({},e):{complete:i||!i&&t||F.isFunction(e)&&e,duration:e,easing:i&&t||t&&!F.isFunction(t)&&t};return n.duration=F.fx.off?0:"number"==typeof n.duration?n.duration:n.duration in F.fx.speeds?F.fx.speeds[n.duration]:F.fx.speeds._default,(null==n.queue||n.queue===!0)&&(n.queue="fx"),n.old=n.complete,n.complete=function(e){F.isFunction(n.old)&&n.old.call(this),n.queue?F.dequeue(this,n.queue):e!==!1&&F._unmark(this)},n},easing:{linear:function(e,t,i,n){return i+n*e},swing:function(e,t,i,n){return(-Math.cos(e*Math.PI)/2+.5)*n+i}},timers:[],fx:function(e,t,i){this.options=t,this.elem=e,this.prop=i,t.orig=t.orig||{}}}),F.fx.prototype={update:function(){this.options.step&&this.options.step.call(this.elem,this.now,this),(F.fx.step[this.prop]||F.fx.step._default)(this)},cur:function(){if(null!=this.elem[this.prop]&&(!this.elem.style||null==this.elem.style[this.prop]))return this.elem[this.prop];var e,t=F.css(this.elem,this.prop);return isNaN(e=parseFloat(t))?t&&"auto"!==t?t:0:e},custom:function(e,i,n){function o(e){return r.step(e)}var r=this,s=F.fx;this.startTime=yi||T(),this.end=i,this.now=this.start=e,this.pos=this.state=0,this.unit=n||this.unit||(F.cssNumber[this.prop]?"":"px"),o.queue=this.options.queue,o.elem=this.elem,o.saveState=function(){r.options.hide&&F._data(r.elem,"fxshow"+r.prop)===t&&F._data(r.elem,"fxshow"+r.prop,r.start)},o()&&F.timers.push(o)&&!vi&&(vi=setInterval(s.tick,s.interval))},show:function(){var e=F._data(this.elem,"fxshow"+this.prop);this.options.orig[this.prop]=e||F.style(this.elem,this.prop),this.options.show=!0,e!==t?this.custom(this.cur(),e):this.custom("width"===this.prop||"height"===this.prop?1:0,this.cur()),F(this.elem).show()},hide:function(){this.options.orig[this.prop]=F._data(this.elem,"fxshow"+this.prop)||F.style(this.elem,this.prop),this.options.hide=!0,this.custom(this.cur(),0)},step:function(e){var t,i,n,o=yi||T(),r=!0,s=this.elem,a=this.options;if(e||o>=a.duration+this.startTime){this.now=this.end,this.pos=this.state=1,this.update(),a.animatedProperties[this.prop]=!0;for(t in a.animatedProperties)a.animatedProperties[t]!==!0&&(r=!1);if(r){if(null==a.overflow||F.support.shrinkWrapBlocks||F.each(["","X","Y"],function(e,t){s.style["overflow"+t]=a.overflow[e]}),a.hide&&F(s).hide(),a.hide||a.show)for(t in a.animatedProperties)F.style(s,t,a.orig[t]),F.removeData(s,"fxshow"+t,!0),F.removeData(s,"toggle"+t,!0);n=a.complete,n&&(a.complete=!1,n.call(s))}return!1}return 1/0==a.duration?this.now=o:(i=o-this.startTime,this.state=i/a.duration,this.pos=F.easing[a.animatedProperties[this.prop]](this.state,i,0,1,a.duration),this.now=this.start+(this.end-this.start)*this.pos),this.update(),!0}},F.extend(F.fx,{tick:function(){for(var e,t=F.timers,i=0;i<t.length;i++)e=t[i],e()||t[i]!==e||t.splice(i--,1);t.length||F.fx.stop()},interval:13,stop:function(){clearInterval(vi),vi=null},speeds:{slow:600,fast:200,_default:400},step:{opacity:function(e){F.style(e.elem,"opacity",e.now)},_default:function(e){e.elem.style&&null!=e.elem.style[e.prop]?e.elem.style[e.prop]=e.now+e.unit:e.elem[e.prop]=e.now}}}),F.each(["width","height"],function(e,t){F.fx.step[t]=function(e){F.style(e.elem,t,Math.max(0,e.now)+e.unit)}}),F.expr&&F.expr.filters&&(F.expr.filters.animated=function(e){return F.grep(F.timers,function(t){return e===t.elem}).length});var ki=/^t(?:able|d|h)$/i,$i=/^(?:body|html)$/i;F.fn.offset="getBoundingClientRect"in N.documentElement?function(e){var t,i=this[0];if(e)return this.each(function(t){F.offset.setOffset(this,e,t)});if(!i||!i.ownerDocument)return null;if(i===i.ownerDocument.body)return F.offset.bodyOffset(i);try{t=i.getBoundingClientRect()
}catch(n){}var o=i.ownerDocument,r=o.documentElement;if(!t||!F.contains(r,i))return t?{top:t.top,left:t.left}:{top:0,left:0};var s=o.body,a=P(o),l=r.clientTop||s.clientTop||0,c=r.clientLeft||s.clientLeft||0,u=a.pageYOffset||F.support.boxModel&&r.scrollTop||s.scrollTop,d=a.pageXOffset||F.support.boxModel&&r.scrollLeft||s.scrollLeft,h=t.top+u-l,f=t.left+d-c;return{top:h,left:f}}:function(e){var t=this[0];if(e)return this.each(function(t){F.offset.setOffset(this,e,t)});if(!t||!t.ownerDocument)return null;if(t===t.ownerDocument.body)return F.offset.bodyOffset(t);for(var i,n=t.offsetParent,o=t,r=t.ownerDocument,s=r.documentElement,a=r.body,l=r.defaultView,c=l?l.getComputedStyle(t,null):t.currentStyle,u=t.offsetTop,d=t.offsetLeft;(t=t.parentNode)&&t!==a&&t!==s&&(!F.support.fixedPosition||"fixed"!==c.position);)i=l?l.getComputedStyle(t,null):t.currentStyle,u-=t.scrollTop,d-=t.scrollLeft,t===n&&(u+=t.offsetTop,d+=t.offsetLeft,!F.support.doesNotAddBorder||F.support.doesAddBorderForTableAndCells&&ki.test(t.nodeName)||(u+=parseFloat(i.borderTopWidth)||0,d+=parseFloat(i.borderLeftWidth)||0),o=n,n=t.offsetParent),F.support.subtractsBorderForOverflowNotVisible&&"visible"!==i.overflow&&(u+=parseFloat(i.borderTopWidth)||0,d+=parseFloat(i.borderLeftWidth)||0),c=i;return("relative"===c.position||"static"===c.position)&&(u+=a.offsetTop,d+=a.offsetLeft),F.support.fixedPosition&&"fixed"===c.position&&(u+=Math.max(s.scrollTop,a.scrollTop),d+=Math.max(s.scrollLeft,a.scrollLeft)),{top:u,left:d}},F.offset={bodyOffset:function(e){var t=e.offsetTop,i=e.offsetLeft;return F.support.doesNotIncludeMarginInBodyOffset&&(t+=parseFloat(F.css(e,"marginTop"))||0,i+=parseFloat(F.css(e,"marginLeft"))||0),{top:t,left:i}},setOffset:function(e,t,i){var n=F.css(e,"position");"static"===n&&(e.style.position="relative");var o,r,s=F(e),a=s.offset(),l=F.css(e,"top"),c=F.css(e,"left"),u=("absolute"===n||"fixed"===n)&&F.inArray("auto",[l,c])>-1,d={},h={};u?(h=s.position(),o=h.top,r=h.left):(o=parseFloat(l)||0,r=parseFloat(c)||0),F.isFunction(t)&&(t=t.call(e,i,a)),null!=t.top&&(d.top=t.top-a.top+o),null!=t.left&&(d.left=t.left-a.left+r),"using"in t?t.using.call(e,d):s.css(d)}},F.fn.extend({position:function(){if(!this[0])return null;var e=this[0],t=this.offsetParent(),i=this.offset(),n=$i.test(t[0].nodeName)?{top:0,left:0}:t.offset();return i.top-=parseFloat(F.css(e,"marginTop"))||0,i.left-=parseFloat(F.css(e,"marginLeft"))||0,n.top+=parseFloat(F.css(t[0],"borderTopWidth"))||0,n.left+=parseFloat(F.css(t[0],"borderLeftWidth"))||0,{top:i.top-n.top,left:i.left-n.left}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent||N.body;e&&!$i.test(e.nodeName)&&"static"===F.css(e,"position");)e=e.offsetParent;return e})}}),F.each(["Left","Top"],function(e,i){var n="scroll"+i;F.fn[n]=function(i){var o,r;return i===t?(o=this[0])?(r=P(o),r?"pageXOffset"in r?r[e?"pageYOffset":"pageXOffset"]:F.support.boxModel&&r.document.documentElement[n]||r.document.body[n]:o[n]):null:this.each(function(){r=P(this),r?r.scrollTo(e?F(r).scrollLeft():i,e?i:F(r).scrollTop()):this[n]=i})}}),F.each(["Height","Width"],function(e,i){var n=i.toLowerCase();F.fn["inner"+i]=function(){var e=this[0];return e?e.style?parseFloat(F.css(e,n,"padding")):this[n]():null},F.fn["outer"+i]=function(e){var t=this[0];return t?t.style?parseFloat(F.css(t,n,e?"margin":"border")):this[n]():null},F.fn[n]=function(e){var o=this[0];if(!o)return null==e?null:this;if(F.isFunction(e))return this.each(function(t){var i=F(this);i[n](e.call(this,t,i[n]()))});if(F.isWindow(o)){var r=o.document.documentElement["client"+i],s=o.document.body;return"CSS1Compat"===o.document.compatMode&&r||s&&s["client"+i]||r}if(9===o.nodeType)return Math.max(o.documentElement["client"+i],o.body["scroll"+i],o.documentElement["scroll"+i],o.body["offset"+i],o.documentElement["offset"+i]);if(e===t){var a=F.css(o,n),l=parseFloat(a);return F.isNumeric(l)?l:a}return this.css(n,"string"==typeof e?e:e+"px")}}),e.jQuery=e.$=F,"function"==typeof define&&define.amd&&define.amd.jQuery&&define("jquery",[],function(){return F})}(window),function(e,t){var i;e.rails=i={linkClickSelector:"a[data-confirm], a[data-method], a[data-remote], a[data-disable-with]",inputChangeSelector:"select[data-remote], input[data-remote], textarea[data-remote]",formSubmitSelector:"form",formInputClickSelector:"form input[type=submit], form input[type=image], form button[type=submit], form button:not(button[type])",disableSelector:"input[data-disable-with], button[data-disable-with], textarea[data-disable-with]",enableSelector:"input[data-disable-with]:disabled, button[data-disable-with]:disabled, textarea[data-disable-with]:disabled",requiredInputSelector:"input[name][required]:not([disabled]),textarea[name][required]:not([disabled])",fileInputSelector:"input:file",linkDisableSelector:"a[data-disable-with]",CSRFProtection:function(t){var i=e('meta[name="csrf-token"]').attr("content");i&&t.setRequestHeader("X-CSRF-Token",i)},fire:function(t,i,n){var o=e.Event(i);return t.trigger(o,n),o.result!==!1},confirm:function(e){return confirm(e)},ajax:function(t){return e.ajax(t)},href:function(e){return e.attr("href")},handleRemote:function(n){var o,r,s,a,l,c;if(i.fire(n,"ajax:before")){if(a=n.data("cross-domain")||null,l=n.data("type")||e.ajaxSettings&&e.ajaxSettings.dataType,n.is("form")){o=n.attr("method"),r=n.attr("action"),s=n.serializeArray();var u=n.data("ujs:submit-button");u&&(s.push(u),n.data("ujs:submit-button",null))}else n.is(i.inputChangeSelector)?(o=n.data("method"),r=n.data("url"),s=n.serialize(),n.data("params")&&(s=s+"&"+n.data("params"))):(o=n.data("method"),r=i.href(n),s=n.data("params")||null);return c={type:o||"GET",data:s,dataType:l,crossDomain:a,beforeSend:function(e,o){return o.dataType===t&&e.setRequestHeader("accept","*/*;q=0.5, "+o.accepts.script),i.fire(n,"ajax:beforeSend",[e,o])},success:function(e,t,i){n.trigger("ajax:success",[e,t,i])},complete:function(e,t){n.trigger("ajax:complete",[e,t])},error:function(e,t,i){n.trigger("ajax:error",[e,t,i])}},r&&(c.url=r),i.ajax(c)}return!1},handleMethod:function(n){var o=i.href(n),r=n.data("method"),s=n.attr("target"),a=e("meta[name=csrf-token]").attr("content"),l=e("meta[name=csrf-param]").attr("content"),c=e('<form method="post" action="'+o+'"></form>'),u='<input name="_method" value="'+r+'" type="hidden" />';l!==t&&a!==t&&(u+='<input name="'+l+'" value="'+a+'" type="hidden" />'),s&&c.attr("target",s),c.hide().append(u).appendTo("body"),c.submit()},disableFormElements:function(t){t.find(i.disableSelector).each(function(){var t=e(this),i=t.is("button")?"html":"val";t.data("ujs:enable-with",t[i]()),t[i](t.data("disable-with")),t.prop("disabled",!0)})},enableFormElements:function(t){t.find(i.enableSelector).each(function(){var t=e(this),i=t.is("button")?"html":"val";t.data("ujs:enable-with")&&t[i](t.data("ujs:enable-with")),t.prop("disabled",!1)})},allowAction:function(e){var t,n=e.data("confirm"),o=!1;return n?(i.fire(e,"confirm")&&(o=i.confirm(n),t=i.fire(e,"confirm:complete",[o])),o&&t):!0},blankInputs:function(t,i,n){var o,r=e(),s=i||"input,textarea";return t.find(s).each(function(){o=e(this),(n?o.val():!o.val())&&(r=r.add(o))}),r.length?r:!1},nonBlankInputs:function(e,t){return i.blankInputs(e,t,!0)},stopEverything:function(t){return e(t.target).trigger("ujs:everythingStopped"),t.stopImmediatePropagation(),!1},callFormSubmitBindings:function(i,n){var o=i.data("events"),r=!0;return o!==t&&o.submit!==t&&e.each(o.submit,function(e,t){return"function"==typeof t.handler?r=t.handler(n):void 0}),r},disableElement:function(e){e.data("ujs:enable-with",e.html()),e.html(e.data("disable-with")),e.bind("click.railsDisable",function(e){return i.stopEverything(e)})},enableElement:function(e){e.data("ujs:enable-with")!==t&&(e.html(e.data("ujs:enable-with")),e.data("ujs:enable-with",!1)),e.unbind("click.railsDisable")}},e.ajaxPrefilter(function(e,t,n){e.crossDomain||i.CSRFProtection(n)}),e(document).delegate(i.linkDisableSelector,"ajax:complete",function(){i.enableElement(e(this))}),e(document).delegate(i.linkClickSelector,"click.rails",function(n){var o=e(this),r=o.data("method"),s=o.data("params");return i.allowAction(o)?(o.is(i.linkDisableSelector)&&i.disableElement(o),o.data("remote")!==t?!n.metaKey&&!n.ctrlKey||r&&"GET"!==r||s?(i.handleRemote(o)===!1&&i.enableElement(o),!1):!0:o.data("method")?(i.handleMethod(o),!1):void 0):i.stopEverything(n)}),e(document).delegate(i.inputChangeSelector,"change.rails",function(t){var n=e(this);return i.allowAction(n)?(i.handleRemote(n),!1):i.stopEverything(t)}),e(document).delegate(i.formSubmitSelector,"submit.rails",function(n){var o=e(this),r=o.data("remote")!==t,s=i.blankInputs(o,i.requiredInputSelector),a=i.nonBlankInputs(o,i.fileInputSelector);return i.allowAction(o)?s&&o.attr("novalidate")==t&&i.fire(o,"ajax:aborted:required",[s])?i.stopEverything(n):r?a?i.fire(o,"ajax:aborted:file",[a]):!e.support.submitBubbles&&e().jquery<"1.7"&&i.callFormSubmitBindings(o,n)===!1?i.stopEverything(n):(i.handleRemote(o),!1):void setTimeout(function(){i.disableFormElements(o)},13):i.stopEverything(n)}),e(document).delegate(i.formInputClickSelector,"click.rails",function(t){var n=e(this);if(!i.allowAction(n))return i.stopEverything(t);var o=n.attr("name"),r=o?{name:o,value:n.val()}:null;n.closest("form").data("ujs:submit-button",r)}),e(document).delegate(i.formSubmitSelector,"ajax:beforeSend.rails",function(t){this==t.target&&i.disableFormElements(e(this))}),e(document).delegate(i.formSubmitSelector,"ajax:complete.rails",function(t){this==t.target&&i.enableFormElements(e(this))})}(jQuery),function(e){"function"==typeof define&&define.amd?define(["jquery"],e):e(jQuery)}(function(e){function t(t,n){var o,r,s,a=t.nodeName.toLowerCase();return"area"===a?(o=t.parentNode,r=o.name,t.href&&r&&"map"===o.nodeName.toLowerCase()?(s=e("img[usemap='#"+r+"']")[0],!!s&&i(s)):!1):(/^(input|select|textarea|button|object)$/.test(a)?!t.disabled:"a"===a?t.href||n:n)&&i(t)}function i(t){return e.expr.filters.visible(t)&&!e(t).parents().addBack().filter(function(){return"hidden"===e.css(this,"visibility")}).length}e.ui=e.ui||{},e.extend(e.ui,{version:"1.11.4",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),e.fn.extend({scrollParent:function(t){var i=this.css("position"),n="absolute"===i,o=t?/(auto|scroll|hidden)/:/(auto|scroll)/,r=this.parents().filter(function(){var t=e(this);return n&&"static"===t.css("position")?!1:o.test(t.css("overflow")+t.css("overflow-y")+t.css("overflow-x"))}).eq(0);return"fixed"!==i&&r.length?r:e(this[0].ownerDocument||document)},uniqueId:function(){var e=0;return function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++e)})}}(),removeUniqueId:function(){return this.each(function(){/^ui-id-\d+$/.test(this.id)&&e(this).removeAttr("id")})}}),e.extend(e.expr[":"],{data:e.expr.createPseudo?e.expr.createPseudo(function(t){return function(i){return!!e.data(i,t)}}):function(t,i,n){return!!e.data(t,n[3])},focusable:function(i){return t(i,!isNaN(e.attr(i,"tabindex")))},tabbable:function(i){var n=e.attr(i,"tabindex"),o=isNaN(n);return(o||n>=0)&&t(i,!o)}}),e("<a>").outerWidth(1).jquery||e.each(["Width","Height"],function(t,i){function n(t,i,n,r){return e.each(o,function(){i-=parseFloat(e.css(t,"padding"+this))||0,n&&(i-=parseFloat(e.css(t,"border"+this+"Width"))||0),r&&(i-=parseFloat(e.css(t,"margin"+this))||0)}),i}var o="Width"===i?["Left","Right"]:["Top","Bottom"],r=i.toLowerCase(),s={innerWidth:e.fn.innerWidth,innerHeight:e.fn.innerHeight,outerWidth:e.fn.outerWidth,outerHeight:e.fn.outerHeight};e.fn["inner"+i]=function(t){return void 0===t?s["inner"+i].call(this):this.each(function(){e(this).css(r,n(this,t)+"px")})},e.fn["outer"+i]=function(t,o){return"number"!=typeof t?s["outer"+i].call(this,t):this.each(function(){e(this).css(r,n(this,t,!0,o)+"px")})}}),e.fn.addBack||(e.fn.addBack=function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}),e("<a>").data("a-b","a").removeData("a-b").data("a-b")&&(e.fn.removeData=function(t){return function(i){return arguments.length?t.call(this,e.camelCase(i)):t.call(this)}}(e.fn.removeData)),e.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase()),e.fn.extend({focus:function(t){return function(i,n){return"number"==typeof i?this.each(function(){var t=this;setTimeout(function(){e(t).focus(),n&&n.call(t)},i)}):t.apply(this,arguments)}}(e.fn.focus),disableSelection:function(){var e="onselectstart"in document.createElement("div")?"selectstart":"mousedown";return function(){return this.bind(e+".ui-disableSelection",function(e){e.preventDefault()})}}(),enableSelection:function(){return this.unbind(".ui-disableSelection")},zIndex:function(t){if(void 0!==t)return this.css("zIndex",t);if(this.length)for(var i,n,o=e(this[0]);o.length&&o[0]!==document;){if(i=o.css("position"),("absolute"===i||"relative"===i||"fixed"===i)&&(n=parseInt(o.css("zIndex"),10),!isNaN(n)&&0!==n))return n;o=o.parent()}return 0}}),e.ui.plugin={add:function(t,i,n){var o,r=e.ui[t].prototype;for(o in n)r.plugins[o]=r.plugins[o]||[],r.plugins[o].push([i,n[o]])},call:function(e,t,i,n){var o,r=e.plugins[t];if(r&&(n||e.element[0].parentNode&&11!==e.element[0].parentNode.nodeType))for(o=0;o<r.length;o++)e.options[r[o][0]]&&r[o][1].apply(e.element,i)}};var n=0,o=Array.prototype.slice;e.cleanData=function(t){return function(i){var n,o,r;for(r=0;null!=(o=i[r]);r++)try{n=e._data(o,"events"),n&&n.remove&&e(o).triggerHandler("remove")}catch(s){}t(i)}}(e.cleanData),e.widget=function(t,i,n){var o,r,s,a,l={},c=t.split(".")[0];return t=t.split(".")[1],o=c+"-"+t,n||(n=i,i=e.Widget),e.expr[":"][o.toLowerCase()]=function(t){return!!e.data(t,o)},e[c]=e[c]||{},r=e[c][t],s=e[c][t]=function(e,t){return this._createWidget?void(arguments.length&&this._createWidget(e,t)):new s(e,t)},e.extend(s,r,{version:n.version,_proto:e.extend({},n),_childConstructors:[]}),a=new i,a.options=e.widget.extend({},a.options),e.each(n,function(t,n){return e.isFunction(n)?void(l[t]=function(){var e=function(){return i.prototype[t].apply(this,arguments)},o=function(e){return i.prototype[t].apply(this,e)};return function(){var t,i=this._super,r=this._superApply;return this._super=e,this._superApply=o,t=n.apply(this,arguments),this._super=i,this._superApply=r,t}}()):void(l[t]=n)}),s.prototype=e.widget.extend(a,{widgetEventPrefix:r?a.widgetEventPrefix||t:t},l,{constructor:s,namespace:c,widgetName:t,widgetFullName:o}),r?(e.each(r._childConstructors,function(t,i){var n=i.prototype;e.widget(n.namespace+"."+n.widgetName,s,i._proto)}),delete r._childConstructors):i._childConstructors.push(s),e.widget.bridge(t,s),s},e.widget.extend=function(t){for(var i,n,r=o.call(arguments,1),s=0,a=r.length;a>s;s++)for(i in r[s])n=r[s][i],r[s].hasOwnProperty(i)&&void 0!==n&&(t[i]=e.isPlainObject(n)?e.isPlainObject(t[i])?e.widget.extend({},t[i],n):e.widget.extend({},n):n);return t},e.widget.bridge=function(t,i){var n=i.prototype.widgetFullName||t;e.fn[t]=function(r){var s="string"==typeof r,a=o.call(arguments,1),l=this;return s?this.each(function(){var i,o=e.data(this,n);return"instance"===r?(l=o,!1):o?e.isFunction(o[r])&&"_"!==r.charAt(0)?(i=o[r].apply(o,a),i!==o&&void 0!==i?(l=i&&i.jquery?l.pushStack(i.get()):i,!1):void 0):e.error("no such method '"+r+"' for "+t+" widget instance"):e.error("cannot call methods on "+t+" prior to initialization; attempted to call method '"+r+"'")}):(a.length&&(r=e.widget.extend.apply(null,[r].concat(a))),this.each(function(){var t=e.data(this,n);t?(t.option(r||{}),t._init&&t._init()):e.data(this,n,new i(r,this))})),l}},e.Widget=function(){},e.Widget._childConstructors=[],e.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(t,i){i=e(i||this.defaultElement||this)[0],this.element=e(i),this.uuid=n++,this.eventNamespace="."+this.widgetName+this.uuid,this.bindings=e(),this.hoverable=e(),this.focusable=e(),i!==this&&(e.data(i,this.widgetFullName,this),this._on(!0,this.element,{remove:function(e){e.target===i&&this.destroy()}}),this.document=e(i.style?i.ownerDocument:i.document||i),this.window=e(this.document[0].defaultView||this.document[0].parentWindow)),this.options=e.widget.extend({},this.options,this._getCreateOptions(),t),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:e.noop,_getCreateEventData:e.noop,_create:e.noop,_init:e.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetFullName).removeData(e.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:e.noop,widget:function(){return this.element},option:function(t,i){var n,o,r,s=t;if(0===arguments.length)return e.widget.extend({},this.options);if("string"==typeof t)if(s={},n=t.split("."),t=n.shift(),n.length){for(o=s[t]=e.widget.extend({},this.options[t]),r=0;r<n.length-1;r++)o[n[r]]=o[n[r]]||{},o=o[n[r]];if(t=n.pop(),1===arguments.length)return void 0===o[t]?null:o[t];o[t]=i}else{if(1===arguments.length)return void 0===this.options[t]?null:this.options[t];s[t]=i}return this._setOptions(s),this},_setOptions:function(e){var t;for(t in e)this._setOption(t,e[t]);return this},_setOption:function(e,t){return this.options[e]=t,"disabled"===e&&(this.widget().toggleClass(this.widgetFullName+"-disabled",!!t),t&&(this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus"))),this},enable:function(){return this._setOptions({disabled:!1})},disable:function(){return this._setOptions({disabled:!0})},_on:function(t,i,n){var o,r=this;"boolean"!=typeof t&&(n=i,i=t,t=!1),n?(i=o=e(i),this.bindings=this.bindings.add(i)):(n=i,i=this.element,o=this.widget()),e.each(n,function(n,s){function a(){return t||r.options.disabled!==!0&&!e(this).hasClass("ui-state-disabled")?("string"==typeof s?r[s]:s).apply(r,arguments):void 0}"string"!=typeof s&&(a.guid=s.guid=s.guid||a.guid||e.guid++);var l=n.match(/^([\w:-]*)\s*(.*)$/),c=l[1]+r.eventNamespace,u=l[2];u?o.delegate(u,c,a):i.bind(c,a)})},_off:function(t,i){i=(i||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,t.unbind(i).undelegate(i),this.bindings=e(this.bindings.not(t).get()),this.focusable=e(this.focusable.not(t).get()),this.hoverable=e(this.hoverable.not(t).get())},_delay:function(e,t){function i(){return("string"==typeof e?n[e]:e).apply(n,arguments)}var n=this;return setTimeout(i,t||0)},_hoverable:function(t){this.hoverable=this.hoverable.add(t),this._on(t,{mouseenter:function(t){e(t.currentTarget).addClass("ui-state-hover")},mouseleave:function(t){e(t.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(t){this.focusable=this.focusable.add(t),this._on(t,{focusin:function(t){e(t.currentTarget).addClass("ui-state-focus")},focusout:function(t){e(t.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(t,i,n){var o,r,s=this.options[t];if(n=n||{},i=e.Event(i),i.type=(t===this.widgetEventPrefix?t:this.widgetEventPrefix+t).toLowerCase(),i.target=this.element[0],r=i.originalEvent)for(o in r)o in i||(i[o]=r[o]);return this.element.trigger(i,n),!(e.isFunction(s)&&s.apply(this.element[0],[i].concat(n))===!1||i.isDefaultPrevented())}},e.each({show:"fadeIn",hide:"fadeOut"},function(t,i){e.Widget.prototype["_"+t]=function(n,o,r){"string"==typeof o&&(o={effect:o});var s,a=o?o===!0||"number"==typeof o?i:o.effect||i:t;o=o||{},"number"==typeof o&&(o={duration:o}),s=!e.isEmptyObject(o),o.complete=r,o.delay&&n.delay(o.delay),s&&e.effects&&e.effects.effect[a]?n[t](o):a!==t&&n[a]?n[a](o.duration,o.easing,r):n.queue(function(i){e(this)[t](),r&&r.call(n[0]),i()})}});var r=(e.widget,!1);e(document).mouseup(function(){r=!1});e.widget("ui.mouse",{version:"1.11.4",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var t=this;this.element.bind("mousedown."+this.widgetName,function(e){return t._mouseDown(e)}).bind("click."+this.widgetName,function(i){return!0===e.data(i.target,t.widgetName+".preventClickEvent")?(e.removeData(i.target,t.widgetName+".preventClickEvent"),i.stopImmediatePropagation(),!1):void 0}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),this._mouseMoveDelegate&&this.document.unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(t){if(!r){this._mouseMoved=!1,this._mouseStarted&&this._mouseUp(t),this._mouseDownEvent=t;var i=this,n=1===t.which,o="string"==typeof this.options.cancel&&t.target.nodeName?e(t.target).closest(this.options.cancel).length:!1;return n&&!o&&this._mouseCapture(t)?(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){i.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=this._mouseStart(t)!==!1,!this._mouseStarted)?(t.preventDefault(),!0):(!0===e.data(t.target,this.widgetName+".preventClickEvent")&&e.removeData(t.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(e){return i._mouseMove(e)},this._mouseUpDelegate=function(e){return i._mouseUp(e)},this.document.bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),t.preventDefault(),r=!0,!0)):!0}},_mouseMove:function(t){if(this._mouseMoved){if(e.ui.ie&&(!document.documentMode||document.documentMode<9)&&!t.button)return this._mouseUp(t);if(!t.which)return this._mouseUp(t)}return(t.which||t.button)&&(this._mouseMoved=!0),this._mouseStarted?(this._mouseDrag(t),t.preventDefault()):(this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,t)!==!1,this._mouseStarted?this._mouseDrag(t):this._mouseUp(t)),!this._mouseStarted)},_mouseUp:function(t){return this.document.unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,t.target===this._mouseDownEvent.target&&e.data(t.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(t)),r=!1,!1},_mouseDistanceMet:function(e){return Math.max(Math.abs(this._mouseDownEvent.pageX-e.pageX),Math.abs(this._mouseDownEvent.pageY-e.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}});!function(){function t(e,t,i){return[parseFloat(e[0])*(f.test(e[0])?t/100:1),parseFloat(e[1])*(f.test(e[1])?i/100:1)]}function i(t,i){return parseInt(e.css(t,i),10)||0}function n(t){var i=t[0];return 9===i.nodeType?{width:t.width(),height:t.height(),offset:{top:0,left:0}}:e.isWindow(i)?{width:t.width(),height:t.height(),offset:{top:t.scrollTop(),left:t.scrollLeft()}}:i.preventDefault?{width:0,height:0,offset:{top:i.pageY,left:i.pageX}}:{width:t.outerWidth(),height:t.outerHeight(),offset:t.offset()}}e.ui=e.ui||{};var o,r,s=Math.max,a=Math.abs,l=Math.round,c=/left|center|right/,u=/top|center|bottom/,d=/[\+\-]\d+(\.[\d]+)?%?/,h=/^\w+/,f=/%$/,p=e.fn.position;e.position={scrollbarWidth:function(){if(void 0!==o)return o;var t,i,n=e("<div style='display:block;position:absolute;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),r=n.children()[0];return e("body").append(n),t=r.offsetWidth,n.css("overflow","scroll"),i=r.offsetWidth,t===i&&(i=n[0].clientWidth),n.remove(),o=t-i},getScrollInfo:function(t){var i=t.isWindow||t.isDocument?"":t.element.css("overflow-x"),n=t.isWindow||t.isDocument?"":t.element.css("overflow-y"),o="scroll"===i||"auto"===i&&t.width<t.element[0].scrollWidth,r="scroll"===n||"auto"===n&&t.height<t.element[0].scrollHeight;return{width:r?e.position.scrollbarWidth():0,height:o?e.position.scrollbarWidth():0}},getWithinInfo:function(t){var i=e(t||window),n=e.isWindow(i[0]),o=!!i[0]&&9===i[0].nodeType;return{element:i,isWindow:n,isDocument:o,offset:i.offset()||{left:0,top:0},scrollLeft:i.scrollLeft(),scrollTop:i.scrollTop(),width:n||o?i.width():i.outerWidth(),height:n||o?i.height():i.outerHeight()}}},e.fn.position=function(o){if(!o||!o.of)return p.apply(this,arguments);o=e.extend({},o);var f,m,g,v,y,b,w=e(o.of),_=e.position.getWithinInfo(o.within),x=e.position.getScrollInfo(_),k=(o.collision||"flip").split(" "),$={};return b=n(w),w[0].preventDefault&&(o.at="left top"),m=b.width,g=b.height,v=b.offset,y=e.extend({},v),e.each(["my","at"],function(){var e,t,i=(o[this]||"").split(" ");1===i.length&&(i=c.test(i[0])?i.concat(["center"]):u.test(i[0])?["center"].concat(i):["center","center"]),i[0]=c.test(i[0])?i[0]:"center",i[1]=u.test(i[1])?i[1]:"center",e=d.exec(i[0]),t=d.exec(i[1]),$[this]=[e?e[0]:0,t?t[0]:0],o[this]=[h.exec(i[0])[0],h.exec(i[1])[0]]}),1===k.length&&(k[1]=k[0]),"right"===o.at[0]?y.left+=m:"center"===o.at[0]&&(y.left+=m/2),"bottom"===o.at[1]?y.top+=g:"center"===o.at[1]&&(y.top+=g/2),f=t($.at,m,g),y.left+=f[0],y.top+=f[1],this.each(function(){var n,c,u=e(this),d=u.outerWidth(),h=u.outerHeight(),p=i(this,"marginLeft"),b=i(this,"marginTop"),C=d+p+i(this,"marginRight")+x.width,j=h+b+i(this,"marginBottom")+x.height,S=e.extend({},y),T=t($.my,u.outerWidth(),u.outerHeight());"right"===o.my[0]?S.left-=d:"center"===o.my[0]&&(S.left-=d/2),"bottom"===o.my[1]?S.top-=h:"center"===o.my[1]&&(S.top-=h/2),S.left+=T[0],S.top+=T[1],r||(S.left=l(S.left),S.top=l(S.top)),n={marginLeft:p,marginTop:b},e.each(["left","top"],function(t,i){e.ui.position[k[t]]&&e.ui.position[k[t]][i](S,{targetWidth:m,targetHeight:g,elemWidth:d,elemHeight:h,collisionPosition:n,collisionWidth:C,collisionHeight:j,offset:[f[0]+T[0],f[1]+T[1]],my:o.my,at:o.at,within:_,elem:u})}),o.using&&(c=function(e){var t=v.left-S.left,i=t+m-d,n=v.top-S.top,r=n+g-h,l={target:{element:w,left:v.left,top:v.top,width:m,height:g},element:{element:u,left:S.left,top:S.top,width:d,height:h},horizontal:0>i?"left":t>0?"right":"center",vertical:0>r?"top":n>0?"bottom":"middle"};d>m&&a(t+i)<m&&(l.horizontal="center"),h>g&&a(n+r)<g&&(l.vertical="middle"),l.important=s(a(t),a(i))>s(a(n),a(r))?"horizontal":"vertical",o.using.call(this,e,l)}),u.offset(e.extend(S,{using:c}))})},e.ui.position={fit:{left:function(e,t){var i,n=t.within,o=n.isWindow?n.scrollLeft:n.offset.left,r=n.width,a=e.left-t.collisionPosition.marginLeft,l=o-a,c=a+t.collisionWidth-r-o;t.collisionWidth>r?l>0&&0>=c?(i=e.left+l+t.collisionWidth-r-o,e.left+=l-i):e.left=c>0&&0>=l?o:l>c?o+r-t.collisionWidth:o:l>0?e.left+=l:c>0?e.left-=c:e.left=s(e.left-a,e.left)},top:function(e,t){var i,n=t.within,o=n.isWindow?n.scrollTop:n.offset.top,r=t.within.height,a=e.top-t.collisionPosition.marginTop,l=o-a,c=a+t.collisionHeight-r-o;t.collisionHeight>r?l>0&&0>=c?(i=e.top+l+t.collisionHeight-r-o,e.top+=l-i):e.top=c>0&&0>=l?o:l>c?o+r-t.collisionHeight:o:l>0?e.top+=l:c>0?e.top-=c:e.top=s(e.top-a,e.top)}},flip:{left:function(e,t){var i,n,o=t.within,r=o.offset.left+o.scrollLeft,s=o.width,l=o.isWindow?o.scrollLeft:o.offset.left,c=e.left-t.collisionPosition.marginLeft,u=c-l,d=c+t.collisionWidth-s-l,h="left"===t.my[0]?-t.elemWidth:"right"===t.my[0]?t.elemWidth:0,f="left"===t.at[0]?t.targetWidth:"right"===t.at[0]?-t.targetWidth:0,p=-2*t.offset[0];0>u?(i=e.left+h+f+p+t.collisionWidth-s-r,(0>i||i<a(u))&&(e.left+=h+f+p)):d>0&&(n=e.left-t.collisionPosition.marginLeft+h+f+p-l,(n>0||a(n)<d)&&(e.left+=h+f+p))},top:function(e,t){var i,n,o=t.within,r=o.offset.top+o.scrollTop,s=o.height,l=o.isWindow?o.scrollTop:o.offset.top,c=e.top-t.collisionPosition.marginTop,u=c-l,d=c+t.collisionHeight-s-l,h="top"===t.my[1],f=h?-t.elemHeight:"bottom"===t.my[1]?t.elemHeight:0,p="top"===t.at[1]?t.targetHeight:"bottom"===t.at[1]?-t.targetHeight:0,m=-2*t.offset[1];0>u?(n=e.top+f+p+m+t.collisionHeight-s-r,(0>n||n<a(u))&&(e.top+=f+p+m)):d>0&&(i=e.top-t.collisionPosition.marginTop+f+p+m-l,(i>0||a(i)<d)&&(e.top+=f+p+m))}},flipfit:{left:function(){e.ui.position.flip.left.apply(this,arguments),e.ui.position.fit.left.apply(this,arguments)},top:function(){e.ui.position.flip.top.apply(this,arguments),e.ui.position.fit.top.apply(this,arguments)}}},function(){var t,i,n,o,s,a=document.getElementsByTagName("body")[0],l=document.createElement("div");t=document.createElement(a?"div":"body"),n={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"},a&&e.extend(n,{position:"absolute",left:"-1000px",top:"-1000px"});for(s in n)t.style[s]=n[s];t.appendChild(l),i=a||document.documentElement,i.insertBefore(t,i.firstChild),l.style.cssText="position: absolute; left: 10.7432222px;",o=e(l).offset().left,r=o>10&&11>o,t.innerHTML="",i.removeChild(t)}()}();e.ui.position;e.widget("ui.draggable",e.ui.mouse,{version:"1.11.4",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1,drag:null,start:null,stop:null},_create:function(){"original"===this.options.helper&&this._setPositionRelative(),this.options.addClasses&&this.element.addClass("ui-draggable"),this.options.disabled&&this.element.addClass("ui-draggable-disabled"),this._setHandleClassName(),this._mouseInit()},_setOption:function(e,t){this._super(e,t),"handle"===e&&(this._removeHandleClassName(),this._setHandleClassName())},_destroy:function(){return(this.helper||this.element).is(".ui-draggable-dragging")?void(this.destroyOnClear=!0):(this.element.removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled"),this._removeHandleClassName(),void this._mouseDestroy())},_mouseCapture:function(t){var i=this.options;return this._blurActiveElement(t),this.helper||i.disabled||e(t.target).closest(".ui-resizable-handle").length>0?!1:(this.handle=this._getHandle(t),this.handle?(this._blockFrames(i.iframeFix===!0?"iframe":i.iframeFix),!0):!1)},_blockFrames:function(t){this.iframeBlocks=this.document.find(t).map(function(){var t=e(this);return e("<div>").css("position","absolute").appendTo(t.parent()).outerWidth(t.outerWidth()).outerHeight(t.outerHeight()).offset(t.offset())[0]})},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_blurActiveElement:function(t){var i=this.document[0];if(this.handleElement.is(t.target))try{i.activeElement&&"body"!==i.activeElement.nodeName.toLowerCase()&&e(i.activeElement).blur()}catch(n){}},_mouseStart:function(t){var i=this.options;return this.helper=this._createHelper(t),this.helper.addClass("ui-draggable-dragging"),this._cacheHelperProportions(),e.ui.ddmanager&&(e.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(!0),this.offsetParent=this.helper.offsetParent(),this.hasFixedAncestor=this.helper.parents().filter(function(){return"fixed"===e(this).css("position")}).length>0,this.positionAbs=this.element.offset(),this._refreshOffsets(t),this.originalPosition=this.position=this._generatePosition(t,!1),this.originalPageX=t.pageX,this.originalPageY=t.pageY,i.cursorAt&&this._adjustOffsetFromHelper(i.cursorAt),this._setContainment(),this._trigger("start",t)===!1?(this._clear(),!1):(this._cacheHelperProportions(),e.ui.ddmanager&&!i.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t),this._normalizeRightBottom(),this._mouseDrag(t,!0),e.ui.ddmanager&&e.ui.ddmanager.dragStart(this,t),!0)},_refreshOffsets:function(e){this.offset={top:this.positionAbs.top-this.margins.top,left:this.positionAbs.left-this.margins.left,scroll:!1,parent:this._getParentOffset(),relative:this._getRelativeOffset()},this.offset.click={left:e.pageX-this.offset.left,top:e.pageY-this.offset.top}},_mouseDrag:function(t,i){if(this.hasFixedAncestor&&(this.offset.parent=this._getParentOffset()),this.position=this._generatePosition(t,!0),this.positionAbs=this._convertPositionTo("absolute"),!i){var n=this._uiHash();if(this._trigger("drag",t,n)===!1)return this._mouseUp({}),!1;this.position=n.position}return this.helper[0].style.left=this.position.left+"px",this.helper[0].style.top=this.position.top+"px",e.ui.ddmanager&&e.ui.ddmanager.drag(this,t),!1},_mouseStop:function(t){var i=this,n=!1;return e.ui.ddmanager&&!this.options.dropBehaviour&&(n=e.ui.ddmanager.drop(this,t)),this.dropped&&(n=this.dropped,this.dropped=!1),"invalid"===this.options.revert&&!n||"valid"===this.options.revert&&n||this.options.revert===!0||e.isFunction(this.options.revert)&&this.options.revert.call(this.element,n)?e(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){i._trigger("stop",t)!==!1&&i._clear()
}):this._trigger("stop",t)!==!1&&this._clear(),!1},_mouseUp:function(t){return this._unblockFrames(),e.ui.ddmanager&&e.ui.ddmanager.dragStop(this,t),this.handleElement.is(t.target)&&this.element.focus(),e.ui.mouse.prototype._mouseUp.call(this,t)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear(),this},_getHandle:function(t){return this.options.handle?!!e(t.target).closest(this.element.find(this.options.handle)).length:!0},_setHandleClassName:function(){this.handleElement=this.options.handle?this.element.find(this.options.handle):this.element,this.handleElement.addClass("ui-draggable-handle")},_removeHandleClassName:function(){this.handleElement.removeClass("ui-draggable-handle")},_createHelper:function(t){var i=this.options,n=e.isFunction(i.helper),o=n?e(i.helper.apply(this.element[0],[t])):"clone"===i.helper?this.element.clone().removeAttr("id"):this.element;return o.parents("body").length||o.appendTo("parent"===i.appendTo?this.element[0].parentNode:i.appendTo),n&&o[0]===this.element[0]&&this._setPositionRelative(),o[0]===this.element[0]||/(fixed|absolute)/.test(o.css("position"))||o.css("position","absolute"),o},_setPositionRelative:function(){/^(?:r|a|f)/.test(this.element.css("position"))||(this.element[0].style.position="relative")},_adjustOffsetFromHelper:function(t){"string"==typeof t&&(t=t.split(" ")),e.isArray(t)&&(t={left:+t[0],top:+t[1]||0}),"left"in t&&(this.offset.click.left=t.left+this.margins.left),"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left),"top"in t&&(this.offset.click.top=t.top+this.margins.top),"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_isRootNode:function(e){return/(html|body)/i.test(e.tagName)||e===this.document[0]},_getParentOffset:function(){var t=this.offsetParent.offset(),i=this.document[0];return"absolute"===this.cssPosition&&this.scrollParent[0]!==i&&e.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop()),this._isRootNode(this.offsetParent[0])&&(t={top:0,left:0}),{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"!==this.cssPosition)return{top:0,left:0};var e=this.element.position(),t=this._isRootNode(this.scrollParent[0]);return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+(t?0:this.scrollParent.scrollTop()),left:e.left-(parseInt(this.helper.css("left"),10)||0)+(t?0:this.scrollParent.scrollLeft())}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t,i,n,o=this.options,r=this.document[0];return this.relativeContainer=null,o.containment?"window"===o.containment?void(this.containment=[e(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,e(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,e(window).scrollLeft()+e(window).width()-this.helperProportions.width-this.margins.left,e(window).scrollTop()+(e(window).height()||r.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]):"document"===o.containment?void(this.containment=[0,0,e(r).width()-this.helperProportions.width-this.margins.left,(e(r).height()||r.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]):o.containment.constructor===Array?void(this.containment=o.containment):("parent"===o.containment&&(o.containment=this.helper[0].parentNode),i=e(o.containment),n=i[0],void(n&&(t=/(scroll|auto)/.test(i.css("overflow")),this.containment=[(parseInt(i.css("borderLeftWidth"),10)||0)+(parseInt(i.css("paddingLeft"),10)||0),(parseInt(i.css("borderTopWidth"),10)||0)+(parseInt(i.css("paddingTop"),10)||0),(t?Math.max(n.scrollWidth,n.offsetWidth):n.offsetWidth)-(parseInt(i.css("borderRightWidth"),10)||0)-(parseInt(i.css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(t?Math.max(n.scrollHeight,n.offsetHeight):n.offsetHeight)-(parseInt(i.css("borderBottomWidth"),10)||0)-(parseInt(i.css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relativeContainer=i))):void(this.containment=null)},_convertPositionTo:function(e,t){t||(t=this.position);var i="absolute"===e?1:-1,n=this._isRootNode(this.scrollParent[0]);return{top:t.top+this.offset.relative.top*i+this.offset.parent.top*i-("fixed"===this.cssPosition?-this.offset.scroll.top:n?0:this.offset.scroll.top)*i,left:t.left+this.offset.relative.left*i+this.offset.parent.left*i-("fixed"===this.cssPosition?-this.offset.scroll.left:n?0:this.offset.scroll.left)*i}},_generatePosition:function(e,t){var i,n,o,r,s=this.options,a=this._isRootNode(this.scrollParent[0]),l=e.pageX,c=e.pageY;return a&&this.offset.scroll||(this.offset.scroll={top:this.scrollParent.scrollTop(),left:this.scrollParent.scrollLeft()}),t&&(this.containment&&(this.relativeContainer?(n=this.relativeContainer.offset(),i=[this.containment[0]+n.left,this.containment[1]+n.top,this.containment[2]+n.left,this.containment[3]+n.top]):i=this.containment,e.pageX-this.offset.click.left<i[0]&&(l=i[0]+this.offset.click.left),e.pageY-this.offset.click.top<i[1]&&(c=i[1]+this.offset.click.top),e.pageX-this.offset.click.left>i[2]&&(l=i[2]+this.offset.click.left),e.pageY-this.offset.click.top>i[3]&&(c=i[3]+this.offset.click.top)),s.grid&&(o=s.grid[1]?this.originalPageY+Math.round((c-this.originalPageY)/s.grid[1])*s.grid[1]:this.originalPageY,c=i?o-this.offset.click.top>=i[1]||o-this.offset.click.top>i[3]?o:o-this.offset.click.top>=i[1]?o-s.grid[1]:o+s.grid[1]:o,r=s.grid[0]?this.originalPageX+Math.round((l-this.originalPageX)/s.grid[0])*s.grid[0]:this.originalPageX,l=i?r-this.offset.click.left>=i[0]||r-this.offset.click.left>i[2]?r:r-this.offset.click.left>=i[0]?r-s.grid[0]:r+s.grid[0]:r),"y"===s.axis&&(l=this.originalPageX),"x"===s.axis&&(c=this.originalPageY)),{top:c-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.offset.scroll.top:a?0:this.offset.scroll.top),left:l-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.offset.scroll.left:a?0:this.offset.scroll.left)}},_clear:function(){this.helper.removeClass("ui-draggable-dragging"),this.helper[0]===this.element[0]||this.cancelHelperRemoval||this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1,this.destroyOnClear&&this.destroy()},_normalizeRightBottom:function(){"y"!==this.options.axis&&"auto"!==this.helper.css("right")&&(this.helper.width(this.helper.width()),this.helper.css("right","auto")),"x"!==this.options.axis&&"auto"!==this.helper.css("bottom")&&(this.helper.height(this.helper.height()),this.helper.css("bottom","auto"))},_trigger:function(t,i,n){return n=n||this._uiHash(),e.ui.plugin.call(this,t,[i,n,this],!0),/^(drag|start|stop)/.test(t)&&(this.positionAbs=this._convertPositionTo("absolute"),n.offset=this.positionAbs),e.Widget.prototype._trigger.call(this,t,i,n)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),e.ui.plugin.add("draggable","connectToSortable",{start:function(t,i,n){var o=e.extend({},i,{item:n.element});n.sortables=[],e(n.options.connectToSortable).each(function(){var i=e(this).sortable("instance");i&&!i.options.disabled&&(n.sortables.push(i),i.refreshPositions(),i._trigger("activate",t,o))})},stop:function(t,i,n){var o=e.extend({},i,{item:n.element});n.cancelHelperRemoval=!1,e.each(n.sortables,function(){var e=this;e.isOver?(e.isOver=0,n.cancelHelperRemoval=!0,e.cancelHelperRemoval=!1,e._storedCSS={position:e.placeholder.css("position"),top:e.placeholder.css("top"),left:e.placeholder.css("left")},e._mouseStop(t),e.options.helper=e.options._helper):(e.cancelHelperRemoval=!0,e._trigger("deactivate",t,o))})},drag:function(t,i,n){e.each(n.sortables,function(){var o=!1,r=this;r.positionAbs=n.positionAbs,r.helperProportions=n.helperProportions,r.offset.click=n.offset.click,r._intersectsWith(r.containerCache)&&(o=!0,e.each(n.sortables,function(){return this.positionAbs=n.positionAbs,this.helperProportions=n.helperProportions,this.offset.click=n.offset.click,this!==r&&this._intersectsWith(this.containerCache)&&e.contains(r.element[0],this.element[0])&&(o=!1),o})),o?(r.isOver||(r.isOver=1,n._parent=i.helper.parent(),r.currentItem=i.helper.appendTo(r.element).data("ui-sortable-item",!0),r.options._helper=r.options.helper,r.options.helper=function(){return i.helper[0]},t.target=r.currentItem[0],r._mouseCapture(t,!0),r._mouseStart(t,!0,!0),r.offset.click.top=n.offset.click.top,r.offset.click.left=n.offset.click.left,r.offset.parent.left-=n.offset.parent.left-r.offset.parent.left,r.offset.parent.top-=n.offset.parent.top-r.offset.parent.top,n._trigger("toSortable",t),n.dropped=r.element,e.each(n.sortables,function(){this.refreshPositions()}),n.currentItem=n.element,r.fromOutside=n),r.currentItem&&(r._mouseDrag(t),i.position=r.position)):r.isOver&&(r.isOver=0,r.cancelHelperRemoval=!0,r.options._revert=r.options.revert,r.options.revert=!1,r._trigger("out",t,r._uiHash(r)),r._mouseStop(t,!0),r.options.revert=r.options._revert,r.options.helper=r.options._helper,r.placeholder&&r.placeholder.remove(),i.helper.appendTo(n._parent),n._refreshOffsets(t),i.position=n._generatePosition(t,!0),n._trigger("fromSortable",t),n.dropped=!1,e.each(n.sortables,function(){this.refreshPositions()}))})}}),e.ui.plugin.add("draggable","cursor",{start:function(t,i,n){var o=e("body"),r=n.options;o.css("cursor")&&(r._cursor=o.css("cursor")),o.css("cursor",r.cursor)},stop:function(t,i,n){var o=n.options;o._cursor&&e("body").css("cursor",o._cursor)}}),e.ui.plugin.add("draggable","opacity",{start:function(t,i,n){var o=e(i.helper),r=n.options;o.css("opacity")&&(r._opacity=o.css("opacity")),o.css("opacity",r.opacity)},stop:function(t,i,n){var o=n.options;o._opacity&&e(i.helper).css("opacity",o._opacity)}}),e.ui.plugin.add("draggable","scroll",{start:function(e,t,i){i.scrollParentNotHidden||(i.scrollParentNotHidden=i.helper.scrollParent(!1)),i.scrollParentNotHidden[0]!==i.document[0]&&"HTML"!==i.scrollParentNotHidden[0].tagName&&(i.overflowOffset=i.scrollParentNotHidden.offset())},drag:function(t,i,n){var o=n.options,r=!1,s=n.scrollParentNotHidden[0],a=n.document[0];s!==a&&"HTML"!==s.tagName?(o.axis&&"x"===o.axis||(n.overflowOffset.top+s.offsetHeight-t.pageY<o.scrollSensitivity?s.scrollTop=r=s.scrollTop+o.scrollSpeed:t.pageY-n.overflowOffset.top<o.scrollSensitivity&&(s.scrollTop=r=s.scrollTop-o.scrollSpeed)),o.axis&&"y"===o.axis||(n.overflowOffset.left+s.offsetWidth-t.pageX<o.scrollSensitivity?s.scrollLeft=r=s.scrollLeft+o.scrollSpeed:t.pageX-n.overflowOffset.left<o.scrollSensitivity&&(s.scrollLeft=r=s.scrollLeft-o.scrollSpeed))):(o.axis&&"x"===o.axis||(t.pageY-e(a).scrollTop()<o.scrollSensitivity?r=e(a).scrollTop(e(a).scrollTop()-o.scrollSpeed):e(window).height()-(t.pageY-e(a).scrollTop())<o.scrollSensitivity&&(r=e(a).scrollTop(e(a).scrollTop()+o.scrollSpeed))),o.axis&&"y"===o.axis||(t.pageX-e(a).scrollLeft()<o.scrollSensitivity?r=e(a).scrollLeft(e(a).scrollLeft()-o.scrollSpeed):e(window).width()-(t.pageX-e(a).scrollLeft())<o.scrollSensitivity&&(r=e(a).scrollLeft(e(a).scrollLeft()+o.scrollSpeed)))),r!==!1&&e.ui.ddmanager&&!o.dropBehaviour&&e.ui.ddmanager.prepareOffsets(n,t)}}),e.ui.plugin.add("draggable","snap",{start:function(t,i,n){var o=n.options;n.snapElements=[],e(o.snap.constructor!==String?o.snap.items||":data(ui-draggable)":o.snap).each(function(){var t=e(this),i=t.offset();this!==n.element[0]&&n.snapElements.push({item:this,width:t.outerWidth(),height:t.outerHeight(),top:i.top,left:i.left})})},drag:function(t,i,n){var o,r,s,a,l,c,u,d,h,f,p=n.options,m=p.snapTolerance,g=i.offset.left,v=g+n.helperProportions.width,y=i.offset.top,b=y+n.helperProportions.height;for(h=n.snapElements.length-1;h>=0;h--)l=n.snapElements[h].left-n.margins.left,c=l+n.snapElements[h].width,u=n.snapElements[h].top-n.margins.top,d=u+n.snapElements[h].height,l-m>v||g>c+m||u-m>b||y>d+m||!e.contains(n.snapElements[h].item.ownerDocument,n.snapElements[h].item)?(n.snapElements[h].snapping&&n.options.snap.release&&n.options.snap.release.call(n.element,t,e.extend(n._uiHash(),{snapItem:n.snapElements[h].item})),n.snapElements[h].snapping=!1):("inner"!==p.snapMode&&(o=Math.abs(u-b)<=m,r=Math.abs(d-y)<=m,s=Math.abs(l-v)<=m,a=Math.abs(c-g)<=m,o&&(i.position.top=n._convertPositionTo("relative",{top:u-n.helperProportions.height,left:0}).top),r&&(i.position.top=n._convertPositionTo("relative",{top:d,left:0}).top),s&&(i.position.left=n._convertPositionTo("relative",{top:0,left:l-n.helperProportions.width}).left),a&&(i.position.left=n._convertPositionTo("relative",{top:0,left:c}).left)),f=o||r||s||a,"outer"!==p.snapMode&&(o=Math.abs(u-y)<=m,r=Math.abs(d-b)<=m,s=Math.abs(l-g)<=m,a=Math.abs(c-v)<=m,o&&(i.position.top=n._convertPositionTo("relative",{top:u,left:0}).top),r&&(i.position.top=n._convertPositionTo("relative",{top:d-n.helperProportions.height,left:0}).top),s&&(i.position.left=n._convertPositionTo("relative",{top:0,left:l}).left),a&&(i.position.left=n._convertPositionTo("relative",{top:0,left:c-n.helperProportions.width}).left)),!n.snapElements[h].snapping&&(o||r||s||a||f)&&n.options.snap.snap&&n.options.snap.snap.call(n.element,t,e.extend(n._uiHash(),{snapItem:n.snapElements[h].item})),n.snapElements[h].snapping=o||r||s||a||f)}}),e.ui.plugin.add("draggable","stack",{start:function(t,i,n){var o,r=n.options,s=e.makeArray(e(r.stack)).sort(function(t,i){return(parseInt(e(t).css("zIndex"),10)||0)-(parseInt(e(i).css("zIndex"),10)||0)});s.length&&(o=parseInt(e(s[0]).css("zIndex"),10)||0,e(s).each(function(t){e(this).css("zIndex",o+t)}),this.css("zIndex",o+s.length))}}),e.ui.plugin.add("draggable","zIndex",{start:function(t,i,n){var o=e(i.helper),r=n.options;o.css("zIndex")&&(r._zIndex=o.css("zIndex")),o.css("zIndex",r.zIndex)},stop:function(t,i,n){var o=n.options;o._zIndex&&e(i.helper).css("zIndex",o._zIndex)}});e.ui.draggable,e.widget("ui.sortable",e.ui.mouse,{version:"1.11.4",widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1e3,activate:null,beforeStop:null,change:null,deactivate:null,out:null,over:null,receive:null,remove:null,sort:null,start:null,stop:null,update:null},_isOverAxis:function(e,t,i){return e>=t&&t+i>e},_isFloating:function(e){return/left|right/.test(e.css("float"))||/inline|table-cell/.test(e.css("display"))},_create:function(){this.containerCache={},this.element.addClass("ui-sortable"),this.refresh(),this.offset=this.element.offset(),this._mouseInit(),this._setHandleClassName(),this.ready=!0},_setOption:function(e,t){this._super(e,t),"handle"===e&&this._setHandleClassName()},_setHandleClassName:function(){this.element.find(".ui-sortable-handle").removeClass("ui-sortable-handle"),e.each(this.items,function(){(this.instance.options.handle?this.item.find(this.instance.options.handle):this.item).addClass("ui-sortable-handle")})},_destroy:function(){this.element.removeClass("ui-sortable ui-sortable-disabled").find(".ui-sortable-handle").removeClass("ui-sortable-handle"),this._mouseDestroy();for(var e=this.items.length-1;e>=0;e--)this.items[e].item.removeData(this.widgetName+"-item");return this},_mouseCapture:function(t,i){var n=null,o=!1,r=this;return this.reverting?!1:this.options.disabled||"static"===this.options.type?!1:(this._refreshItems(t),e(t.target).parents().each(function(){return e.data(this,r.widgetName+"-item")===r?(n=e(this),!1):void 0}),e.data(t.target,r.widgetName+"-item")===r&&(n=e(t.target)),n&&(!this.options.handle||i||(e(this.options.handle,n).find("*").addBack().each(function(){this===t.target&&(o=!0)}),o))?(this.currentItem=n,this._removeCurrentsFromItems(),!0):!1)},_mouseStart:function(t,i,n){var o,r,s=this.options;if(this.currentContainer=this,this.refreshPositions(),this.helper=this._createHelper(t),this._cacheHelperProportions(),this._cacheMargins(),this.scrollParent=this.helper.scrollParent(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},e.extend(this.offset,{click:{left:t.pageX-this.offset.left,top:t.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),this.originalPosition=this._generatePosition(t),this.originalPageX=t.pageX,this.originalPageY=t.pageY,s.cursorAt&&this._adjustOffsetFromHelper(s.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!==this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),s.containment&&this._setContainment(),s.cursor&&"auto"!==s.cursor&&(r=this.document.find("body"),this.storedCursor=r.css("cursor"),r.css("cursor",s.cursor),this.storedStylesheet=e("<style>*{ cursor: "+s.cursor+" !important; }</style>").appendTo(r)),s.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",s.opacity)),s.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",s.zIndex)),this.scrollParent[0]!==this.document[0]&&"HTML"!==this.scrollParent[0].tagName&&(this.overflowOffset=this.scrollParent.offset()),this._trigger("start",t,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions(),!n)for(o=this.containers.length-1;o>=0;o--)this.containers[o]._trigger("activate",t,this._uiHash(this));return e.ui.ddmanager&&(e.ui.ddmanager.current=this),e.ui.ddmanager&&!s.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t),this.dragging=!0,this.helper.addClass("ui-sortable-helper"),this._mouseDrag(t),!0},_mouseDrag:function(t){var i,n,o,r,s=this.options,a=!1;for(this.position=this._generatePosition(t),this.positionAbs=this._convertPositionTo("absolute"),this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs),this.options.scroll&&(this.scrollParent[0]!==this.document[0]&&"HTML"!==this.scrollParent[0].tagName?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-t.pageY<s.scrollSensitivity?this.scrollParent[0].scrollTop=a=this.scrollParent[0].scrollTop+s.scrollSpeed:t.pageY-this.overflowOffset.top<s.scrollSensitivity&&(this.scrollParent[0].scrollTop=a=this.scrollParent[0].scrollTop-s.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-t.pageX<s.scrollSensitivity?this.scrollParent[0].scrollLeft=a=this.scrollParent[0].scrollLeft+s.scrollSpeed:t.pageX-this.overflowOffset.left<s.scrollSensitivity&&(this.scrollParent[0].scrollLeft=a=this.scrollParent[0].scrollLeft-s.scrollSpeed)):(t.pageY-this.document.scrollTop()<s.scrollSensitivity?a=this.document.scrollTop(this.document.scrollTop()-s.scrollSpeed):this.window.height()-(t.pageY-this.document.scrollTop())<s.scrollSensitivity&&(a=this.document.scrollTop(this.document.scrollTop()+s.scrollSpeed)),t.pageX-this.document.scrollLeft()<s.scrollSensitivity?a=this.document.scrollLeft(this.document.scrollLeft()-s.scrollSpeed):this.window.width()-(t.pageX-this.document.scrollLeft())<s.scrollSensitivity&&(a=this.document.scrollLeft(this.document.scrollLeft()+s.scrollSpeed))),a!==!1&&e.ui.ddmanager&&!s.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t)),this.positionAbs=this._convertPositionTo("absolute"),this.options.axis&&"y"===this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"===this.options.axis||(this.helper[0].style.top=this.position.top+"px"),i=this.items.length-1;i>=0;i--)if(n=this.items[i],o=n.item[0],r=this._intersectsWithPointer(n),r&&n.instance===this.currentContainer&&o!==this.currentItem[0]&&this.placeholder[1===r?"next":"prev"]()[0]!==o&&!e.contains(this.placeholder[0],o)&&("semi-dynamic"===this.options.type?!e.contains(this.element[0],o):!0)){if(this.direction=1===r?"down":"up","pointer"!==this.options.tolerance&&!this._intersectsWithSides(n))break;this._rearrange(t,n),this._trigger("change",t,this._uiHash());break}return this._contactContainers(t),e.ui.ddmanager&&e.ui.ddmanager.drag(this,t),this._trigger("sort",t,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(t,i){if(t){if(e.ui.ddmanager&&!this.options.dropBehaviour&&e.ui.ddmanager.drop(this,t),this.options.revert){var n=this,o=this.placeholder.offset(),r=this.options.axis,s={};r&&"x"!==r||(s.left=o.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]===this.document[0].body?0:this.offsetParent[0].scrollLeft)),r&&"y"!==r||(s.top=o.top-this.offset.parent.top-this.margins.top+(this.offsetParent[0]===this.document[0].body?0:this.offsetParent[0].scrollTop)),this.reverting=!0,e(this.helper).animate(s,parseInt(this.options.revert,10)||500,function(){n._clear(t)})}else this._clear(t,i);return!1}},cancel:function(){if(this.dragging){this._mouseUp({target:null}),"original"===this.options.helper?this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper"):this.currentItem.show();for(var t=this.containers.length-1;t>=0;t--)this.containers[t]._trigger("deactivate",null,this._uiHash(this)),this.containers[t].containerCache.over&&(this.containers[t]._trigger("out",null,this._uiHash(this)),this.containers[t].containerCache.over=0)}return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),"original"!==this.options.helper&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),e.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?e(this.domPosition.prev).after(this.currentItem):e(this.domPosition.parent).prepend(this.currentItem)),this},serialize:function(t){var i=this._getItemsAsjQuery(t&&t.connected),n=[];return t=t||{},e(i).each(function(){var i=(e(t.item||this).attr(t.attribute||"id")||"").match(t.expression||/(.+)[\-=_](.+)/);i&&n.push((t.key||i[1]+"[]")+"="+(t.key&&t.expression?i[1]:i[2]))}),!n.length&&t.key&&n.push(t.key+"="),n.join("&")},toArray:function(t){var i=this._getItemsAsjQuery(t&&t.connected),n=[];return t=t||{},i.each(function(){n.push(e(t.item||this).attr(t.attribute||"id")||"")}),n},_intersectsWith:function(e){var t=this.positionAbs.left,i=t+this.helperProportions.width,n=this.positionAbs.top,o=n+this.helperProportions.height,r=e.left,s=r+e.width,a=e.top,l=a+e.height,c=this.offset.click.top,u=this.offset.click.left,d="x"===this.options.axis||n+c>a&&l>n+c,h="y"===this.options.axis||t+u>r&&s>t+u,f=d&&h;return"pointer"===this.options.tolerance||this.options.forcePointerForContainers||"pointer"!==this.options.tolerance&&this.helperProportions[this.floating?"width":"height"]>e[this.floating?"width":"height"]?f:r<t+this.helperProportions.width/2&&i-this.helperProportions.width/2<s&&a<n+this.helperProportions.height/2&&o-this.helperProportions.height/2<l},_intersectsWithPointer:function(e){var t="x"===this.options.axis||this._isOverAxis(this.positionAbs.top+this.offset.click.top,e.top,e.height),i="y"===this.options.axis||this._isOverAxis(this.positionAbs.left+this.offset.click.left,e.left,e.width),n=t&&i,o=this._getDragVerticalDirection(),r=this._getDragHorizontalDirection();return n?this.floating?r&&"right"===r||"down"===o?2:1:o&&("down"===o?2:1):!1},_intersectsWithSides:function(e){var t=this._isOverAxis(this.positionAbs.top+this.offset.click.top,e.top+e.height/2,e.height),i=this._isOverAxis(this.positionAbs.left+this.offset.click.left,e.left+e.width/2,e.width),n=this._getDragVerticalDirection(),o=this._getDragHorizontalDirection();return this.floating&&o?"right"===o&&i||"left"===o&&!i:n&&("down"===n&&t||"up"===n&&!t)},_getDragVerticalDirection:function(){var e=this.positionAbs.top-this.lastPositionAbs.top;return 0!==e&&(e>0?"down":"up")},_getDragHorizontalDirection:function(){var e=this.positionAbs.left-this.lastPositionAbs.left;return 0!==e&&(e>0?"right":"left")},refresh:function(e){return this._refreshItems(e),this._setHandleClassName(),this.refreshPositions(),this},_connectWith:function(){var e=this.options;return e.connectWith.constructor===String?[e.connectWith]:e.connectWith},_getItemsAsjQuery:function(t){function i(){a.push(this)}var n,o,r,s,a=[],l=[],c=this._connectWith();if(c&&t)for(n=c.length-1;n>=0;n--)for(r=e(c[n],this.document[0]),o=r.length-1;o>=0;o--)s=e.data(r[o],this.widgetFullName),s&&s!==this&&!s.options.disabled&&l.push([e.isFunction(s.options.items)?s.options.items.call(s.element):e(s.options.items,s.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),s]);for(l.push([e.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):e(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]),n=l.length-1;n>=0;n--)l[n][0].each(i);return e(a)},_removeCurrentsFromItems:function(){var t=this.currentItem.find(":data("+this.widgetName+"-item)");this.items=e.grep(this.items,function(e){for(var i=0;i<t.length;i++)if(t[i]===e.item[0])return!1;return!0})},_refreshItems:function(t){this.items=[],this.containers=[this];var i,n,o,r,s,a,l,c,u=this.items,d=[[e.isFunction(this.options.items)?this.options.items.call(this.element[0],t,{item:this.currentItem}):e(this.options.items,this.element),this]],h=this._connectWith();if(h&&this.ready)for(i=h.length-1;i>=0;i--)for(o=e(h[i],this.document[0]),n=o.length-1;n>=0;n--)r=e.data(o[n],this.widgetFullName),r&&r!==this&&!r.options.disabled&&(d.push([e.isFunction(r.options.items)?r.options.items.call(r.element[0],t,{item:this.currentItem}):e(r.options.items,r.element),r]),this.containers.push(r));for(i=d.length-1;i>=0;i--)for(s=d[i][1],a=d[i][0],n=0,c=a.length;c>n;n++)l=e(a[n]),l.data(this.widgetName+"-item",s),u.push({item:l,instance:s,width:0,height:0,left:0,top:0})},refreshPositions:function(t){this.floating=this.items.length?"x"===this.options.axis||this._isFloating(this.items[0].item):!1,this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset());var i,n,o,r;for(i=this.items.length-1;i>=0;i--)n=this.items[i],n.instance!==this.currentContainer&&this.currentContainer&&n.item[0]!==this.currentItem[0]||(o=this.options.toleranceElement?e(this.options.toleranceElement,n.item):n.item,t||(n.width=o.outerWidth(),n.height=o.outerHeight()),r=o.offset(),n.left=r.left,n.top=r.top);if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(i=this.containers.length-1;i>=0;i--)r=this.containers[i].element.offset(),this.containers[i].containerCache.left=r.left,this.containers[i].containerCache.top=r.top,this.containers[i].containerCache.width=this.containers[i].element.outerWidth(),this.containers[i].containerCache.height=this.containers[i].element.outerHeight();return this},_createPlaceholder:function(t){t=t||this;var i,n=t.options;n.placeholder&&n.placeholder.constructor!==String||(i=n.placeholder,n.placeholder={element:function(){var n=t.currentItem[0].nodeName.toLowerCase(),o=e("<"+n+">",t.document[0]).addClass(i||t.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper");return"tbody"===n?t._createTrPlaceholder(t.currentItem.find("tr").eq(0),e("<tr>",t.document[0]).appendTo(o)):"tr"===n?t._createTrPlaceholder(t.currentItem,o):"img"===n&&o.attr("src",t.currentItem.attr("src")),i||o.css("visibility","hidden"),o},update:function(e,o){(!i||n.forcePlaceholderSize)&&(o.height()||o.height(t.currentItem.innerHeight()-parseInt(t.currentItem.css("paddingTop")||0,10)-parseInt(t.currentItem.css("paddingBottom")||0,10)),o.width()||o.width(t.currentItem.innerWidth()-parseInt(t.currentItem.css("paddingLeft")||0,10)-parseInt(t.currentItem.css("paddingRight")||0,10)))}}),t.placeholder=e(n.placeholder.element.call(t.element,t.currentItem)),t.currentItem.after(t.placeholder),n.placeholder.update(t,t.placeholder)},_createTrPlaceholder:function(t,i){var n=this;t.children().each(function(){e("<td>&#160;</td>",n.document[0]).attr("colspan",e(this).attr("colspan")||1).appendTo(i)})},_contactContainers:function(t){var i,n,o,r,s,a,l,c,u,d,h=null,f=null;for(i=this.containers.length-1;i>=0;i--)if(!e.contains(this.currentItem[0],this.containers[i].element[0]))if(this._intersectsWith(this.containers[i].containerCache)){if(h&&e.contains(this.containers[i].element[0],h.element[0]))continue;h=this.containers[i],f=i}else this.containers[i].containerCache.over&&(this.containers[i]._trigger("out",t,this._uiHash(this)),this.containers[i].containerCache.over=0);if(h)if(1===this.containers.length)this.containers[f].containerCache.over||(this.containers[f]._trigger("over",t,this._uiHash(this)),this.containers[f].containerCache.over=1);else{for(o=1e4,r=null,u=h.floating||this._isFloating(this.currentItem),s=u?"left":"top",a=u?"width":"height",d=u?"clientX":"clientY",n=this.items.length-1;n>=0;n--)e.contains(this.containers[f].element[0],this.items[n].item[0])&&this.items[n].item[0]!==this.currentItem[0]&&(l=this.items[n].item.offset()[s],c=!1,t[d]-l>this.items[n][a]/2&&(c=!0),Math.abs(t[d]-l)<o&&(o=Math.abs(t[d]-l),r=this.items[n],this.direction=c?"up":"down"));if(!r&&!this.options.dropOnEmpty)return;if(this.currentContainer===this.containers[f])return void(this.currentContainer.containerCache.over||(this.containers[f]._trigger("over",t,this._uiHash()),this.currentContainer.containerCache.over=1));r?this._rearrange(t,r,null,!0):this._rearrange(t,null,this.containers[f].element,!0),this._trigger("change",t,this._uiHash()),this.containers[f]._trigger("change",t,this._uiHash(this)),this.currentContainer=this.containers[f],this.options.placeholder.update(this.currentContainer,this.placeholder),this.containers[f]._trigger("over",t,this._uiHash(this)),this.containers[f].containerCache.over=1}},_createHelper:function(t){var i=this.options,n=e.isFunction(i.helper)?e(i.helper.apply(this.element[0],[t,this.currentItem])):"clone"===i.helper?this.currentItem.clone():this.currentItem;return n.parents("body").length||e("parent"!==i.appendTo?i.appendTo:this.currentItem[0].parentNode)[0].appendChild(n[0]),n[0]===this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}),(!n[0].style.width||i.forceHelperSize)&&n.width(this.currentItem.width()),(!n[0].style.height||i.forceHelperSize)&&n.height(this.currentItem.height()),n},_adjustOffsetFromHelper:function(t){"string"==typeof t&&(t=t.split(" ")),e.isArray(t)&&(t={left:+t[0],top:+t[1]||0}),"left"in t&&(this.offset.click.left=t.left+this.margins.left),"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left),"top"in t&&(this.offset.click.top=t.top+this.margins.top),"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var t=this.offsetParent.offset();return"absolute"===this.cssPosition&&this.scrollParent[0]!==this.document[0]&&e.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]===this.document[0].body||this.offsetParent[0].tagName&&"html"===this.offsetParent[0].tagName.toLowerCase()&&e.ui.ie)&&(t={top:0,left:0}),{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"===this.cssPosition){var e=this.currentItem.position();return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:e.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t,i,n,o=this.options;"parent"===o.containment&&(o.containment=this.helper[0].parentNode),("document"===o.containment||"window"===o.containment)&&(this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,"document"===o.containment?this.document.width():this.window.width()-this.helperProportions.width-this.margins.left,("document"===o.containment?this.document.width():this.window.height()||this.document[0].body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),/^(document|window|parent)$/.test(o.containment)||(t=e(o.containment)[0],i=e(o.containment).offset(),n="hidden"!==e(t).css("overflow"),this.containment=[i.left+(parseInt(e(t).css("borderLeftWidth"),10)||0)+(parseInt(e(t).css("paddingLeft"),10)||0)-this.margins.left,i.top+(parseInt(e(t).css("borderTopWidth"),10)||0)+(parseInt(e(t).css("paddingTop"),10)||0)-this.margins.top,i.left+(n?Math.max(t.scrollWidth,t.offsetWidth):t.offsetWidth)-(parseInt(e(t).css("borderLeftWidth"),10)||0)-(parseInt(e(t).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,i.top+(n?Math.max(t.scrollHeight,t.offsetHeight):t.offsetHeight)-(parseInt(e(t).css("borderTopWidth"),10)||0)-(parseInt(e(t).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top])
},_convertPositionTo:function(t,i){i||(i=this.position);var n="absolute"===t?1:-1,o="absolute"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,r=/(html|body)/i.test(o[0].tagName);return{top:i.top+this.offset.relative.top*n+this.offset.parent.top*n-("fixed"===this.cssPosition?-this.scrollParent.scrollTop():r?0:o.scrollTop())*n,left:i.left+this.offset.relative.left*n+this.offset.parent.left*n-("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():r?0:o.scrollLeft())*n}},_generatePosition:function(t){var i,n,o=this.options,r=t.pageX,s=t.pageY,a="absolute"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,l=/(html|body)/i.test(a[0].tagName);return"relative"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&this.scrollParent[0]!==this.offsetParent[0]||(this.offset.relative=this._getRelativeOffset()),this.originalPosition&&(this.containment&&(t.pageX-this.offset.click.left<this.containment[0]&&(r=this.containment[0]+this.offset.click.left),t.pageY-this.offset.click.top<this.containment[1]&&(s=this.containment[1]+this.offset.click.top),t.pageX-this.offset.click.left>this.containment[2]&&(r=this.containment[2]+this.offset.click.left),t.pageY-this.offset.click.top>this.containment[3]&&(s=this.containment[3]+this.offset.click.top)),o.grid&&(i=this.originalPageY+Math.round((s-this.originalPageY)/o.grid[1])*o.grid[1],s=this.containment?i-this.offset.click.top>=this.containment[1]&&i-this.offset.click.top<=this.containment[3]?i:i-this.offset.click.top>=this.containment[1]?i-o.grid[1]:i+o.grid[1]:i,n=this.originalPageX+Math.round((r-this.originalPageX)/o.grid[0])*o.grid[0],r=this.containment?n-this.offset.click.left>=this.containment[0]&&n-this.offset.click.left<=this.containment[2]?n:n-this.offset.click.left>=this.containment[0]?n-o.grid[0]:n+o.grid[0]:n)),{top:s-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.scrollParent.scrollTop():l?0:a.scrollTop()),left:r-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():l?0:a.scrollLeft())}},_rearrange:function(e,t,i,n){i?i[0].appendChild(this.placeholder[0]):t.item[0].parentNode.insertBefore(this.placeholder[0],"down"===this.direction?t.item[0]:t.item[0].nextSibling),this.counter=this.counter?++this.counter:1;var o=this.counter;this._delay(function(){o===this.counter&&this.refreshPositions(!n)})},_clear:function(e,t){function i(e,t,i){return function(n){i._trigger(e,n,t._uiHash(t))}}this.reverting=!1;var n,o=[];if(!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem),this._noFinalSort=null,this.helper[0]===this.currentItem[0]){for(n in this._storedCSS)("auto"===this._storedCSS[n]||"static"===this._storedCSS[n])&&(this._storedCSS[n]="");this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else this.currentItem.show();for(this.fromOutside&&!t&&o.push(function(e){this._trigger("receive",e,this._uiHash(this.fromOutside))}),!this.fromOutside&&this.domPosition.prev===this.currentItem.prev().not(".ui-sortable-helper")[0]&&this.domPosition.parent===this.currentItem.parent()[0]||t||o.push(function(e){this._trigger("update",e,this._uiHash())}),this!==this.currentContainer&&(t||(o.push(function(e){this._trigger("remove",e,this._uiHash())}),o.push(function(e){return function(t){e._trigger("receive",t,this._uiHash(this))}}.call(this,this.currentContainer)),o.push(function(e){return function(t){e._trigger("update",t,this._uiHash(this))}}.call(this,this.currentContainer)))),n=this.containers.length-1;n>=0;n--)t||o.push(i("deactivate",this,this.containers[n])),this.containers[n].containerCache.over&&(o.push(i("out",this,this.containers[n])),this.containers[n].containerCache.over=0);if(this.storedCursor&&(this.document.find("body").css("cursor",this.storedCursor),this.storedStylesheet.remove()),this._storedOpacity&&this.helper.css("opacity",this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex","auto"===this._storedZIndex?"":this._storedZIndex),this.dragging=!1,t||this._trigger("beforeStop",e,this._uiHash()),this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.cancelHelperRemoval||(this.helper[0]!==this.currentItem[0]&&this.helper.remove(),this.helper=null),!t){for(n=0;n<o.length;n++)o[n].call(this,e);this._trigger("stop",e,this._uiHash())}return this.fromOutside=!1,!this.cancelHelperRemoval},_trigger:function(){e.Widget.prototype._trigger.apply(this,arguments)===!1&&this.cancel()},_uiHash:function(t){var i=t||this;return{helper:i.helper,placeholder:i.placeholder||e([]),position:i.position,originalPosition:i.originalPosition,offset:i.positionAbs,item:i.currentItem,sender:t?t.element:null}}}),e.widget("ui.menu",{version:"1.11.4",defaultElement:"<ul>",delay:300,options:{icons:{submenu:"ui-icon-carat-1-e"},items:"> *",menus:"ul",position:{my:"left-1 top",at:"right top"},role:"menu",blur:null,focus:null,select:null},_create:function(){this.activeMenu=this.element,this.mouseHandled=!1,this.element.uniqueId().addClass("ui-menu ui-widget ui-widget-content").toggleClass("ui-menu-icons",!!this.element.find(".ui-icon").length).attr({role:this.options.role,tabIndex:0}),this.options.disabled&&this.element.addClass("ui-state-disabled").attr("aria-disabled","true"),this._on({"mousedown .ui-menu-item":function(e){e.preventDefault()},"click .ui-menu-item":function(t){var i=e(t.target);!this.mouseHandled&&i.not(".ui-state-disabled").length&&(this.select(t),t.isPropagationStopped()||(this.mouseHandled=!0),i.has(".ui-menu").length?this.expand(t):!this.element.is(":focus")&&e(this.document[0].activeElement).closest(".ui-menu").length&&(this.element.trigger("focus",[!0]),this.active&&1===this.active.parents(".ui-menu").length&&clearTimeout(this.timer)))},"mouseenter .ui-menu-item":function(t){if(!this.previousFilter){var i=e(t.currentTarget);i.siblings(".ui-state-active").removeClass("ui-state-active"),this.focus(t,i)}},mouseleave:"collapseAll","mouseleave .ui-menu":"collapseAll",focus:function(e,t){var i=this.active||this.element.find(this.options.items).eq(0);t||this.focus(e,i)},blur:function(t){this._delay(function(){e.contains(this.element[0],this.document[0].activeElement)||this.collapseAll(t)})},keydown:"_keydown"}),this.refresh(),this._on(this.document,{click:function(e){this._closeOnDocumentClick(e)&&this.collapseAll(e),this.mouseHandled=!1}})},_destroy:function(){this.element.removeAttr("aria-activedescendant").find(".ui-menu").addBack().removeClass("ui-menu ui-widget ui-widget-content ui-menu-icons ui-front").removeAttr("role").removeAttr("tabIndex").removeAttr("aria-labelledby").removeAttr("aria-expanded").removeAttr("aria-hidden").removeAttr("aria-disabled").removeUniqueId().show(),this.element.find(".ui-menu-item").removeClass("ui-menu-item").removeAttr("role").removeAttr("aria-disabled").removeUniqueId().removeClass("ui-state-hover").removeAttr("tabIndex").removeAttr("role").removeAttr("aria-haspopup").children().each(function(){var t=e(this);t.data("ui-menu-submenu-carat")&&t.remove()}),this.element.find(".ui-menu-divider").removeClass("ui-menu-divider ui-widget-content")},_keydown:function(t){var i,n,o,r,s=!0;switch(t.keyCode){case e.ui.keyCode.PAGE_UP:this.previousPage(t);break;case e.ui.keyCode.PAGE_DOWN:this.nextPage(t);break;case e.ui.keyCode.HOME:this._move("first","first",t);break;case e.ui.keyCode.END:this._move("last","last",t);break;case e.ui.keyCode.UP:this.previous(t);break;case e.ui.keyCode.DOWN:this.next(t);break;case e.ui.keyCode.LEFT:this.collapse(t);break;case e.ui.keyCode.RIGHT:this.active&&!this.active.is(".ui-state-disabled")&&this.expand(t);break;case e.ui.keyCode.ENTER:case e.ui.keyCode.SPACE:this._activate(t);break;case e.ui.keyCode.ESCAPE:this.collapse(t);break;default:s=!1,n=this.previousFilter||"",o=String.fromCharCode(t.keyCode),r=!1,clearTimeout(this.filterTimer),o===n?r=!0:o=n+o,i=this._filterMenuItems(o),i=r&&-1!==i.index(this.active.next())?this.active.nextAll(".ui-menu-item"):i,i.length||(o=String.fromCharCode(t.keyCode),i=this._filterMenuItems(o)),i.length?(this.focus(t,i),this.previousFilter=o,this.filterTimer=this._delay(function(){delete this.previousFilter},1e3)):delete this.previousFilter}s&&t.preventDefault()},_activate:function(e){this.active.is(".ui-state-disabled")||(this.active.is("[aria-haspopup='true']")?this.expand(e):this.select(e))},refresh:function(){var t,i,n=this,o=this.options.icons.submenu,r=this.element.find(this.options.menus);this.element.toggleClass("ui-menu-icons",!!this.element.find(".ui-icon").length),r.filter(":not(.ui-menu)").addClass("ui-menu ui-widget ui-widget-content ui-front").hide().attr({role:this.options.role,"aria-hidden":"true","aria-expanded":"false"}).each(function(){var t=e(this),i=t.parent(),n=e("<span>").addClass("ui-menu-icon ui-icon "+o).data("ui-menu-submenu-carat",!0);i.attr("aria-haspopup","true").prepend(n),t.attr("aria-labelledby",i.attr("id"))}),t=r.add(this.element),i=t.find(this.options.items),i.not(".ui-menu-item").each(function(){var t=e(this);n._isDivider(t)&&t.addClass("ui-widget-content ui-menu-divider")}),i.not(".ui-menu-item, .ui-menu-divider").addClass("ui-menu-item").uniqueId().attr({tabIndex:-1,role:this._itemRole()}),i.filter(".ui-state-disabled").attr("aria-disabled","true"),this.active&&!e.contains(this.element[0],this.active[0])&&this.blur()},_itemRole:function(){return{menu:"menuitem",listbox:"option"}[this.options.role]},_setOption:function(e,t){"icons"===e&&this.element.find(".ui-menu-icon").removeClass(this.options.icons.submenu).addClass(t.submenu),"disabled"===e&&this.element.toggleClass("ui-state-disabled",!!t).attr("aria-disabled",t),this._super(e,t)},focus:function(e,t){var i,n;this.blur(e,e&&"focus"===e.type),this._scrollIntoView(t),this.active=t.first(),n=this.active.addClass("ui-state-focus").removeClass("ui-state-active"),this.options.role&&this.element.attr("aria-activedescendant",n.attr("id")),this.active.parent().closest(".ui-menu-item").addClass("ui-state-active"),e&&"keydown"===e.type?this._close():this.timer=this._delay(function(){this._close()},this.delay),i=t.children(".ui-menu"),i.length&&e&&/^mouse/.test(e.type)&&this._startOpening(i),this.activeMenu=t.parent(),this._trigger("focus",e,{item:t})},_scrollIntoView:function(t){var i,n,o,r,s,a;this._hasScroll()&&(i=parseFloat(e.css(this.activeMenu[0],"borderTopWidth"))||0,n=parseFloat(e.css(this.activeMenu[0],"paddingTop"))||0,o=t.offset().top-this.activeMenu.offset().top-i-n,r=this.activeMenu.scrollTop(),s=this.activeMenu.height(),a=t.outerHeight(),0>o?this.activeMenu.scrollTop(r+o):o+a>s&&this.activeMenu.scrollTop(r+o-s+a))},blur:function(e,t){t||clearTimeout(this.timer),this.active&&(this.active.removeClass("ui-state-focus"),this.active=null,this._trigger("blur",e,{item:this.active}))},_startOpening:function(e){clearTimeout(this.timer),"true"===e.attr("aria-hidden")&&(this.timer=this._delay(function(){this._close(),this._open(e)},this.delay))},_open:function(t){var i=e.extend({of:this.active},this.options.position);clearTimeout(this.timer),this.element.find(".ui-menu").not(t.parents(".ui-menu")).hide().attr("aria-hidden","true"),t.show().removeAttr("aria-hidden").attr("aria-expanded","true").position(i)},collapseAll:function(t,i){clearTimeout(this.timer),this.timer=this._delay(function(){var n=i?this.element:e(t&&t.target).closest(this.element.find(".ui-menu"));n.length||(n=this.element),this._close(n),this.blur(t),this.activeMenu=n},this.delay)},_close:function(e){e||(e=this.active?this.active.parent():this.element),e.find(".ui-menu").hide().attr("aria-hidden","true").attr("aria-expanded","false").end().find(".ui-state-active").not(".ui-state-focus").removeClass("ui-state-active")},_closeOnDocumentClick:function(t){return!e(t.target).closest(".ui-menu").length},_isDivider:function(e){return!/[^\-\u2014\u2013\s]/.test(e.text())},collapse:function(e){var t=this.active&&this.active.parent().closest(".ui-menu-item",this.element);t&&t.length&&(this._close(),this.focus(e,t))},expand:function(e){var t=this.active&&this.active.children(".ui-menu ").find(this.options.items).first();t&&t.length&&(this._open(t.parent()),this._delay(function(){this.focus(e,t)}))},next:function(e){this._move("next","first",e)},previous:function(e){this._move("prev","last",e)},isFirstItem:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},isLastItem:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length},_move:function(e,t,i){var n;this.active&&(n="first"===e||"last"===e?this.active["first"===e?"prevAll":"nextAll"](".ui-menu-item").eq(-1):this.active[e+"All"](".ui-menu-item").eq(0)),n&&n.length&&this.active||(n=this.activeMenu.find(this.options.items)[t]()),this.focus(i,n)},nextPage:function(t){var i,n,o;return this.active?void(this.isLastItem()||(this._hasScroll()?(n=this.active.offset().top,o=this.element.height(),this.active.nextAll(".ui-menu-item").each(function(){return i=e(this),i.offset().top-n-o<0}),this.focus(t,i)):this.focus(t,this.activeMenu.find(this.options.items)[this.active?"last":"first"]()))):void this.next(t)},previousPage:function(t){var i,n,o;return this.active?void(this.isFirstItem()||(this._hasScroll()?(n=this.active.offset().top,o=this.element.height(),this.active.prevAll(".ui-menu-item").each(function(){return i=e(this),i.offset().top-n+o>0}),this.focus(t,i)):this.focus(t,this.activeMenu.find(this.options.items).first()))):void this.next(t)},_hasScroll:function(){return this.element.outerHeight()<this.element.prop("scrollHeight")},select:function(t){this.active=this.active||e(t.target).closest(".ui-menu-item");var i={item:this.active};this.active.has(".ui-menu").length||this.collapseAll(t,!0),this._trigger("select",t,i)},_filterMenuItems:function(t){var i=t.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&"),n=new RegExp("^"+i,"i");return this.activeMenu.find(this.options.items).filter(".ui-menu-item").filter(function(){return n.test(e.trim(e(this).text()))})}});e.widget("ui.autocomplete",{version:"1.11.4",defaultElement:"<input>",options:{appendTo:null,autoFocus:!1,delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null,change:null,close:null,focus:null,open:null,response:null,search:null,select:null},requestIndex:0,pending:0,_create:function(){var t,i,n,o=this.element[0].nodeName.toLowerCase(),r="textarea"===o,s="input"===o;this.isMultiLine=r?!0:s?!1:this.element.prop("isContentEditable"),this.valueMethod=this.element[r||s?"val":"text"],this.isNewMenu=!0,this.element.addClass("ui-autocomplete-input").attr("autocomplete","off"),this._on(this.element,{keydown:function(o){if(this.element.prop("readOnly"))return t=!0,n=!0,void(i=!0);t=!1,n=!1,i=!1;var r=e.ui.keyCode;switch(o.keyCode){case r.PAGE_UP:t=!0,this._move("previousPage",o);break;case r.PAGE_DOWN:t=!0,this._move("nextPage",o);break;case r.UP:t=!0,this._keyEvent("previous",o);break;case r.DOWN:t=!0,this._keyEvent("next",o);break;case r.ENTER:this.menu.active&&(t=!0,o.preventDefault(),this.menu.select(o));break;case r.TAB:this.menu.active&&this.menu.select(o);break;case r.ESCAPE:this.menu.element.is(":visible")&&(this.isMultiLine||this._value(this.term),this.close(o),o.preventDefault());break;default:i=!0,this._searchTimeout(o)}},keypress:function(n){if(t)return t=!1,void((!this.isMultiLine||this.menu.element.is(":visible"))&&n.preventDefault());if(!i){var o=e.ui.keyCode;switch(n.keyCode){case o.PAGE_UP:this._move("previousPage",n);break;case o.PAGE_DOWN:this._move("nextPage",n);break;case o.UP:this._keyEvent("previous",n);break;case o.DOWN:this._keyEvent("next",n)}}},input:function(e){return n?(n=!1,void e.preventDefault()):void this._searchTimeout(e)},focus:function(){this.selectedItem=null,this.previous=this._value()},blur:function(e){return this.cancelBlur?void delete this.cancelBlur:(clearTimeout(this.searching),this.close(e),void this._change(e))}}),this._initSource(),this.menu=e("<ul>").addClass("ui-autocomplete ui-front").appendTo(this._appendTo()).menu({role:null}).hide().menu("instance"),this._on(this.menu.element,{mousedown:function(t){t.preventDefault(),this.cancelBlur=!0,this._delay(function(){delete this.cancelBlur});var i=this.menu.element[0];e(t.target).closest(".ui-menu-item").length||this._delay(function(){var t=this;this.document.one("mousedown",function(n){n.target===t.element[0]||n.target===i||e.contains(i,n.target)||t.close()})})},menufocus:function(t,i){var n,o;return this.isNewMenu&&(this.isNewMenu=!1,t.originalEvent&&/^mouse/.test(t.originalEvent.type))?(this.menu.blur(),void this.document.one("mousemove",function(){e(t.target).trigger(t.originalEvent)})):(o=i.item.data("ui-autocomplete-item"),!1!==this._trigger("focus",t,{item:o})&&t.originalEvent&&/^key/.test(t.originalEvent.type)&&this._value(o.value),n=i.item.attr("aria-label")||o.value,void(n&&e.trim(n).length&&(this.liveRegion.children().hide(),e("<div>").text(n).appendTo(this.liveRegion))))},menuselect:function(e,t){var i=t.item.data("ui-autocomplete-item"),n=this.previous;this.element[0]!==this.document[0].activeElement&&(this.element.focus(),this.previous=n,this._delay(function(){this.previous=n,this.selectedItem=i})),!1!==this._trigger("select",e,{item:i})&&this._value(i.value),this.term=this._value(),this.close(e),this.selectedItem=i}}),this.liveRegion=e("<span>",{role:"status","aria-live":"assertive","aria-relevant":"additions"}).addClass("ui-helper-hidden-accessible").appendTo(this.document[0].body),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_destroy:function(){clearTimeout(this.searching),this.element.removeClass("ui-autocomplete-input").removeAttr("autocomplete"),this.menu.element.remove(),this.liveRegion.remove()},_setOption:function(e,t){this._super(e,t),"source"===e&&this._initSource(),"appendTo"===e&&this.menu.element.appendTo(this._appendTo()),"disabled"===e&&t&&this.xhr&&this.xhr.abort()},_appendTo:function(){var t=this.options.appendTo;return t&&(t=t.jquery||t.nodeType?e(t):this.document.find(t).eq(0)),t&&t[0]||(t=this.element.closest(".ui-front")),t.length||(t=this.document[0].body),t},_initSource:function(){var t,i,n=this;e.isArray(this.options.source)?(t=this.options.source,this.source=function(i,n){n(e.ui.autocomplete.filter(t,i.term))}):"string"==typeof this.options.source?(i=this.options.source,this.source=function(t,o){n.xhr&&n.xhr.abort(),n.xhr=e.ajax({url:i,data:t,dataType:"json",success:function(e){o(e)},error:function(){o([])}})}):this.source=this.options.source},_searchTimeout:function(e){clearTimeout(this.searching),this.searching=this._delay(function(){var t=this.term===this._value(),i=this.menu.element.is(":visible"),n=e.altKey||e.ctrlKey||e.metaKey||e.shiftKey;(!t||t&&!i&&!n)&&(this.selectedItem=null,this.search(null,e))},this.options.delay)},search:function(e,t){return e=null!=e?e:this._value(),this.term=this._value(),e.length<this.options.minLength?this.close(t):this._trigger("search",t)!==!1?this._search(e):void 0},_search:function(e){this.pending++,this.element.addClass("ui-autocomplete-loading"),this.cancelSearch=!1,this.source({term:e},this._response())},_response:function(){var t=++this.requestIndex;return e.proxy(function(e){t===this.requestIndex&&this.__response(e),this.pending--,this.pending||this.element.removeClass("ui-autocomplete-loading")},this)},__response:function(e){e&&(e=this._normalize(e)),this._trigger("response",null,{content:e}),!this.options.disabled&&e&&e.length&&!this.cancelSearch?(this._suggest(e),this._trigger("open")):this._close()},close:function(e){this.cancelSearch=!0,this._close(e)},_close:function(e){this.menu.element.is(":visible")&&(this.menu.element.hide(),this.menu.blur(),this.isNewMenu=!0,this._trigger("close",e))},_change:function(e){this.previous!==this._value()&&this._trigger("change",e,{item:this.selectedItem})},_normalize:function(t){return t.length&&t[0].label&&t[0].value?t:e.map(t,function(t){return"string"==typeof t?{label:t,value:t}:e.extend({},t,{label:t.label||t.value,value:t.value||t.label})})},_suggest:function(t){var i=this.menu.element.empty();this._renderMenu(i,t),this.isNewMenu=!0,this.menu.refresh(),i.show(),this._resizeMenu(),i.position(e.extend({of:this.element},this.options.position)),this.options.autoFocus&&this.menu.next()},_resizeMenu:function(){var e=this.menu.element;e.outerWidth(Math.max(e.width("").outerWidth()+1,this.element.outerWidth()))},_renderMenu:function(t,i){var n=this;e.each(i,function(e,i){n._renderItemData(t,i)})},_renderItemData:function(e,t){return this._renderItem(e,t).data("ui-autocomplete-item",t)},_renderItem:function(t,i){return e("<li>").text(i.label).appendTo(t)},_move:function(e,t){return this.menu.element.is(":visible")?this.menu.isFirstItem()&&/^previous/.test(e)||this.menu.isLastItem()&&/^next/.test(e)?(this.isMultiLine||this._value(this.term),void this.menu.blur()):void this.menu[e](t):void this.search(null,t)},widget:function(){return this.menu.element},_value:function(){return this.valueMethod.apply(this.element,arguments)},_keyEvent:function(e,t){(!this.isMultiLine||this.menu.element.is(":visible"))&&(this._move(e,t),t.preventDefault())}}),e.extend(e.ui.autocomplete,{escapeRegex:function(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")},filter:function(t,i){var n=new RegExp(e.ui.autocomplete.escapeRegex(i),"i");return e.grep(t,function(e){return n.test(e.label||e.value||e)})}}),e.widget("ui.autocomplete",e.ui.autocomplete,{options:{messages:{noResults:"No search results.",results:function(e){return e+(e>1?" results are":" result is")+" available, use up and down arrow keys to navigate."}}},__response:function(t){var i;this._superApply(arguments),this.options.disabled||this.cancelSearch||(i=t&&t.length?this.options.messages.results(t.length):this.options.messages.noResults,this.liveRegion.children().hide(),e("<div>").text(i).appendTo(this.liveRegion))}});var s=(e.ui.autocomplete,"ui-effects-"),a=e;e.effects={effect:{}},function(e,t){function i(e,t,i){var n=d[t.type]||{};return null==e?i||!t.def?null:t.def:(e=n.floor?~~e:parseFloat(e),isNaN(e)?t.def:n.mod?(e+n.mod)%n.mod:0>e?0:n.max<e?n.max:e)}function n(t){var i=c(),n=i._rgba=[];return t=t.toLowerCase(),p(l,function(e,o){var r,s=o.re.exec(t),a=s&&o.parse(s),l=o.space||"rgba";return a?(r=i[l](a),i[u[l].cache]=r[u[l].cache],n=i._rgba=r._rgba,!1):void 0}),n.length?("0,0,0,0"===n.join()&&e.extend(n,r.transparent),i):r[t]}function o(e,t,i){return i=(i+1)%1,1>6*i?e+(t-e)*i*6:1>2*i?t:2>3*i?e+(t-e)*(2/3-i)*6:e}var r,s="backgroundColor borderBottomColor borderLeftColor borderRightColor borderTopColor color columnRuleColor outlineColor textDecorationColor textEmphasisColor",a=/^([\-+])=\s*(\d+\.?\d*)/,l=[{re:/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(e){return[e[1],e[2],e[3],e[4]]}},{re:/rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(e){return[2.55*e[1],2.55*e[2],2.55*e[3],e[4]]}},{re:/#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})/,parse:function(e){return[parseInt(e[1],16),parseInt(e[2],16),parseInt(e[3],16)]}},{re:/#([a-f0-9])([a-f0-9])([a-f0-9])/,parse:function(e){return[parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16)]}},{re:/hsla?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,space:"hsla",parse:function(e){return[e[1],e[2]/100,e[3]/100,e[4]]}}],c=e.Color=function(t,i,n,o){return new e.Color.fn.parse(t,i,n,o)},u={rgba:{props:{red:{idx:0,type:"byte"},green:{idx:1,type:"byte"},blue:{idx:2,type:"byte"}}},hsla:{props:{hue:{idx:0,type:"degrees"},saturation:{idx:1,type:"percent"},lightness:{idx:2,type:"percent"}}}},d={"byte":{floor:!0,max:255},percent:{max:1},degrees:{mod:360,floor:!0}},h=c.support={},f=e("<p>")[0],p=e.each;f.style.cssText="background-color:rgba(1,1,1,.5)",h.rgba=f.style.backgroundColor.indexOf("rgba")>-1,p(u,function(e,t){t.cache="_"+e,t.props.alpha={idx:3,type:"percent",def:1}}),c.fn=e.extend(c.prototype,{parse:function(o,s,a,l){if(o===t)return this._rgba=[null,null,null,null],this;(o.jquery||o.nodeType)&&(o=e(o).css(s),s=t);var d=this,h=e.type(o),f=this._rgba=[];return s!==t&&(o=[o,s,a,l],h="array"),"string"===h?this.parse(n(o)||r._default):"array"===h?(p(u.rgba.props,function(e,t){f[t.idx]=i(o[t.idx],t)}),this):"object"===h?(o instanceof c?p(u,function(e,t){o[t.cache]&&(d[t.cache]=o[t.cache].slice())}):p(u,function(t,n){var r=n.cache;p(n.props,function(e,t){if(!d[r]&&n.to){if("alpha"===e||null==o[e])return;d[r]=n.to(d._rgba)}d[r][t.idx]=i(o[e],t,!0)}),d[r]&&e.inArray(null,d[r].slice(0,3))<0&&(d[r][3]=1,n.from&&(d._rgba=n.from(d[r])))}),this):void 0},is:function(e){var t=c(e),i=!0,n=this;return p(u,function(e,o){var r,s=t[o.cache];return s&&(r=n[o.cache]||o.to&&o.to(n._rgba)||[],p(o.props,function(e,t){return null!=s[t.idx]?i=s[t.idx]===r[t.idx]:void 0})),i}),i},_space:function(){var e=[],t=this;return p(u,function(i,n){t[n.cache]&&e.push(i)}),e.pop()},transition:function(e,t){var n=c(e),o=n._space(),r=u[o],s=0===this.alpha()?c("transparent"):this,a=s[r.cache]||r.to(s._rgba),l=a.slice();return n=n[r.cache],p(r.props,function(e,o){var r=o.idx,s=a[r],c=n[r],u=d[o.type]||{};null!==c&&(null===s?l[r]=c:(u.mod&&(c-s>u.mod/2?s+=u.mod:s-c>u.mod/2&&(s-=u.mod)),l[r]=i((c-s)*t+s,o)))}),this[o](l)},blend:function(t){if(1===this._rgba[3])return this;var i=this._rgba.slice(),n=i.pop(),o=c(t)._rgba;return c(e.map(i,function(e,t){return(1-n)*o[t]+n*e}))},toRgbaString:function(){var t="rgba(",i=e.map(this._rgba,function(e,t){return null==e?t>2?1:0:e});return 1===i[3]&&(i.pop(),t="rgb("),t+i.join()+")"},toHslaString:function(){var t="hsla(",i=e.map(this.hsla(),function(e,t){return null==e&&(e=t>2?1:0),t&&3>t&&(e=Math.round(100*e)+"%"),e});return 1===i[3]&&(i.pop(),t="hsl("),t+i.join()+")"},toHexString:function(t){var i=this._rgba.slice(),n=i.pop();return t&&i.push(~~(255*n)),"#"+e.map(i,function(e){return e=(e||0).toString(16),1===e.length?"0"+e:e}).join("")},toString:function(){return 0===this._rgba[3]?"transparent":this.toRgbaString()}}),c.fn.parse.prototype=c.fn,u.hsla.to=function(e){if(null==e[0]||null==e[1]||null==e[2])return[null,null,null,e[3]];var t,i,n=e[0]/255,o=e[1]/255,r=e[2]/255,s=e[3],a=Math.max(n,o,r),l=Math.min(n,o,r),c=a-l,u=a+l,d=.5*u;return t=l===a?0:n===a?60*(o-r)/c+360:o===a?60*(r-n)/c+120:60*(n-o)/c+240,i=0===c?0:.5>=d?c/u:c/(2-u),[Math.round(t)%360,i,d,null==s?1:s]},u.hsla.from=function(e){if(null==e[0]||null==e[1]||null==e[2])return[null,null,null,e[3]];var t=e[0]/360,i=e[1],n=e[2],r=e[3],s=.5>=n?n*(1+i):n+i-n*i,a=2*n-s;return[Math.round(255*o(a,s,t+1/3)),Math.round(255*o(a,s,t)),Math.round(255*o(a,s,t-1/3)),r]},p(u,function(n,o){var r=o.props,s=o.cache,l=o.to,u=o.from;c.fn[n]=function(n){if(l&&!this[s]&&(this[s]=l(this._rgba)),n===t)return this[s].slice();var o,a=e.type(n),d="array"===a||"object"===a?n:arguments,h=this[s].slice();return p(r,function(e,t){var n=d["object"===a?e:t.idx];null==n&&(n=h[t.idx]),h[t.idx]=i(n,t)}),u?(o=c(u(h)),o[s]=h,o):c(h)},p(r,function(t,i){c.fn[t]||(c.fn[t]=function(o){var r,s=e.type(o),l="alpha"===t?this._hsla?"hsla":"rgba":n,c=this[l](),u=c[i.idx];return"undefined"===s?u:("function"===s&&(o=o.call(this,u),s=e.type(o)),null==o&&i.empty?this:("string"===s&&(r=a.exec(o),r&&(o=u+parseFloat(r[2])*("+"===r[1]?1:-1))),c[i.idx]=o,this[l](c)))})})}),c.hook=function(t){var i=t.split(" ");p(i,function(t,i){e.cssHooks[i]={set:function(t,o){var r,s,a="";if("transparent"!==o&&("string"!==e.type(o)||(r=n(o)))){if(o=c(r||o),!h.rgba&&1!==o._rgba[3]){for(s="backgroundColor"===i?t.parentNode:t;(""===a||"transparent"===a)&&s&&s.style;)try{a=e.css(s,"backgroundColor"),s=s.parentNode}catch(l){}o=o.blend(a&&"transparent"!==a?a:"_default")}o=o.toRgbaString()}try{t.style[i]=o}catch(l){}}},e.fx.step[i]=function(t){t.colorInit||(t.start=c(t.elem,i),t.end=c(t.end),t.colorInit=!0),e.cssHooks[i].set(t.elem,t.start.transition(t.end,t.pos))}})},c.hook(s),e.cssHooks.borderColor={expand:function(e){var t={};return p(["Top","Right","Bottom","Left"],function(i,n){t["border"+n+"Color"]=e}),t}},r=e.Color.names={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00",transparent:[null,null,null,0],_default:"#ffffff"}}(a),function(){function t(t){var i,n,o=t.ownerDocument.defaultView?t.ownerDocument.defaultView.getComputedStyle(t,null):t.currentStyle,r={};if(o&&o.length&&o[0]&&o[o[0]])for(n=o.length;n--;)i=o[n],"string"==typeof o[i]&&(r[e.camelCase(i)]=o[i]);else for(i in o)"string"==typeof o[i]&&(r[i]=o[i]);return r}function i(t,i){var n,r,s={};for(n in i)r=i[n],t[n]!==r&&(o[n]||(e.fx.step[n]||!isNaN(parseFloat(r)))&&(s[n]=r));return s}var n=["add","remove","toggle"],o={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1};e.each(["borderLeftStyle","borderRightStyle","borderBottomStyle","borderTopStyle"],function(t,i){e.fx.step[i]=function(e){("none"!==e.end&&!e.setAttr||1===e.pos&&!e.setAttr)&&(a.style(e.elem,i,e.end),e.setAttr=!0)}}),e.fn.addBack||(e.fn.addBack=function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}),e.effects.animateClass=function(o,r,s,a){var l=e.speed(r,s,a);return this.queue(function(){var r,s=e(this),a=s.attr("class")||"",c=l.children?s.find("*").addBack():s;c=c.map(function(){var i=e(this);return{el:i,start:t(this)}}),r=function(){e.each(n,function(e,t){o[t]&&s[t+"Class"](o[t])})},r(),c=c.map(function(){return this.end=t(this.el[0]),this.diff=i(this.start,this.end),this}),s.attr("class",a),c=c.map(function(){var t=this,i=e.Deferred(),n=e.extend({},l,{queue:!1,complete:function(){i.resolve(t)}});return this.el.animate(this.diff,n),i.promise()}),e.when.apply(e,c.get()).done(function(){r(),e.each(arguments,function(){var t=this.el;e.each(this.diff,function(e){t.css(e,"")})}),l.complete.call(s[0])})})},e.fn.extend({addClass:function(t){return function(i,n,o,r){return n?e.effects.animateClass.call(this,{add:i},n,o,r):t.apply(this,arguments)}}(e.fn.addClass),removeClass:function(t){return function(i,n,o,r){return arguments.length>1?e.effects.animateClass.call(this,{remove:i},n,o,r):t.apply(this,arguments)}}(e.fn.removeClass),toggleClass:function(t){return function(i,n,o,r,s){return"boolean"==typeof n||void 0===n?o?e.effects.animateClass.call(this,n?{add:i}:{remove:i},o,r,s):t.apply(this,arguments):e.effects.animateClass.call(this,{toggle:i},n,o,r)}}(e.fn.toggleClass),switchClass:function(t,i,n,o,r){return e.effects.animateClass.call(this,{add:i,remove:t},n,o,r)}})}(),function(){function t(t,i,n,o){return e.isPlainObject(t)&&(i=t,t=t.effect),t={effect:t},null==i&&(i={}),e.isFunction(i)&&(o=i,n=null,i={}),("number"==typeof i||e.fx.speeds[i])&&(o=n,n=i,i={}),e.isFunction(n)&&(o=n,n=null),i&&e.extend(t,i),n=n||i.duration,t.duration=e.fx.off?0:"number"==typeof n?n:n in e.fx.speeds?e.fx.speeds[n]:e.fx.speeds._default,t.complete=o||i.complete,t}function i(t){return!t||"number"==typeof t||e.fx.speeds[t]?!0:"string"!=typeof t||e.effects.effect[t]?e.isFunction(t)?!0:"object"!=typeof t||t.effect?!1:!0:!0}e.extend(e.effects,{version:"1.11.4",save:function(e,t){for(var i=0;i<t.length;i++)null!==t[i]&&e.data(s+t[i],e[0].style[t[i]])},restore:function(e,t){var i,n;for(n=0;n<t.length;n++)null!==t[n]&&(i=e.data(s+t[n]),void 0===i&&(i=""),e.css(t[n],i))},setMode:function(e,t){return"toggle"===t&&(t=e.is(":hidden")?"show":"hide"),t},getBaseline:function(e,t){var i,n;switch(e[0]){case"top":i=0;break;case"middle":i=.5;break;case"bottom":i=1;break;default:i=e[0]/t.height}switch(e[1]){case"left":n=0;break;case"center":n=.5;break;case"right":n=1;break;default:n=e[1]/t.width}return{x:n,y:i}},createWrapper:function(t){if(t.parent().is(".ui-effects-wrapper"))return t.parent();var i={width:t.outerWidth(!0),height:t.outerHeight(!0),"float":t.css("float")},n=e("<div></div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0}),o={width:t.width(),height:t.height()},r=document.activeElement;try{r.id}catch(s){r=document.body}return t.wrap(n),(t[0]===r||e.contains(t[0],r))&&e(r).focus(),n=t.parent(),"static"===t.css("position")?(n.css({position:"relative"}),t.css({position:"relative"})):(e.extend(i,{position:t.css("position"),zIndex:t.css("z-index")}),e.each(["top","left","bottom","right"],function(e,n){i[n]=t.css(n),isNaN(parseInt(i[n],10))&&(i[n]="auto")}),t.css({position:"relative",top:0,left:0,right:"auto",bottom:"auto"})),t.css(o),n.css(i).show()
},removeWrapper:function(t){var i=document.activeElement;return t.parent().is(".ui-effects-wrapper")&&(t.parent().replaceWith(t),(t[0]===i||e.contains(t[0],i))&&e(i).focus()),t},setTransition:function(t,i,n,o){return o=o||{},e.each(i,function(e,i){var r=t.cssUnit(i);r[0]>0&&(o[i]=r[0]*n+r[1])}),o}}),e.fn.extend({effect:function(){function i(t){function i(){e.isFunction(r)&&r.call(o[0]),e.isFunction(t)&&t()}var o=e(this),r=n.complete,a=n.mode;(o.is(":hidden")?"hide"===a:"show"===a)?(o[a](),i()):s.call(o[0],n,i)}var n=t.apply(this,arguments),o=n.mode,r=n.queue,s=e.effects.effect[n.effect];return e.fx.off||!s?o?this[o](n.duration,n.complete):this.each(function(){n.complete&&n.complete.call(this)}):r===!1?this.each(i):this.queue(r||"fx",i)},show:function(e){return function(n){if(i(n))return e.apply(this,arguments);var o=t.apply(this,arguments);return o.mode="show",this.effect.call(this,o)}}(e.fn.show),hide:function(e){return function(n){if(i(n))return e.apply(this,arguments);var o=t.apply(this,arguments);return o.mode="hide",this.effect.call(this,o)}}(e.fn.hide),toggle:function(e){return function(n){if(i(n)||"boolean"==typeof n)return e.apply(this,arguments);var o=t.apply(this,arguments);return o.mode="toggle",this.effect.call(this,o)}}(e.fn.toggle),cssUnit:function(t){var i=this.css(t),n=[];return e.each(["em","px","%","pt"],function(e,t){i.indexOf(t)>0&&(n=[parseFloat(i),t])}),n}})}(),function(){var t={};e.each(["Quad","Cubic","Quart","Quint","Expo"],function(e,i){t[i]=function(t){return Math.pow(t,e+2)}}),e.extend(t,{Sine:function(e){return 1-Math.cos(e*Math.PI/2)},Circ:function(e){return 1-Math.sqrt(1-e*e)},Elastic:function(e){return 0===e||1===e?e:-Math.pow(2,8*(e-1))*Math.sin((80*(e-1)-7.5)*Math.PI/15)},Back:function(e){return e*e*(3*e-2)},Bounce:function(e){for(var t,i=4;e<((t=Math.pow(2,--i))-1)/11;);return 1/Math.pow(4,3-i)-7.5625*Math.pow((3*t-2)/22-e,2)}}),e.each(t,function(t,i){e.easing["easeIn"+t]=i,e.easing["easeOut"+t]=function(e){return 1-i(1-e)},e.easing["easeInOut"+t]=function(e){return.5>e?i(2*e)/2:1-i(-2*e+2)/2}})}();e.effects,e.effects.effect.blind=function(t,i){var n,o,r,s=e(this),a=/up|down|vertical/,l=/up|left|vertical|horizontal/,c=["position","top","bottom","left","right","height","width"],u=e.effects.setMode(s,t.mode||"hide"),d=t.direction||"up",h=a.test(d),f=h?"height":"width",p=h?"top":"left",m=l.test(d),g={},v="show"===u;s.parent().is(".ui-effects-wrapper")?e.effects.save(s.parent(),c):e.effects.save(s,c),s.show(),n=e.effects.createWrapper(s).css({overflow:"hidden"}),o=n[f](),r=parseFloat(n.css(p))||0,g[f]=v?o:0,m||(s.css(h?"bottom":"right",0).css(h?"top":"left","auto").css({position:"absolute"}),g[p]=v?r:o+r),v&&(n.css(f,0),m||n.css(p,r+o)),n.animate(g,{duration:t.duration,easing:t.easing,queue:!1,complete:function(){"hide"===u&&s.hide(),e.effects.restore(s,c),e.effects.removeWrapper(s),i()}})},e.effects.effect.bounce=function(t,i){var n,o,r,s=e(this),a=["position","top","bottom","left","right","height","width"],l=e.effects.setMode(s,t.mode||"effect"),c="hide"===l,u="show"===l,d=t.direction||"up",h=t.distance,f=t.times||5,p=2*f+(u||c?1:0),m=t.duration/p,g=t.easing,v="up"===d||"down"===d?"top":"left",y="up"===d||"left"===d,b=s.queue(),w=b.length;for((u||c)&&a.push("opacity"),e.effects.save(s,a),s.show(),e.effects.createWrapper(s),h||(h=s["top"===v?"outerHeight":"outerWidth"]()/3),u&&(r={opacity:1},r[v]=0,s.css("opacity",0).css(v,y?2*-h:2*h).animate(r,m,g)),c&&(h/=Math.pow(2,f-1)),r={},r[v]=0,n=0;f>n;n++)o={},o[v]=(y?"-=":"+=")+h,s.animate(o,m,g).animate(r,m,g),h=c?2*h:h/2;c&&(o={opacity:0},o[v]=(y?"-=":"+=")+h,s.animate(o,m,g)),s.queue(function(){c&&s.hide(),e.effects.restore(s,a),e.effects.removeWrapper(s),i()}),w>1&&b.splice.apply(b,[1,0].concat(b.splice(w,p+1))),s.dequeue()},e.effects.effect.clip=function(t,i){var n,o,r,s=e(this),a=["position","top","bottom","left","right","height","width"],l=e.effects.setMode(s,t.mode||"hide"),c="show"===l,u=t.direction||"vertical",d="vertical"===u,h=d?"height":"width",f=d?"top":"left",p={};e.effects.save(s,a),s.show(),n=e.effects.createWrapper(s).css({overflow:"hidden"}),o="IMG"===s[0].tagName?n:s,r=o[h](),c&&(o.css(h,0),o.css(f,r/2)),p[h]=c?r:0,p[f]=c?0:r/2,o.animate(p,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){c||s.hide(),e.effects.restore(s,a),e.effects.removeWrapper(s),i()}})},e.effects.effect.drop=function(t,i){var n,o=e(this),r=["position","top","bottom","left","right","opacity","height","width"],s=e.effects.setMode(o,t.mode||"hide"),a="show"===s,l=t.direction||"left",c="up"===l||"down"===l?"top":"left",u="up"===l||"left"===l?"pos":"neg",d={opacity:a?1:0};e.effects.save(o,r),o.show(),e.effects.createWrapper(o),n=t.distance||o["top"===c?"outerHeight":"outerWidth"](!0)/2,a&&o.css("opacity",0).css(c,"pos"===u?-n:n),d[c]=(a?"pos"===u?"+=":"-=":"pos"===u?"-=":"+=")+n,o.animate(d,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){"hide"===s&&o.hide(),e.effects.restore(o,r),e.effects.removeWrapper(o),i()}})},e.effects.effect.explode=function(t,i){function n(){b.push(this),b.length===d*h&&o()}function o(){f.css({visibility:"visible"}),e(b).remove(),m||f.hide(),i()}var r,s,a,l,c,u,d=t.pieces?Math.round(Math.sqrt(t.pieces)):3,h=d,f=e(this),p=e.effects.setMode(f,t.mode||"hide"),m="show"===p,g=f.show().css("visibility","hidden").offset(),v=Math.ceil(f.outerWidth()/h),y=Math.ceil(f.outerHeight()/d),b=[];for(r=0;d>r;r++)for(l=g.top+r*y,u=r-(d-1)/2,s=0;h>s;s++)a=g.left+s*v,c=s-(h-1)/2,f.clone().appendTo("body").wrap("<div></div>").css({position:"absolute",visibility:"visible",left:-s*v,top:-r*y}).parent().addClass("ui-effects-explode").css({position:"absolute",overflow:"hidden",width:v,height:y,left:a+(m?c*v:0),top:l+(m?u*y:0),opacity:m?0:1}).animate({left:a+(m?0:c*v),top:l+(m?0:u*y),opacity:m?1:0},t.duration||500,t.easing,n)},e.effects.effect.fade=function(t,i){var n=e(this),o=e.effects.setMode(n,t.mode||"toggle");n.animate({opacity:o},{queue:!1,duration:t.duration,easing:t.easing,complete:i})},e.effects.effect.fold=function(t,i){var n,o,r=e(this),s=["position","top","bottom","left","right","height","width"],a=e.effects.setMode(r,t.mode||"hide"),l="show"===a,c="hide"===a,u=t.size||15,d=/([0-9]+)%/.exec(u),h=!!t.horizFirst,f=l!==h,p=f?["width","height"]:["height","width"],m=t.duration/2,g={},v={};e.effects.save(r,s),r.show(),n=e.effects.createWrapper(r).css({overflow:"hidden"}),o=f?[n.width(),n.height()]:[n.height(),n.width()],d&&(u=parseInt(d[1],10)/100*o[c?0:1]),l&&n.css(h?{height:0,width:u}:{height:u,width:0}),g[p[0]]=l?o[0]:u,v[p[1]]=l?o[1]:0,n.animate(g,m,t.easing).animate(v,m,t.easing,function(){c&&r.hide(),e.effects.restore(r,s),e.effects.removeWrapper(r),i()})},e.effects.effect.highlight=function(t,i){var n=e(this),o=["backgroundImage","backgroundColor","opacity"],r=e.effects.setMode(n,t.mode||"show"),s={backgroundColor:n.css("backgroundColor")};"hide"===r&&(s.opacity=0),e.effects.save(n,o),n.show().css({backgroundImage:"none",backgroundColor:t.color||"#ffff99"}).animate(s,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){"hide"===r&&n.hide(),e.effects.restore(n,o),i()}})},e.effects.effect.pulsate=function(t,i){var n,o=e(this),r=e.effects.setMode(o,t.mode||"show"),s="show"===r,a="hide"===r,l=s||"hide"===r,c=2*(t.times||5)+(l?1:0),u=t.duration/c,d=0,h=o.queue(),f=h.length;for((s||!o.is(":visible"))&&(o.css("opacity",0).show(),d=1),n=1;c>n;n++)o.animate({opacity:d},u,t.easing),d=1-d;o.animate({opacity:d},u,t.easing),o.queue(function(){a&&o.hide(),i()}),f>1&&h.splice.apply(h,[1,0].concat(h.splice(f,c+1))),o.dequeue()},e.effects.effect.size=function(t,i){var n,o,r,s=e(this),a=["position","top","bottom","left","right","width","height","overflow","opacity"],l=["position","top","bottom","left","right","overflow","opacity"],c=["width","height","overflow"],u=["fontSize"],d=["borderTopWidth","borderBottomWidth","paddingTop","paddingBottom"],h=["borderLeftWidth","borderRightWidth","paddingLeft","paddingRight"],f=e.effects.setMode(s,t.mode||"effect"),p=t.restore||"effect"!==f,m=t.scale||"both",g=t.origin||["middle","center"],v=s.css("position"),y=p?a:l,b={height:0,width:0,outerHeight:0,outerWidth:0};"show"===f&&s.show(),n={height:s.height(),width:s.width(),outerHeight:s.outerHeight(),outerWidth:s.outerWidth()},"toggle"===t.mode&&"show"===f?(s.from=t.to||b,s.to=t.from||n):(s.from=t.from||("show"===f?b:n),s.to=t.to||("hide"===f?b:n)),r={from:{y:s.from.height/n.height,x:s.from.width/n.width},to:{y:s.to.height/n.height,x:s.to.width/n.width}},("box"===m||"both"===m)&&(r.from.y!==r.to.y&&(y=y.concat(d),s.from=e.effects.setTransition(s,d,r.from.y,s.from),s.to=e.effects.setTransition(s,d,r.to.y,s.to)),r.from.x!==r.to.x&&(y=y.concat(h),s.from=e.effects.setTransition(s,h,r.from.x,s.from),s.to=e.effects.setTransition(s,h,r.to.x,s.to))),("content"===m||"both"===m)&&r.from.y!==r.to.y&&(y=y.concat(u).concat(c),s.from=e.effects.setTransition(s,u,r.from.y,s.from),s.to=e.effects.setTransition(s,u,r.to.y,s.to)),e.effects.save(s,y),s.show(),e.effects.createWrapper(s),s.css("overflow","hidden").css(s.from),g&&(o=e.effects.getBaseline(g,n),s.from.top=(n.outerHeight-s.outerHeight())*o.y,s.from.left=(n.outerWidth-s.outerWidth())*o.x,s.to.top=(n.outerHeight-s.to.outerHeight)*o.y,s.to.left=(n.outerWidth-s.to.outerWidth)*o.x),s.css(s.from),("content"===m||"both"===m)&&(d=d.concat(["marginTop","marginBottom"]).concat(u),h=h.concat(["marginLeft","marginRight"]),c=a.concat(d).concat(h),s.find("*[width]").each(function(){var i=e(this),n={height:i.height(),width:i.width(),outerHeight:i.outerHeight(),outerWidth:i.outerWidth()};p&&e.effects.save(i,c),i.from={height:n.height*r.from.y,width:n.width*r.from.x,outerHeight:n.outerHeight*r.from.y,outerWidth:n.outerWidth*r.from.x},i.to={height:n.height*r.to.y,width:n.width*r.to.x,outerHeight:n.height*r.to.y,outerWidth:n.width*r.to.x},r.from.y!==r.to.y&&(i.from=e.effects.setTransition(i,d,r.from.y,i.from),i.to=e.effects.setTransition(i,d,r.to.y,i.to)),r.from.x!==r.to.x&&(i.from=e.effects.setTransition(i,h,r.from.x,i.from),i.to=e.effects.setTransition(i,h,r.to.x,i.to)),i.css(i.from),i.animate(i.to,t.duration,t.easing,function(){p&&e.effects.restore(i,c)})})),s.animate(s.to,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){0===s.to.opacity&&s.css("opacity",s.from.opacity),"hide"===f&&s.hide(),e.effects.restore(s,y),p||("static"===v?s.css({position:"relative",top:s.to.top,left:s.to.left}):e.each(["top","left"],function(e,t){s.css(t,function(t,i){var n=parseInt(i,10),o=e?s.to.left:s.to.top;return"auto"===i?o+"px":n+o+"px"})})),e.effects.removeWrapper(s),i()}})},e.effects.effect.scale=function(t,i){var n=e(this),o=e.extend(!0,{},t),r=e.effects.setMode(n,t.mode||"effect"),s=parseInt(t.percent,10)||(0===parseInt(t.percent,10)?0:"hide"===r?0:100),a=t.direction||"both",l=t.origin,c={height:n.height(),width:n.width(),outerHeight:n.outerHeight(),outerWidth:n.outerWidth()},u={y:"horizontal"!==a?s/100:1,x:"vertical"!==a?s/100:1};o.effect="size",o.queue=!1,o.complete=i,"effect"!==r&&(o.origin=l||["middle","center"],o.restore=!0),o.from=t.from||("show"===r?{height:0,width:0,outerHeight:0,outerWidth:0}:c),o.to={height:c.height*u.y,width:c.width*u.x,outerHeight:c.outerHeight*u.y,outerWidth:c.outerWidth*u.x},o.fade&&("show"===r&&(o.from.opacity=0,o.to.opacity=1),"hide"===r&&(o.from.opacity=1,o.to.opacity=0)),n.effect(o)},e.effects.effect.shake=function(t,i){var n,o=e(this),r=["position","top","bottom","left","right","height","width"],s=e.effects.setMode(o,t.mode||"effect"),a=t.direction||"left",l=t.distance||20,c=t.times||3,u=2*c+1,d=Math.round(t.duration/u),h="up"===a||"down"===a?"top":"left",f="up"===a||"left"===a,p={},m={},g={},v=o.queue(),y=v.length;for(e.effects.save(o,r),o.show(),e.effects.createWrapper(o),p[h]=(f?"-=":"+=")+l,m[h]=(f?"+=":"-=")+2*l,g[h]=(f?"-=":"+=")+2*l,o.animate(p,d,t.easing),n=1;c>n;n++)o.animate(m,d,t.easing).animate(g,d,t.easing);o.animate(m,d,t.easing).animate(p,d/2,t.easing).queue(function(){"hide"===s&&o.hide(),e.effects.restore(o,r),e.effects.removeWrapper(o),i()}),y>1&&v.splice.apply(v,[1,0].concat(v.splice(y,u+1))),o.dequeue()},e.effects.effect.slide=function(t,i){var n,o=e(this),r=["position","top","bottom","left","right","width","height"],s=e.effects.setMode(o,t.mode||"show"),a="show"===s,l=t.direction||"left",c="up"===l||"down"===l?"top":"left",u="up"===l||"left"===l,d={};e.effects.save(o,r),o.show(),n=t.distance||o["top"===c?"outerHeight":"outerWidth"](!0),e.effects.createWrapper(o).css({overflow:"hidden"}),a&&o.css(c,u?isNaN(n)?"-"+n:-n:n),d[c]=(a?u?"+=":"-=":u?"-=":"+=")+n,o.animate(d,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){"hide"===s&&o.hide(),e.effects.restore(o,r),e.effects.removeWrapper(o),i()}})},e.effects.effect.transfer=function(t,i){var n=e(this),o=e(t.to),r="fixed"===o.css("position"),s=e("body"),a=r?s.scrollTop():0,l=r?s.scrollLeft():0,c=o.offset(),u={top:c.top-a,left:c.left-l,height:o.innerHeight(),width:o.innerWidth()},d=n.offset(),h=e("<div class='ui-effects-transfer'></div>").appendTo(document.body).addClass(t.className).css({top:d.top-a,left:d.left-l,height:n.innerHeight(),width:n.innerWidth(),position:r?"fixed":"absolute"}).animate(u,t.duration,t.easing,function(){h.remove(),i()})}}),function(e){"use strict";"function"==typeof define&&define.amd?define(["jquery"],e):e(window.jQuery)}(function(e){"use strict";var t=0;e.ajaxTransport("iframe",function(i){if(i.async){var n,o,r;return{send:function(s,a){n=e('<form style="display:none;"></form>'),n.attr("accept-charset",i.formAcceptCharset),r=/\?/.test(i.url)?"&":"?","DELETE"===i.type?(i.url=i.url+r+"_method=DELETE",i.type="POST"):"PUT"===i.type?(i.url=i.url+r+"_method=PUT",i.type="POST"):"PATCH"===i.type&&(i.url=i.url+r+"_method=PATCH",i.type="POST"),t+=1,o=e('<iframe src="javascript:false;" name="iframe-transport-'+t+'"></iframe>').bind("load",function(){var t,r=e.isArray(i.paramName)?i.paramName:[i.paramName];o.unbind("load").bind("load",function(){var t;try{if(t=o.contents(),!t.length||!t[0].firstChild)throw new Error}catch(i){t=void 0}a(200,"success",{iframe:t}),e('<iframe src="javascript:false;"></iframe>').appendTo(n),window.setTimeout(function(){n.remove()},0)}),n.prop("target",o.prop("name")).prop("action",i.url).prop("method",i.type),i.formData&&e.each(i.formData,function(t,i){e('<input type="hidden"/>').prop("name",i.name).val(i.value).appendTo(n)}),i.fileInput&&i.fileInput.length&&"POST"===i.type&&(t=i.fileInput.clone(),i.fileInput.after(function(e){return t[e]}),i.paramName&&i.fileInput.each(function(t){e(this).prop("name",r[t]||i.paramName)}),n.append(i.fileInput).prop("enctype","multipart/form-data").prop("encoding","multipart/form-data")),n.submit(),t&&t.length&&i.fileInput.each(function(i,n){var o=e(t[i]);e(n).prop("name",o.prop("name")),o.replaceWith(n)})}),n.append(o).appendTo(document.body)},abort:function(){o&&o.unbind("load").prop("src","javascript".concat(":false;")),n&&n.remove()}}}}),e.ajaxSetup({converters:{"iframe text":function(t){return t&&e(t[0].body).text()},"iframe json":function(t){return t&&e.parseJSON(e(t[0].body).text())},"iframe html":function(t){return t&&e(t[0].body).html()},"iframe xml":function(t){var i=t&&t[0];return i&&e.isXMLDoc(i)?i:e.parseXML(i.XMLDocument&&i.XMLDocument.xml||e(i.body).html())},"iframe script":function(t){return t&&e.globalEval(e(t[0].body).text())}}})}),function(e){"function"==typeof define&&define.amd?define(["jquery"],e):e(jQuery)}(function(e,t){var i=0,n=Array.prototype.slice,o=e.cleanData;e.cleanData=function(t){for(var i,n=0;null!=(i=t[n]);n++)try{e(i).triggerHandler("remove")}catch(r){}o(t)},e.widget=function(t,i,n){var o,r,s,a,l={},c=t.split(".")[0];t=t.split(".")[1],o=c+"-"+t,n||(n=i,i=e.Widget),e.expr[":"][o.toLowerCase()]=function(t){return!!e.data(t,o)},e[c]=e[c]||{},r=e[c][t],s=e[c][t]=function(e,t){return this._createWidget?void(arguments.length&&this._createWidget(e,t)):new s(e,t)},e.extend(s,r,{version:n.version,_proto:e.extend({},n),_childConstructors:[]}),a=new i,a.options=e.widget.extend({},a.options),e.each(n,function(t,n){return e.isFunction(n)?void(l[t]=function(){var e=function(){return i.prototype[t].apply(this,arguments)},o=function(e){return i.prototype[t].apply(this,e)};return function(){var t,i=this._super,r=this._superApply;return this._super=e,this._superApply=o,t=n.apply(this,arguments),this._super=i,this._superApply=r,t}}()):void(l[t]=n)}),s.prototype=e.widget.extend(a,{widgetEventPrefix:r?a.widgetEventPrefix:t},l,{constructor:s,namespace:c,widgetName:t,widgetFullName:o}),r?(e.each(r._childConstructors,function(t,i){var n=i.prototype;e.widget(n.namespace+"."+n.widgetName,s,i._proto)}),delete r._childConstructors):i._childConstructors.push(s),e.widget.bridge(t,s)},e.widget.extend=function(i){for(var o,r,s=n.call(arguments,1),a=0,l=s.length;l>a;a++)for(o in s[a])r=s[a][o],s[a].hasOwnProperty(o)&&r!==t&&(i[o]=e.isPlainObject(r)?e.isPlainObject(i[o])?e.widget.extend({},i[o],r):e.widget.extend({},r):r);return i},e.widget.bridge=function(i,o){var r=o.prototype.widgetFullName||i;e.fn[i]=function(s){var a="string"==typeof s,l=n.call(arguments,1),c=this;return s=!a&&l.length?e.widget.extend.apply(null,[s].concat(l)):s,this.each(a?function(){var n,o=e.data(this,r);return o?e.isFunction(o[s])&&"_"!==s.charAt(0)?(n=o[s].apply(o,l),n!==o&&n!==t?(c=n&&n.jquery?c.pushStack(n.get()):n,!1):void 0):e.error("no such method '"+s+"' for "+i+" widget instance"):e.error("cannot call methods on "+i+" prior to initialization; attempted to call method '"+s+"'")}:function(){var t=e.data(this,r);t?t.option(s||{})._init():e.data(this,r,new o(s,this))}),c}},e.Widget=function(){},e.Widget._childConstructors=[],e.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(t,n){n=e(n||this.defaultElement||this)[0],this.element=e(n),this.uuid=i++,this.eventNamespace="."+this.widgetName+this.uuid,this.options=e.widget.extend({},this.options,this._getCreateOptions(),t),this.bindings=e(),this.hoverable=e(),this.focusable=e(),n!==this&&(e.data(n,this.widgetFullName,this),this._on(!0,this.element,{remove:function(e){e.target===n&&this.destroy()}}),this.document=e(n.style?n.ownerDocument:n.document||n),this.window=e(this.document[0].defaultView||this.document[0].parentWindow)),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:e.noop,_getCreateEventData:e.noop,_create:e.noop,_init:e.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetName).removeData(this.widgetFullName).removeData(e.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:e.noop,widget:function(){return this.element},option:function(i,n){var o,r,s,a=i;if(0===arguments.length)return e.widget.extend({},this.options);if("string"==typeof i)if(a={},o=i.split("."),i=o.shift(),o.length){for(r=a[i]=e.widget.extend({},this.options[i]),s=0;s<o.length-1;s++)r[o[s]]=r[o[s]]||{},r=r[o[s]];if(i=o.pop(),n===t)return r[i]===t?null:r[i];r[i]=n}else{if(n===t)return this.options[i]===t?null:this.options[i];a[i]=n}return this._setOptions(a),this},_setOptions:function(e){var t;for(t in e)this._setOption(t,e[t]);return this},_setOption:function(e,t){return this.options[e]=t,"disabled"===e&&(this.widget().toggleClass(this.widgetFullName+"-disabled ui-state-disabled",!!t).attr("aria-disabled",t),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_on:function(t,i,n){var o,r=this;"boolean"!=typeof t&&(n=i,i=t,t=!1),n?(i=o=e(i),this.bindings=this.bindings.add(i)):(n=i,i=this.element,o=this.widget()),e.each(n,function(n,s){function a(){return t||r.options.disabled!==!0&&!e(this).hasClass("ui-state-disabled")?("string"==typeof s?r[s]:s).apply(r,arguments):void 0}"string"!=typeof s&&(a.guid=s.guid=s.guid||a.guid||e.guid++);var l=n.match(/^(\w+)\s*(.*)$/),c=l[1]+r.eventNamespace,u=l[2];u?o.delegate(u,c,a):i.bind(c,a)})},_off:function(e,t){t=(t||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,e.unbind(t).undelegate(t)},_delay:function(e,t){function i(){return("string"==typeof e?n[e]:e).apply(n,arguments)}var n=this;return setTimeout(i,t||0)},_hoverable:function(t){this.hoverable=this.hoverable.add(t),this._on(t,{mouseenter:function(t){e(t.currentTarget).addClass("ui-state-hover")},mouseleave:function(t){e(t.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(t){this.focusable=this.focusable.add(t),this._on(t,{focusin:function(t){e(t.currentTarget).addClass("ui-state-focus")},focusout:function(t){e(t.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(t,i,n){var o,r,s=this.options[t];if(n=n||{},i=e.Event(i),i.type=(t===this.widgetEventPrefix?t:this.widgetEventPrefix+t).toLowerCase(),i.target=this.element[0],r=i.originalEvent)for(o in r)o in i||(i[o]=r[o]);return this.element.trigger(i,n),!(e.isFunction(s)&&s.apply(this.element[0],[i].concat(n))===!1||i.isDefaultPrevented())}},e.each({show:"fadeIn",hide:"fadeOut"},function(t,i){e.Widget.prototype["_"+t]=function(n,o,r){"string"==typeof o&&(o={effect:o});var s,a=o?o===!0||"number"==typeof o?i:o.effect||i:t;o=o||{},"number"==typeof o&&(o={duration:o}),s=!e.isEmptyObject(o),o.complete=r,o.delay&&n.delay(o.delay),s&&e.effects&&e.effects.effect[a]?n[t](o):a!==t&&n[a]?n[a](o.duration,o.easing,r):n.queue(function(i){e(this)[t](),r&&r.call(n[0]),i()})}})}),function(e){"use strict";"function"==typeof define&&define.amd?define(["jquery","jquery.ui.widget"],e):e(window.jQuery)}(function(e){"use strict";e.support.xhrFileUpload=!(!window.XMLHttpRequestUpload||!window.FileReader),e.support.xhrFormDataFileUpload=!!window.FormData,e.widget("blueimp.fileupload",{options:{dropZone:e(document),pasteZone:e(document),fileInput:void 0,replaceFileInput:!0,paramName:void 0,singleFileUploads:!0,limitMultiFileUploads:void 0,sequentialUploads:!1,limitConcurrentUploads:void 0,forceIframeTransport:!1,redirect:void 0,redirectParamName:void 0,postMessage:void 0,multipart:!0,maxChunkSize:void 0,uploadedBytes:void 0,recalculateProgress:!0,progressInterval:100,bitrateInterval:500,autoUpload:!0,messages:{uploadedBytes:"Uploaded bytes exceed file size"},i18n:function(t,i){return t=this.messages[t]||t.toString(),i&&e.each(i,function(e,i){t=t.replace("{"+e+"}",i)}),t},formData:function(e){return e.serializeArray()},add:function(t,i){(i.autoUpload||i.autoUpload!==!1&&e(this).fileupload("option","autoUpload"))&&i.process().done(function(){i.submit()})},processData:!1,contentType:!1,cache:!1},_specialOptions:["fileInput","dropZone","pasteZone","multipart","forceIframeTransport"],_BitrateTimer:function(){this.timestamp=Date.now?Date.now():(new Date).getTime(),this.loaded=0,this.bitrate=0,this.getBitrate=function(e,t,i){var n=e-this.timestamp;return(!this.bitrate||!i||n>i)&&(this.bitrate=(t-this.loaded)*(1e3/n)*8,this.loaded=t,this.timestamp=e),this.bitrate}},_isXHRUpload:function(t){return!t.forceIframeTransport&&(!t.multipart&&e.support.xhrFileUpload||e.support.xhrFormDataFileUpload)},_getFormData:function(t){var i;return"function"==typeof t.formData?t.formData(t.form):e.isArray(t.formData)?t.formData:"object"===e.type(t.formData)?(i=[],e.each(t.formData,function(e,t){i.push({name:e,value:t})}),i):[]},_getTotal:function(t){var i=0;return e.each(t,function(e,t){i+=t.size||1}),i},_initProgressObject:function(t){var i={loaded:0,total:0,bitrate:0};t._progress?e.extend(t._progress,i):t._progress=i},_initResponseObject:function(e){var t;if(e._response)for(t in e._response)e._response.hasOwnProperty(t)&&delete e._response[t];else e._response={}},_onProgress:function(e,t){if(e.lengthComputable){var i,n=Date.now?Date.now():(new Date).getTime();if(t._time&&t.progressInterval&&n-t._time<t.progressInterval&&e.loaded!==e.total)return;t._time=n,i=Math.floor(e.loaded/e.total*(t.chunkSize||t._progress.total))+(t.uploadedBytes||0),this._progress.loaded+=i-t._progress.loaded,this._progress.bitrate=this._bitrateTimer.getBitrate(n,this._progress.loaded,t.bitrateInterval),t._progress.loaded=t.loaded=i,t._progress.bitrate=t.bitrate=t._bitrateTimer.getBitrate(n,i,t.bitrateInterval),this._trigger("progress",e,t),this._trigger("progressall",e,this._progress)}},_initProgressListener:function(t){var i=this,n=t.xhr?t.xhr():e.ajaxSettings.xhr();n.upload&&(e(n.upload).bind("progress",function(e){var n=e.originalEvent;e.lengthComputable=n.lengthComputable,e.loaded=n.loaded,e.total=n.total,i._onProgress(e,t)}),t.xhr=function(){return n})},_isInstanceOf:function(e,t){return Object.prototype.toString.call(t)==="[object "+e+"]"},_initXHRData:function(t){var i,n=this,o=t.files[0],r=t.multipart||!e.support.xhrFileUpload,s=t.paramName[0];t.headers=t.headers||{},t.contentRange&&(t.headers["Content-Range"]=t.contentRange),r?e.support.xhrFormDataFileUpload&&(t.postMessage?(i=this._getFormData(t),t.blob?i.push({name:s,value:t.blob}):e.each(t.files,function(e,n){i.push({name:t.paramName[e]||s,value:n})})):(n._isInstanceOf("FormData",t.formData)?i=t.formData:(i=new FormData,e.each(this._getFormData(t),function(e,t){i.append(t.name,t.value)})),t.blob?(t.headers["Content-Disposition"]='attachment; filename="'+encodeURI(o.name)+'"',i.append(s,t.blob,o.name)):e.each(t.files,function(e,o){(n._isInstanceOf("File",o)||n._isInstanceOf("Blob",o))&&i.append(t.paramName[e]||s,o,o.name)})),t.data=i):(t.headers["Content-Disposition"]='attachment; filename="'+encodeURI(o.name)+'"',t.contentType=o.type,t.data=t.blob||o),t.blob=null},_initIframeSettings:function(t){var i=e("<a></a>").prop("href",t.url).prop("host");t.dataType="iframe "+(t.dataType||""),t.formData=this._getFormData(t),t.redirect&&i&&i!==location.host&&t.formData.push({name:t.redirectParamName||"redirect",value:t.redirect})},_initDataSettings:function(e){this._isXHRUpload(e)?(this._chunkedUpload(e,!0)||(e.data||this._initXHRData(e),this._initProgressListener(e)),e.postMessage&&(e.dataType="postmessage "+(e.dataType||""))):this._initIframeSettings(e)},_getParamName:function(t){var i=e(t.fileInput),n=t.paramName;return n?e.isArray(n)||(n=[n]):(n=[],i.each(function(){for(var t=e(this),i=t.prop("name")||"files[]",o=(t.prop("files")||[1]).length;o;)n.push(i),o-=1}),n.length||(n=[i.prop("name")||"files[]"])),n},_initFormSettings:function(t){t.form&&t.form.length||(t.form=e(t.fileInput.prop("form")),t.form.length||(t.form=e(this.options.fileInput.prop("form")))),t.paramName=this._getParamName(t),t.url||(t.url=t.form.prop("action")||location.href),t.type=(t.type||t.form.prop("method")||"").toUpperCase(),"POST"!==t.type&&"PUT"!==t.type&&"PATCH"!==t.type&&(t.type="POST"),t.formAcceptCharset||(t.formAcceptCharset=t.form.attr("accept-charset"))},_getAJAXSettings:function(t){var i=e.extend({},this.options,t);return this._initFormSettings(i),this._initDataSettings(i),i},_getDeferredState:function(e){return e.state?e.state():e.isResolved()?"resolved":e.isRejected()?"rejected":"pending"},_enhancePromise:function(e){return e.success=e.done,e.error=e.fail,e.complete=e.always,e},_getXHRPromise:function(t,i,n){var o=e.Deferred(),r=o.promise();return i=i||this.options.context||r,t===!0?o.resolveWith(i,n):t===!1&&o.rejectWith(i,n),r.abort=o.promise,this._enhancePromise(r)},_addConvenienceMethods:function(t,i){var n=this,o=function(t){return e.Deferred().resolveWith(n,[t]).promise()};i.process=function(e,t){return(e||t)&&(i._processQueue=this._processQueue=(this._processQueue||o(this)).pipe(e,t)),this._processQueue||o(this)},i.submit=function(){return"pending"!==this.state()&&(i.jqXHR=this.jqXHR=n._trigger("submit",t,this)!==!1&&n._onSend(t,this)),this.jqXHR||n._getXHRPromise()},i.abort=function(){return this.jqXHR?this.jqXHR.abort():n._getXHRPromise()},i.state=function(){return this.jqXHR?n._getDeferredState(this.jqXHR):this._processQueue?n._getDeferredState(this._processQueue):void 0},i.progress=function(){return this._progress},i.response=function(){return this._response}},_getUploadedBytes:function(e){var t=e.getResponseHeader("Range"),i=t&&t.split("-"),n=i&&i.length>1&&parseInt(i[1],10);return n&&n+1},_chunkedUpload:function(t,i){var n,o,r=this,s=t.files[0],a=s.size,l=t.uploadedBytes=t.uploadedBytes||0,c=t.maxChunkSize||a,u=s.slice||s.webkitSlice||s.mozSlice,d=e.Deferred(),h=d.promise();return this._isXHRUpload(t)&&u&&(l||a>c)&&!t.data?i?!0:l>=a?(s.error=t.i18n("uploadedBytes"),this._getXHRPromise(!1,t.context,[null,"error",s.error])):(o=function(){var i=e.extend({},t),h=i._progress.loaded;i.blob=u.call(s,l,l+c,s.type),i.chunkSize=i.blob.size,i.contentRange="bytes "+l+"-"+(l+i.chunkSize-1)+"/"+a,r._initXHRData(i),r._initProgressListener(i),n=(r._trigger("chunksend",null,i)!==!1&&e.ajax(i)||r._getXHRPromise(!1,i.context)).done(function(n,s,c){l=r._getUploadedBytes(c)||l+i.chunkSize,h+i.chunkSize-i._progress.loaded&&r._onProgress(e.Event("progress",{lengthComputable:!0,loaded:l-i.uploadedBytes,total:l-i.uploadedBytes}),i),t.uploadedBytes=i.uploadedBytes=l,i.result=n,i.textStatus=s,i.jqXHR=c,r._trigger("chunkdone",null,i),r._trigger("chunkalways",null,i),a>l?o():d.resolveWith(i.context,[n,s,c])}).fail(function(e,t,n){i.jqXHR=e,i.textStatus=t,i.errorThrown=n,r._trigger("chunkfail",null,i),r._trigger("chunkalways",null,i),d.rejectWith(i.context,[e,t,n])})},this._enhancePromise(h),h.abort=function(){return n.abort()},o(),h):!1},_beforeSend:function(e,t){0===this._active&&(this._trigger("start"),this._bitrateTimer=new this._BitrateTimer,this._progress.loaded=this._progress.total=0,this._progress.bitrate=0),this._initResponseObject(t),this._initProgressObject(t),t._progress.loaded=t.loaded=t.uploadedBytes||0,t._progress.total=t.total=this._getTotal(t.files)||1,t._progress.bitrate=t.bitrate=0,this._active+=1,this._progress.loaded+=t.loaded,this._progress.total+=t.total},_onDone:function(t,i,n,o){var r=o._progress.total,s=o._response;o._progress.loaded<r&&this._onProgress(e.Event("progress",{lengthComputable:!0,loaded:r,total:r}),o),s.result=o.result=t,s.textStatus=o.textStatus=i,s.jqXHR=o.jqXHR=n,this._trigger("done",null,o)},_onFail:function(e,t,i,n){var o=n._response;n.recalculateProgress&&(this._progress.loaded-=n._progress.loaded,this._progress.total-=n._progress.total),o.jqXHR=n.jqXHR=e,o.textStatus=n.textStatus=t,o.errorThrown=n.errorThrown=i,this._trigger("fail",null,n)},_onAlways:function(e,t,i,n){this._trigger("always",null,n)},_onSend:function(t,i){i.submit||this._addConvenienceMethods(t,i);var n,o,r,s,a=this,l=a._getAJAXSettings(i),c=function(){return a._sending+=1,l._bitrateTimer=new a._BitrateTimer,n=n||((o||a._trigger("send",t,l)===!1)&&a._getXHRPromise(!1,l.context,o)||a._chunkedUpload(l)||e.ajax(l)).done(function(e,t,i){a._onDone(e,t,i,l)}).fail(function(e,t,i){a._onFail(e,t,i,l)}).always(function(e,t,i){if(a._onAlways(e,t,i,l),a._sending-=1,a._active-=1,l.limitConcurrentUploads&&l.limitConcurrentUploads>a._sending)for(var n=a._slots.shift();n;){if("pending"===a._getDeferredState(n)){n.resolve();break}n=a._slots.shift()}0===a._active&&a._trigger("stop")})};return this._beforeSend(t,l),this.options.sequentialUploads||this.options.limitConcurrentUploads&&this.options.limitConcurrentUploads<=this._sending?(this.options.limitConcurrentUploads>1?(r=e.Deferred(),this._slots.push(r),s=r.pipe(c)):s=this._sequence=this._sequence.pipe(c,c),s.abort=function(){return o=[void 0,"abort","abort"],n?n.abort():(r&&r.rejectWith(l.context,o),c())},this._enhancePromise(s)):c()},_onAdd:function(t,i){var n,o,r,s,a=this,l=!0,c=e.extend({},this.options,i),u=c.limitMultiFileUploads,d=this._getParamName(c);if((c.singleFileUploads||u)&&this._isXHRUpload(c))if(!c.singleFileUploads&&u)for(r=[],n=[],s=0;s<i.files.length;s+=u)r.push(i.files.slice(s,s+u)),o=d.slice(s,s+u),o.length||(o=d),n.push(o);else n=d;else r=[i.files],n=[d];return i.originalFiles=i.files,e.each(r||i.files,function(o,s){var c=e.extend({},i);return c.files=r?s:[s],c.paramName=n[o],a._initResponseObject(c),a._initProgressObject(c),a._addConvenienceMethods(t,c),l=a._trigger("add",t,c)}),l},_replaceFileInput:function(t){var i=t.clone(!0);e("<form></form>").append(i)[0].reset(),t.after(i).detach(),e.cleanData(t.unbind("remove")),this.options.fileInput=this.options.fileInput.map(function(e,n){return n===t[0]?i[0]:n}),t[0]===this.element[0]&&(this.element=i)},_handleFileTreeEntry:function(t,i){var n,o=this,r=e.Deferred(),s=function(e){e&&!e.entry&&(e.entry=t),r.resolve([e])};return i=i||"",t.isFile?t._file?(t._file.relativePath=i,r.resolve(t._file)):t.file(function(e){e.relativePath=i,r.resolve(e)
},s):t.isDirectory?(n=t.createReader(),n.readEntries(function(e){o._handleFileTreeEntries(e,i+t.name+"/").done(function(e){r.resolve(e)}).fail(s)},s)):r.resolve([]),r.promise()},_handleFileTreeEntries:function(t,i){var n=this;return e.when.apply(e,e.map(t,function(e){return n._handleFileTreeEntry(e,i)})).pipe(function(){return Array.prototype.concat.apply([],arguments)})},_getDroppedFiles:function(t){t=t||{};var i=t.items;return i&&i.length&&(i[0].webkitGetAsEntry||i[0].getAsEntry)?this._handleFileTreeEntries(e.map(i,function(e){var t;return e.webkitGetAsEntry?(t=e.webkitGetAsEntry(),t&&(t._file=e.getAsFile()),t):e.getAsEntry()})):e.Deferred().resolve(e.makeArray(t.files)).promise()},_getSingleFileInputFiles:function(t){t=e(t);var i,n,o=t.prop("webkitEntries")||t.prop("entries");if(o&&o.length)return this._handleFileTreeEntries(o);if(i=e.makeArray(t.prop("files")),i.length)void 0===i[0].name&&i[0].fileName&&e.each(i,function(e,t){t.name=t.fileName,t.size=t.fileSize});else{if(n=t.prop("value"),!n)return e.Deferred().resolve([]).promise();i=[{name:n.replace(/^.*\\/,"")}]}return e.Deferred().resolve(i).promise()},_getFileInputFiles:function(t){return t instanceof e&&1!==t.length?e.when.apply(e,e.map(t,this._getSingleFileInputFiles)).pipe(function(){return Array.prototype.concat.apply([],arguments)}):this._getSingleFileInputFiles(t)},_onChange:function(t){var i=this,n={fileInput:e(t.target),form:e(t.target.form)};this._getFileInputFiles(n.fileInput).always(function(e){n.files=e,i.options.replaceFileInput&&i._replaceFileInput(n.fileInput),i._trigger("change",t,n)!==!1&&i._onAdd(t,n)})},_onPaste:function(t){var i=t.originalEvent&&t.originalEvent.clipboardData&&t.originalEvent.clipboardData.items,n={files:[]};return i&&i.length&&(e.each(i,function(e,t){var i=t.getAsFile&&t.getAsFile();i&&n.files.push(i)}),this._trigger("paste",t,n)===!1||this._onAdd(t,n)===!1)?!1:void 0},_onDrop:function(e){var t=this,i=e.dataTransfer=e.originalEvent&&e.originalEvent.dataTransfer,n={};i&&i.files&&i.files.length&&(e.preventDefault(),this._getDroppedFiles(i).always(function(i){n.files=i,t._trigger("drop",e,n)!==!1&&t._onAdd(e,n)}))},_onDragOver:function(t){var i=t.dataTransfer=t.originalEvent&&t.originalEvent.dataTransfer;if(i){if(this._trigger("dragover",t)===!1)return!1;-1!==e.inArray("Files",i.types)&&(i.dropEffect="copy",t.preventDefault())}},_initEventHandlers:function(){this._isXHRUpload(this.options)&&(this._on(this.options.dropZone,{dragover:this._onDragOver,drop:this._onDrop}),this._on(this.options.pasteZone,{paste:this._onPaste})),this._on(this.options.fileInput,{change:this._onChange})},_destroyEventHandlers:function(){this._off(this.options.dropZone,"dragover drop"),this._off(this.options.pasteZone,"paste"),this._off(this.options.fileInput,"change")},_setOption:function(t,i){var n=-1!==e.inArray(t,this._specialOptions);n&&this._destroyEventHandlers(),this._super(t,i),n&&(this._initSpecialOptions(),this._initEventHandlers())},_initSpecialOptions:function(){var t=this.options;void 0===t.fileInput?t.fileInput=this.element.is('input[type="file"]')?this.element:this.element.find('input[type="file"]'):t.fileInput instanceof e||(t.fileInput=e(t.fileInput)),t.dropZone instanceof e||(t.dropZone=e(t.dropZone)),t.pasteZone instanceof e||(t.pasteZone=e(t.pasteZone))},_getRegExp:function(e){var t=e.split("/"),i=t.pop();return t.shift(),new RegExp(t.join("/"),i)},_isRegExpOption:function(t,i){return"url"!==t&&"string"===e.type(i)&&/^\/.*\/[igm]{0,3}$/.test(i)},_initDataAttributes:function(){var t=this,i=this.options;e.each(e(this.element[0].cloneNode(!1)).data(),function(e,n){t._isRegExpOption(e,n)&&(n=t._getRegExp(n)),i[e]=n})},_create:function(){this._initDataAttributes(),this._initSpecialOptions(),this._slots=[],this._sequence=this._getXHRPromise(!0),this._sending=this._active=0,this._initProgressObject(this),this._initEventHandlers()},active:function(){return this._active},progress:function(){return this._progress},add:function(t){var i=this;t&&!this.options.disabled&&(t.fileInput&&!t.files?this._getFileInputFiles(t.fileInput).always(function(e){t.files=e,i._onAdd(null,t)}):(t.files=e.makeArray(t.files),this._onAdd(null,t)))},send:function(t){if(t&&!this.options.disabled){if(t.fileInput&&!t.files){var i,n,o=this,r=e.Deferred(),s=r.promise();return s.abort=function(){return n=!0,i?i.abort():(r.reject(null,"abort","abort"),s)},this._getFileInputFiles(t.fileInput).always(function(e){n||(t.files=e,i=o._onSend(null,t).then(function(e,t,i){r.resolve(e,t,i)},function(e,t,i){r.reject(e,t,i)}))}),this._enhancePromise(s)}if(t.files=e.makeArray(t.files),t.files.length)return this._onSend(null,t)}return this._getXHRPromise(!1,t&&t.context)}})}),function(e){e.fn.ajaxify=function(t){if(e(this).is("form")){var i=e(this);return i.submit(function(){var n=e.extend({type:i.attr("method")||"GET",url:i.attr("action"),data:i.serialize(),success:function(){"undefined"!=typeof console&&console.log("AJAX SUCCESS: ",arguments)},error:function(){"undefined"!=typeof console&&console.log("AJAX ERROR: ",arguments)}},t);return e.ajax(n),"function"==typeof t.start&&t.start.apply(this,arguments),!1}),i}}}(jQuery),function(e){e.fn.lightbox_me=function(t){return this.each(function(){function i(){var t=l[0].style;s.destroyOnClose?l.add(a).remove():l.add(a).hide(),s.parentLightbox&&s.parentLightbox.fadeIn(200),c.remove(),l.undelegate(s.closeSelector,"click"),e(window).unbind("reposition",o),e(window).unbind("reposition",r),e(window).unbind("scroll",r),e(window).unbind("keyup.lightbox_me"),u&&t.removeExpression("top"),s.onClose()}function n(e){(27==e.keyCode||27==e.DOM_VK_ESCAPE&&0==e.which)&&s.closeEsc&&i()}function o(){e(window).height()<e(document).height()?(a.css({height:e(document).height()+"px"}),c.css({height:e(document).height()+"px"})):(a.css({height:"100%"}),u&&(e("html,body").css("height","100%"),c.css("height","100%")))}function r(){var t=l[0].style;if(l.css({left:"50%",marginLeft:l.outerWidth()/2*-1,zIndex:s.zIndex+3}),l.height()+80>=e(window).height()&&("absolute"!=l.css("position")||u)){var i=e(document).scrollTop()+40;l.css({position:"absolute",top:i+"px",marginTop:0}),u&&t.removeExpression("top")}else if(l.height()+80<e(window).height())if(u)if(t.position="absolute",s.centered)t.setExpression("top",'(document.documentElement.clientHeight || document.body.clientHeight) / 2 - (this.offsetHeight / 2) + (blah = document.documentElement.scrollTop ? document.documentElement.scrollTop : document.body.scrollTop) + "px"'),t.marginTop=0;else{var n=s.modalCSS&&s.modalCSS.top?parseInt(s.modalCSS.top):0;t.setExpression("top","((blah = document.documentElement.scrollTop ? document.documentElement.scrollTop : document.body.scrollTop) + "+n+') + "px"')}else s.centered?l.css({position:"fixed",top:"50%",marginTop:l.outerHeight()/2*-1}):l.css({position:"fixed"}).css(s.modalCSS)}var s=e.extend({},e.fn.lightbox_me.defaults,t),a=e(),l=e(this),c=e('<iframe id="foo" style="z-index: '+(s.zIndex+1)+';border: none; margin: 0; padding: 0; position: absolute; width: 100%; height: 100%; top: 0; left: 0; filter: mask();"/>'),u=e.browser.msie&&e.browser.version<7;if(s.showOverlay){var d=e(".js_lb_overlay:visible");a=e(d.length>0?'<div class="lb_overlay_clear js_lb_overlay"/>':'<div class="'+s.classPrefix+'_overlay js_lb_overlay"/>')}if(u){var h=/^https/i.test(window.location.href||"")?"javascript:false":"about:blank";c.attr("src",h),e("body").append(c)}e("body").append(l.hide()).append(a),s.showOverlay&&(o(),a.css({position:"absolute",width:"100%",top:0,left:0,right:0,bottom:0,zIndex:s.zIndex+2,display:"none"}),a.hasClass("lb_overlay_clear")||a.css(s.overlayCSS)),s.showOverlay?a.fadeIn(s.overlaySpeed,function(){r(),l[s.appearEffect](s.lightboxSpeed,function(){o(),r(),s.onLoad()})}):(r(),l[s.appearEffect](s.lightboxSpeed,function(){s.onLoad()})),s.parentLightbox&&s.parentLightbox.fadeOut(200),e(window).resize(o).resize(r).scroll(r),e(window).bind("keyup.lightbox_me",n),s.closeClick&&a.click(function(e){i(),e.preventDefault}),l.delegate(s.closeSelector,"click",function(e){i(),e.preventDefault()}),l.bind("close",i),l.bind("reposition",r)})},e.fn.lightbox_me.defaults={appearEffect:"fadeIn",appearEase:"",overlaySpeed:250,lightboxSpeed:300,closeSelector:".close",closeClick:!0,closeEsc:!0,destroyOnClose:!1,showOverlay:!0,parentLightbox:!1,onLoad:function(){},onClose:function(){},classPrefix:"lb",zIndex:999,centered:!1,modalCSS:{top:"40px"},overlayCSS:{background:"black",opacity:.3}}}(jQuery),function(e){e.fn.mailcheck=function(e,t){var i=["yahoo.com","google.com","hotmail.com","gmail.com","me.com","aol.com","mac.com","live.com","comcast.net","googlemail.com","msn.com","hotmail.co.uk","yahoo.co.uk"];if("object"==typeof e&&void 0===t)e.domains=e.domains||i;else{var n=e;e=t,e.domains=n||i}var o=Kicksend.mailcheck.suggest(encodeURI(this.val()),e.domains);o?e.suggested&&e.suggested(this,o):e.empty&&e.empty(this)}}(jQuery);var Kicksend={mailcheck:{threshold:3,suggest:function(e,t){e=e.toLowerCase();var i=this.splitEmail(e),n=this.findClosestDomain(i.domain,t);return n?{address:i.address,domain:n,full:i.address+"@"+n}:!1},findClosestDomain:function(e,t){for(var i,n=99,o=null,r=0;r<t.length;r++){if(e===t[r])return!1;i=this.stringDistance(e,t[r]),n>i&&(n=i,o=t[r])}return n<=this.threshold&&null!==o?o:!1},stringDistance:function(e,t){if(null==e||0===e.length)return null==t||0===t.length?0:t.length;if(null==t||0===t.length)return e.length;for(var i=0,n=0,o=0,r=0,s=5;i+n<e.length&&i+o<t.length;){if(e[i+n]==t[i+o])r++;else{n=0,o=0;for(var a=0;s>a;a++){if(i+a<e.length&&e[i+a]==t[i]){n=a;break}if(i+a<t.length&&e[i]==t[i+a]){o=a;break}}}i++}return(e.length+t.length)/2-r},splitEmail:function(e){var t=e.split("@");return t.length<2?!1:{domain:t.pop(),address:t.join("@")}}}};!function(e){function t(){var t=i(this);return isNaN(t.datetime)||e(this).text(n(t.datetime)),this}function i(t){if(t=e(t),!t.data("timeago")){t.data("timeago",{datetime:r.datetime(t)});var i=e.trim(t.text());i.length>0&&t.attr("title",i)}return t.data("timeago")}function n(e){return r.inWords(o(e))}function o(e){return(new Date).getTime()-e.getTime()}e.timeago=function(t){return n(t instanceof Date?t:"string"==typeof t?e.timeago.parse(t):e.timeago.datetime(t))};var r=e.timeago;e.extend(e.timeago,{settings:{refreshMillis:6e4,allowFuture:!1,strings:{prefixAgo:null,prefixFromNow:null,suffixAgo:"ago",suffixFromNow:"from now",seconds:"less than a minute",minute:"about a minute",minutes:"%d minutes",hour:"about an hour",hours:"about %d hours",day:"a day",days:"%d days",month:"about a month",months:"%d months",year:"about a year",years:"%d years",numbers:[]}},inWords:function(t){function i(i,o){var r=e.isFunction(i)?i(o,t):i,s=n.numbers&&n.numbers[o]||o;return r.replace(/%d/i,s)}var n=this.settings.strings,o=n.prefixAgo,r=n.suffixAgo;this.settings.allowFuture&&(0>t&&(o=n.prefixFromNow,r=n.suffixFromNow),t=Math.abs(t));var s=t/1e3,a=s/60,l=a/60,c=l/24,u=c/365,d=45>s&&i(n.seconds,Math.round(s))||90>s&&i(n.minute,1)||45>a&&i(n.minutes,Math.round(a))||90>a&&i(n.hour,1)||24>l&&i(n.hours,Math.round(l))||48>l&&i(n.day,1)||30>c&&i(n.days,Math.floor(c))||60>c&&i(n.month,1)||365>c&&i(n.months,Math.floor(c/30))||2>u&&i(n.year,1)||i(n.years,Math.floor(u));return e.trim([o,d,r].join(" "))},parse:function(t){var i=e.trim(t);return i=i.replace(/\.\d\d\d+/,""),i=i.replace(/-/,"/").replace(/-/,"/"),i=i.replace(/T/," ").replace(/Z/," UTC"),i=i.replace(/([\+\-]\d\d)\:?(\d\d)/," $1$2"),new Date(i)},datetime:function(t){var i="time"===e(t).get(0).tagName.toLowerCase(),n=e(t).attr(i?"datetime":"title");return r.parse(n)}}),e.fn.timeago=function(){var e=this;e.each(t);var i=r.settings;return i.refreshMillis>0&&setInterval(function(){e.each(t)},i.refreshMillis),e},document.createElement("abbr"),document.createElement("time")}(jQuery),function(e){var t=e({});e.subscribe=function(){t.on.apply(t,arguments)},e.unsubscribe=function(){t.off.apply(t,arguments)},e.publish=function(){t.trigger.apply(t,arguments)}}(jQuery),function(e){"function"==typeof define&&define.amd?define(["jquery"],e):e(jQuery)}(function(e){function t(e){return o.raw?e:decodeURIComponent(e.replace(n," "))}function i(e){0===e.indexOf('"')&&(e=e.slice(1,-1).replace(/\\"/g,'"').replace(/\\\\/g,"\\")),e=t(e);try{return o.json?JSON.parse(e):e}catch(i){}}var n=/\+/g,o=e.cookie=function(n,r,s){if(void 0!==r){if(s=e.extend({},o.defaults,s),"number"==typeof s.expires){var a=s.expires,l=s.expires=new Date;l.setDate(l.getDate()+a)}return r=o.json?JSON.stringify(r):String(r),document.cookie=[o.raw?n:encodeURIComponent(n),"=",o.raw?r:encodeURIComponent(r),s.expires?"; expires="+s.expires.toUTCString():"",s.path?"; path="+s.path:"",s.domain?"; domain="+s.domain:"",s.secure?"; secure":""].join("")}for(var c=document.cookie.split("; "),u=n?void 0:{},d=0,h=c.length;h>d;d++){var f=c[d].split("="),p=t(f.shift()),m=f.join("=");if(n&&n===p){u=i(m);break}n||(u[p]=i(m))}return u};o.defaults={},e.removeCookie=function(t,i){return void 0!==e.cookie(t)?(e.cookie(t,"",e.extend({},i,{expires:-1})),!0):!1}}),function(e){e.xhrPool=[],e.xhrPool.abortAll=function(){e(this).each(function(e,t){t.abort()}),e.xhrPool.length=0},e.ajaxSetup({complete:function(t){var i=e.xhrPool.indexOf(t);i>-1&&e.xhrPool.splice(i,1)}})}(jQuery),jQuery.fn.shrinkUp=function(){var e=Array.prototype.slice.call(arguments),t=e[0]||{},i=t.complete;t.complete=function(){$(this).removeAttr("style").hide(),"function"==typeof i&&i.apply(this,arguments)},e[0]=t,this.each(function(){e.unshift({height:0,opacity:0}),$.fn.animate.apply($(this),e)})},jQuery.fn.dropDown=function(){var e=Array.prototype.slice.call(arguments);this.each(function(){var t=$(this),i=t.show().height();e.unshift({height:i,opacity:1}),t.css({height:0,opacity:0}),$.fn.animate.apply(t,e)})},jQuery.fn.absolutize=function(e){return this.each(function(){var t=jQuery(this);if("absolute"==t.css("position"))return e&&t.originalPosition?t.css(t.originalPosition):t;var i=t.offset(),n=t.position(),o=n.top,r=i.left,s=t[0].clientWidth,a=t[0].clientHeight,l=parseFloat(t.css("left"));isNaN(l)&&(l=0);var c=parseFloat(t.css("top"));return isNaN(c)&&(c=0),t.originalPosition={left:r-l,top:o-c,width:t.css("width"),height:t.css("height")},t.css({position:"absolute",top:o,left:r,width:s,height:a})})},function(e,t,i){function n(){o=t[a](function(){r.each(function(){var t=e(this),i=t.width(),n=t.height(),o=e.data(this,c);(i!==o.w||n!==o.h)&&t.trigger(l,[o.w=i,o.h=n])}),n()},s[u])}var o,r=e([]),s=e.resize=e.extend(e.resize,{}),a="setTimeout",l="resize",c=l+"-special-event",u="delay",d="throttleWindow";s[u]=250,s[d]=!0,e.event.special[l]={setup:function(){if(!s[d]&&this[a])return!1;var t=e(this);r=r.add(t),e.data(this,c,{w:t.width(),h:t.height()}),1===r.length&&n()},teardown:function(){if(!s[d]&&this[a])return!1;var t=e(this);r=r.not(t),t.removeData(c),r.length||clearTimeout(o)},add:function(t){function n(t,n,r){var s=e(this),a=e.data(this,c);a.w=n!==i?n:s.width(),a.h=r!==i?r:s.height(),o.apply(this,arguments)}if(!s[d]&&this[a])return!1;var o;return e.isFunction(t)?(o=t,n):(o=t.handler,void(t.handler=n))}}}(jQuery,this),function(e){function t(e,t){var i=typeof e[t];return"function"===i||!("object"!=i||!e[t])||"unknown"==i}function i(e,t){return typeof e[t]!=v}function n(e,t){return!("object"!=typeof e[t]||!e[t])}function o(e){window.console&&window.console.log&&window.console.log("RangyInputs not supported in your browser. Reason: "+e)}function r(e,t,i){return 0>t&&(t+=e.value.length),typeof i==v&&(i=t),0>i&&(i+=e.value.length),{start:t,end:i}}function s(e,t,i){return{start:t,end:i,length:i-t,text:e.value.slice(t,i)}}function a(){return n(document,"body")?document.body:document.getElementsByTagName("body")[0]}var l,c,u,d,h,f,p,m,g,v="undefined";e(document).ready(function(){function y(e,t){return function(){var i=this.jquery?this[0]:this,n=i.nodeName.toLowerCase();if(1==i.nodeType&&("textarea"==n||"input"==n&&"text"==i.type)){var o=[i].concat(Array.prototype.slice.call(arguments)),r=e.apply(this,o);if(!t)return r}return t?this:void 0}}var b=document.createElement("textarea");if(a().appendChild(b),i(b,"selectionStart")&&i(b,"selectionEnd"))l=function(e){var t=e.selectionStart,i=e.selectionEnd;return s(e,t,i)},c=function(e,t,i){var n=r(e,t,i);e.selectionStart=n.start,e.selectionEnd=n.end},g=function(e,t){t?e.selectionEnd=e.selectionStart:e.selectionStart=e.selectionEnd};else{if(!(t(b,"createTextRange")&&n(document,"selection")&&t(document.selection,"createRange")))return a().removeChild(b),void o("No means of finding text input caret position");l=function(e){var t,i,n,o,r=0,a=0,l=document.selection.createRange();return l&&l.parentElement()==e&&(n=e.value.length,t=e.value.replace(/\r\n/g,"\n"),i=e.createTextRange(),i.moveToBookmark(l.getBookmark()),o=e.createTextRange(),o.collapse(!1),i.compareEndPoints("StartToEnd",o)>-1?r=a=n:(r=-i.moveStart("character",-n),r+=t.slice(0,r).split("\n").length-1,i.compareEndPoints("EndToEnd",o)>-1?a=n:(a=-i.moveEnd("character",-n),a+=t.slice(0,a).split("\n").length-1))),s(e,r,a)};var w=function(e,t){return t-(e.value.slice(0,t).split("\r\n").length-1)};c=function(e,t,i){var n=r(e,t,i),o=e.createTextRange(),s=w(e,n.start);o.collapse(!0),n.start==n.end?o.move("character",s):(o.moveEnd("character",w(e,n.end)),o.moveStart("character",s)),o.select()},g=function(e,t){var i=document.selection.createRange();i.collapse(t),i.select()}}a().removeChild(b),d=function(e,t,i,n){var o;t!=i&&(o=e.value,e.value=o.slice(0,t)+o.slice(i)),n&&c(e,t,t)},u=function(e){var t=l(e);d(e,t.start,t.end,!0)},m=function(e){var t,i=l(e);return i.start!=i.end&&(t=e.value,e.value=t.slice(0,i.start)+t.slice(i.end)),c(e,i.start,i.start),i.text};var _=function(e,t,i,n){var o=t+i.length;if(n="string"==typeof n?n.toLowerCase():"",("collapsetoend"==n||"select"==n)&&/[\r\n]/.test(i)){var r=i.replace(/\r\n/g,"\n").replace(/\r/g,"\n");o=t+r.length;var s=t+r.indexOf("\n");"\r\n"==e.value.slice(s,s+2)&&(o+=r.match(/\n/g).length)}switch(n){case"collapsetostart":c(e,t,t);break;case"collapsetoend":c(e,o,o);break;case"select":c(e,t,o)}};h=function(e,t,i,n){var o=e.value;e.value=o.slice(0,i)+t+o.slice(i),"boolean"==typeof n&&(n=n?"collapseToEnd":""),_(e,i,t,n)},f=function(e,t,i){var n=l(e),o=e.value;e.value=o.slice(0,n.start)+t+o.slice(n.end),_(e,n.start,t,i||"collapseToEnd")},p=function(e,t,i,n){typeof i==v&&(i=t);var o=l(e),r=e.value;e.value=r.slice(0,o.start)+t+o.text+i+r.slice(o.end);var s=o.start+t.length;_(e,s,o.text,n||"select")},e.fn.extend({getSelection:y(l,!1),setSelection:y(c,!0),collapseSelection:y(g,!0),deleteSelectedText:y(u,!0),deleteText:y(d,!0),extractSelectedText:y(m,!1),insertText:y(h,!0),replaceSelectedText:y(f,!0),surroundSelectedText:y(p,!0)})})}(jQuery),function(e,t){"object"==typeof exports?module.exports=t():"function"==typeof define&&define.amd?define(t):e.Spinner=t()}(this,function(){"use strict";function e(e,t){var i,n=document.createElement(e||"div");for(i in t)n[i]=t[i];return n}function t(e){for(var t=1,i=arguments.length;i>t;t++)e.appendChild(arguments[t]);return e}function i(e,t,i,n){var o=["opacity",t,~~(100*e),i,n].join("-"),r=.01+i/n*100,s=Math.max(1-(1-e)/t*(100-r),e),a=c.substring(0,c.indexOf("Animation")).toLowerCase(),l=a&&"-"+a+"-"||"";return d[o]||(h.insertRule("@"+l+"keyframes "+o+"{0%{opacity:"+s+"}"+r+"%{opacity:"+e+"}"+(r+.01)+"%{opacity:1}"+(r+t)%100+"%{opacity:"+e+"}100%{opacity:"+s+"}}",h.cssRules.length),d[o]=1),o}function n(e,t){var i,n,o=e.style;if(void 0!==o[t])return t;for(t=t.charAt(0).toUpperCase()+t.slice(1),n=0;n<u.length;n++)if(i=u[n]+t,void 0!==o[i])return i}function o(e,t){for(var i in t)e.style[n(e,i)||i]=t[i];return e}function r(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)void 0===e[n]&&(e[n]=i[n])}return e}function s(e){for(var t={x:e.offsetLeft,y:e.offsetTop};e=e.offsetParent;)t.x+=e.offsetLeft,t.y+=e.offsetTop;return t}function a(e){return"undefined"==typeof this?new a(e):void(this.opts=r(e||{},a.defaults,f))}function l(){function i(t,i){return e("<"+t+' xmlns="urn:schemas-microsoft.com:vml" class="spin-vml">',i)}h.addRule(".spin-vml","behavior:url(#default#VML)"),a.prototype.lines=function(e,n){function r(){return o(i("group",{coordsize:c+" "+c,coordorigin:-l+" "+-l}),{width:c,height:c})}function s(e,s,a){t(d,t(o(r(),{rotation:360/n.lines*e+"deg",left:~~s}),t(o(i("roundrect",{arcsize:n.corners}),{width:l,height:n.width,left:n.radius,top:-n.width>>1,filter:a}),i("fill",{color:n.color,opacity:n.opacity}),i("stroke",{opacity:0}))))}var a,l=n.length+n.width,c=2*l,u=2*-(n.width+n.length)+"px",d=o(r(),{position:"absolute",top:u,left:u});if(n.shadow)for(a=1;a<=n.lines;a++)s(a,-2,"progid:DXImageTransform.Microsoft.Blur(pixelradius=2,makeshadow=1,shadowopacity=.3)");for(a=1;a<=n.lines;a++)s(a);return t(e,d)},a.prototype.opacity=function(e,t,i,n){var o=e.firstChild;n=n.shadow&&n.lines||0,o&&t+n<o.childNodes.length&&(o=o.childNodes[t+n],o=o&&o.firstChild,o=o&&o.firstChild,o&&(o.opacity=i))}}var c,u=["webkit","Moz","ms","O"],d={},h=function(){var i=e("style",{type:"text/css"});return t(document.getElementsByTagName("head")[0],i),i.sheet||i.styleSheet}(),f={lines:12,length:7,width:5,radius:10,rotate:0,corners:1,color:"#000",direction:1,speed:1,trail:100,opacity:.25,fps:20,zIndex:2e9,className:"spinner",top:"auto",left:"auto",position:"relative"};a.defaults={},r(a.prototype,{spin:function(t){this.stop();var i,n,r=this,a=r.opts,l=r.el=o(e(0,{className:a.className}),{position:a.position,width:0,zIndex:a.zIndex}),u=a.radius+a.length+a.width;if(t&&(t.insertBefore(l,t.firstChild||null),n=s(t),i=s(l),o(l,{left:("auto"==a.left?n.x-i.x+(t.offsetWidth>>1):parseInt(a.left,10)+u)+"px",top:("auto"==a.top?n.y-i.y+(t.offsetHeight>>1):parseInt(a.top,10)+u)+"px"})),l.setAttribute("role","progressbar"),r.lines(l,r.opts),!c){var d,h=0,f=(a.lines-1)*(1-a.direction)/2,p=a.fps,m=p/a.speed,g=(1-a.opacity)/(m*a.trail/100),v=m/a.lines;!function y(){h++;for(var e=0;e<a.lines;e++)d=Math.max(1-(h+(a.lines-e)*v)%m*g,a.opacity),r.opacity(l,e*a.direction+f,d,a);r.timeout=r.el&&setTimeout(y,~~(1e3/p))}()}return r},stop:function(){var e=this.el;return e&&(clearTimeout(this.timeout),e.parentNode&&e.parentNode.removeChild(e),this.el=void 0),this},lines:function(n,r){function s(t,i){return o(e(),{position:"absolute",width:r.length+r.width+"px",height:r.width+"px",background:t,boxShadow:i,transformOrigin:"left",transform:"rotate("+~~(360/r.lines*l+r.rotate)+"deg) translate("+r.radius+"px,0)",borderRadius:(r.corners*r.width>>1)+"px"})}for(var a,l=0,u=(r.lines-1)*(1-r.direction)/2;l<r.lines;l++)a=o(e(),{position:"absolute",top:1+~(r.width/2)+"px",transform:r.hwaccel?"translate3d(0,0,0)":"",opacity:r.opacity,animation:c&&i(r.opacity,r.trail,u+l*r.direction,r.lines)+" "+1/r.speed+"s linear infinite"}),r.shadow&&t(a,o(s("#000","0 0 4px #000"),{top:"2px"})),t(n,t(a,s(r.color,"0 0 1px rgba(0,0,0,.1)")));return n},opacity:function(e,t,i){t<e.childNodes.length&&(e.childNodes[t].style.opacity=i)}});var p=o(e("group"),{behavior:"url(#default#VML)"});return!n(p,"transform")&&p.adj?l():c=n(p,"animation"),a}),function(e){if("object"==typeof exports)e(require("jquery"),require("spin"));else if("function"==typeof define&&define.amd)define(["jquery","spin"],e);else{if(!window.Spinner)throw new Error("Spin.js not present");e(window.jQuery,window.Spinner)}}(function(e,t){e.fn.spin=function(i,n){return this.each(function(){var o=e(this),r=o.data();r.spinner&&(r.spinner.stop(),delete r.spinner),i!==!1&&(i=e.extend({color:n||o.css("color")},e.fn.spin.presets[i]||i),r.spinner=new t(i).spin(this))})},e.fn.spin.presets={tiny:{lines:8,length:2,width:2,radius:3},small:{lines:8,length:4,width:3,radius:5},large:{lines:10,length:8,width:4,radius:8}}}),function(e){function t(e){return"object"==typeof e?e:{top:e,left:e}}var i=e.scrollTo=function(t,i,n){e(window).scrollTo(t,i,n)};i.defaults={axis:"xy",duration:parseFloat(e.fn.jquery)>=1.3?0:1,limit:!0},i.window=function(){return e(window)._scrollable()},e.fn._scrollable=function(){return this.map(function(){var t=this,i=!t.nodeName||-1!=e.inArray(t.nodeName.toLowerCase(),["iframe","#document","html","body"]);if(!i)return t;var n=(t.contentWindow||t).document||t.ownerDocument||t;return/webkit/i.test(navigator.userAgent)||"BackCompat"==n.compatMode?n.body:n.documentElement})},e.fn.scrollTo=function(n,o,r){return"object"==typeof o&&(r=o,o=0),"function"==typeof r&&(r={onAfter:r}),"max"==n&&(n=9e9),r=e.extend({},i.defaults,r),o=o||r.duration,r.queue=r.queue&&r.axis.length>1,r.queue&&(o/=2),r.offset=t(r.offset),r.over=t(r.over),this._scrollable().each(function(){function s(e){c.animate(d,o,r.easing,e&&function(){e.call(this,n,r)})}if(null!=n){var a,l=this,c=e(l),u=n,d={},h=c.is("html,body");switch(typeof u){case"number":case"string":if(/^([+-]=)?\d+(\.\d+)?(px|%)?$/.test(u)){u=t(u);break}if(u=e(u,this),!u.length)return;case"object":(u.is||u.style)&&(a=(u=e(u)).offset())}e.each(r.axis.split(""),function(e,t){var n="x"==t?"Left":"Top",o=n.toLowerCase(),f="scroll"+n,p=l[f],m=i.max(l,t);if(a)d[f]=a[o]+(h?0:p-c.offset()[o]),r.margin&&(d[f]-=parseInt(u.css("margin"+n))||0,d[f]-=parseInt(u.css("border"+n+"Width"))||0),d[f]+=r.offset[o]||0,r.over[o]&&(d[f]+=u["x"==t?"width":"height"]()*r.over[o]);else{var g=u[o];d[f]=g.slice&&"%"==g.slice(-1)?parseFloat(g)/100*m:g}r.limit&&/^\d+$/.test(d[f])&&(d[f]=d[f]<=0?0:Math.min(d[f],m)),!e&&r.queue&&(p!=d[f]&&s(r.onAfterFirst),delete d[f])}),s(r.onAfter)}}).end()},i.max=function(t,i){var n="x"==i?"Width":"Height",o="scroll"+n;if(!e(t).is("html,body"))return t[o]-e(t)[n.toLowerCase()]();var r="client"+n,s=t.ownerDocument.documentElement,a=t.ownerDocument.body;return Math.max(s[o],a[o])-Math.min(s[r],a[r])}}(jQuery),function(e){"use strict";"object"==typeof exports?e(require("jquery")):"function"==typeof define&&define.amd?define(["jquery"],e):e(jQuery)}(function(e){"use strict";var t={},i=0;e.fn.once=function(n,o){"string"!=typeof n&&(n in t||(t[n]=++i),o||(o=n),n="jquery-once-"+t[n]);var r=n+"-processed",s=this.not("."+r).addClass(r);return e.isFunction(o)?s.each(o):s},e.fn.removeOnce=function(t,i){var n=t+"-processed",o=this.filter("."+n).removeClass(n);return e.isFunction(i)?o.each(i):o}}),function(){var e=[].indexOf||function(e){for(var t=0,i=this.length;i>t;t++)if(t in this&&this[t]===e)return t;return-1},t=[].slice;!function(e,t){return"function"==typeof define&&define.amd?define("waypoints",["jquery"],function(i){return t(i,e)}):t(e.jQuery,e)}(this,function(i,n){var o,r,s,a,l,c,u,d,h,f,p,m,g,v,y,b;return o=i(n),d=e.call(n,"ontouchstart")>=0,a={horizontal:{},vertical:{}},l=1,u={},c="waypoints-context-id",p="resize.waypoints",m="scroll.waypoints",g=1,v="waypoints-waypoint-ids",y="waypoint",b="waypoints",r=function(){function e(e){var t=this;this.$element=e,this.element=e[0],this.didResize=!1,this.didScroll=!1,this.id="context"+l++,this.oldScroll={x:e.scrollLeft(),y:e.scrollTop()},this.waypoints={horizontal:{},vertical:{}},this.element[c]=this.id,u[this.id]=this,e.bind(m,function(){var e;return t.didScroll||d?void 0:(t.didScroll=!0,e=function(){return t.doScroll(),t.didScroll=!1},n.setTimeout(e,i[b].settings.scrollThrottle))}),e.bind(p,function(){var e;return t.didResize?void 0:(t.didResize=!0,e=function(){return i[b]("refresh"),t.didResize=!1},n.setTimeout(e,i[b].settings.resizeThrottle))})}return e.prototype.doScroll=function(){var e,t=this;return e={horizontal:{newScroll:this.$element.scrollLeft(),oldScroll:this.oldScroll.x,forward:"right",backward:"left"},vertical:{newScroll:this.$element.scrollTop(),oldScroll:this.oldScroll.y,forward:"down",backward:"up"}},!d||e.vertical.oldScroll&&e.vertical.newScroll||i[b]("refresh"),i.each(e,function(e,n){var o,r,s;return s=[],r=n.newScroll>n.oldScroll,o=r?n.forward:n.backward,i.each(t.waypoints[e],function(e,t){var i,o;return n.oldScroll<(i=t.offset)&&i<=n.newScroll?s.push(t):n.newScroll<(o=t.offset)&&o<=n.oldScroll?s.push(t):void 0}),s.sort(function(e,t){return e.offset-t.offset}),r||s.reverse(),i.each(s,function(e,t){return t.options.continuous||e===s.length-1?t.trigger([o]):void 0})}),this.oldScroll={x:e.horizontal.newScroll,y:e.vertical.newScroll}},e.prototype.refresh=function(){var e,t,n,o=this;return n=i.isWindow(this.element),t=this.$element.offset(),this.doScroll(),e={horizontal:{contextOffset:n?0:t.left,contextScroll:n?0:this.oldScroll.x,contextDimension:this.$element.width(),oldScroll:this.oldScroll.x,forward:"right",backward:"left",offsetProp:"left"},vertical:{contextOffset:n?0:t.top,contextScroll:n?0:this.oldScroll.y,contextDimension:n?i[b]("viewportHeight"):this.$element.height(),oldScroll:this.oldScroll.y,forward:"down",backward:"up",offsetProp:"top"}},i.each(e,function(e,t){return i.each(o.waypoints[e],function(e,n){var o,r,s,a,l;return o=n.options.offset,s=n.offset,r=i.isWindow(n.element)?0:n.$element.offset()[t.offsetProp],i.isFunction(o)?o=o.apply(n.element):"string"==typeof o&&(o=parseFloat(o),n.options.offset.indexOf("%")>-1&&(o=Math.ceil(t.contextDimension*o/100))),n.offset=r-t.contextOffset+t.contextScroll-o,n.options.onlyOnScroll&&null!=s||!n.enabled?void 0:null!==s&&s<(a=t.oldScroll)&&a<=n.offset?n.trigger([t.backward]):null!==s&&s>(l=t.oldScroll)&&l>=n.offset?n.trigger([t.forward]):null===s&&t.oldScroll>=n.offset?n.trigger([t.forward]):void 0})})},e.prototype.checkEmpty=function(){return i.isEmptyObject(this.waypoints.horizontal)&&i.isEmptyObject(this.waypoints.vertical)?(this.$element.unbind([p,m].join(" ")),delete u[this.id]):void 0},e}(),s=function(){function e(e,t,n){var o,r;n=i.extend({},i.fn[y].defaults,n),"bottom-in-view"===n.offset&&(n.offset=function(){var e;return e=i[b]("viewportHeight"),i.isWindow(t.element)||(e=t.$element.height()),e-i(this).outerHeight()}),this.$element=e,this.element=e[0],this.axis=n.horizontal?"horizontal":"vertical",this.callback=n.handler,this.context=t,this.enabled=n.enabled,this.id="waypoints"+g++,this.offset=null,this.options=n,t.waypoints[this.axis][this.id]=this,a[this.axis][this.id]=this,o=null!=(r=this.element[v])?r:[],o.push(this.id),this.element[v]=o}return e.prototype.trigger=function(e){return this.enabled?(null!=this.callback&&this.callback.apply(this.element,e),this.options.triggerOnce?this.destroy():void 0):void 0},e.prototype.disable=function(){return this.enabled=!1},e.prototype.enable=function(){return this.context.refresh(),this.enabled=!0},e.prototype.destroy=function(){return delete a[this.axis][this.id],delete this.context.waypoints[this.axis][this.id],this.context.checkEmpty()},e.getWaypointsByElement=function(e){var t,n;return(n=e[v])?(t=i.extend({},a.horizontal,a.vertical),i.map(n,function(e){return t[e]})):[]},e}(),f={init:function(e,t){var n;return null==t&&(t={}),null==(n=t.handler)&&(t.handler=e),this.each(function(){var e,n,o,a;return e=i(this),o=null!=(a=t.context)?a:i.fn[y].defaults.context,i.isWindow(o)||(o=e.closest(o)),o=i(o),n=u[o[0][c]],n||(n=new r(o)),new s(e,n,t)}),i[b]("refresh"),this},disable:function(){return f._invoke.call(this,"disable")},enable:function(){return f._invoke.call(this,"enable")},destroy:function(){return f._invoke.call(this,"destroy")},prev:function(e,t){return f._traverse.call(this,e,t,function(e,t,i){return t>0?e.push(i[t-1]):void 0})},next:function(e,t){return f._traverse.call(this,e,t,function(e,t,i){return t<i.length-1?e.push(i[t+1]):void 0})},_traverse:function(e,t,o){var r,s;return null==e&&(e="vertical"),null==t&&(t=n),s=h.aggregate(t),r=[],this.each(function(){var t;return t=i.inArray(this,s[e]),o(r,t,s[e])}),this.pushStack(r)},_invoke:function(e){return this.each(function(){var t;return t=s.getWaypointsByElement(this),i.each(t,function(t,i){return i[e](),!0})}),this}},i.fn[y]=function(){var e,n;return n=arguments[0],e=2<=arguments.length?t.call(arguments,1):[],f[n]?f[n].apply(this,e):i.isFunction(n)?f.init.apply(this,arguments):i.isPlainObject(n)?f.init.apply(this,[null,n]):i.error(n?"The "+n+" method does not exist in jQuery Waypoints.":"jQuery Waypoints needs a callback function or handler option.")},i.fn[y].defaults={context:n,continuous:!0,enabled:!0,horizontal:!1,offset:0,triggerOnce:!1},h={refresh:function(){return i.each(u,function(e,t){return t.refresh()})},viewportHeight:function(){var e;return null!=(e=n.innerHeight)?e:o.height()},aggregate:function(e){var t,n,o;return t=a,e&&(t=null!=(o=u[i(e)[0][c]])?o.waypoints:void 0),t?(n={horizontal:[],vertical:[]},i.each(n,function(e,o){return i.each(t[e],function(e,t){return o.push(t)}),o.sort(function(e,t){return e.offset-t.offset}),n[e]=i.map(o,function(e){return e.element}),n[e]=i.unique(n[e])}),n):[]},above:function(e){return null==e&&(e=n),h._filter(e,"vertical",function(e,t){return t.offset<=e.oldScroll.y})},below:function(e){return null==e&&(e=n),h._filter(e,"vertical",function(e,t){return t.offset>e.oldScroll.y})},left:function(e){return null==e&&(e=n),h._filter(e,"horizontal",function(e,t){return t.offset<=e.oldScroll.x
})},right:function(e){return null==e&&(e=n),h._filter(e,"horizontal",function(e,t){return t.offset>e.oldScroll.x})},enable:function(){return h._invoke("enable")},disable:function(){return h._invoke("disable")},destroy:function(){return h._invoke("destroy")},extendFn:function(e,t){return f[e]=t},_invoke:function(e){var t;return t=i.extend({},a.vertical,a.horizontal),i.each(t,function(t,i){return i[e](),!0})},_filter:function(e,t,n){var o,r;return(o=u[i(e)[0][c]])?(r=[],i.each(o.waypoints[t],function(e,t){return n(o,t)?r.push(t):void 0}),r.sort(function(e,t){return e.offset-t.offset}),i.map(r,function(e){return e.element})):[]}},i[b]=function(){var e,i;return i=arguments[0],e=2<=arguments.length?t.call(arguments,1):[],h[i]?h[i].apply(null,e):h.aggregate.call(null,i)},i[b].settings={resizeThrottle:100,scrollThrottle:30},o.load(function(){return i[b]("refresh")})})}.call(this),!function(e){"use strict";function t(e){return(e||"").toLowerCase()}var i="2.1.5";e.fn.cycle=function(i){var n;return 0!==this.length||e.isReady?this.each(function(){var n,o,r,s,a=e(this),l=e.fn.cycle.log;if(!a.data("cycle.opts")){(a.data("cycle-log")===!1||i&&i.log===!1||o&&o.log===!1)&&(l=e.noop),l("--c2 init--"),n=a.data();for(var c in n)n.hasOwnProperty(c)&&/^cycle[A-Z]+/.test(c)&&(s=n[c],r=c.match(/^cycle(.*)/)[1].replace(/^[A-Z]/,t),l(r+":",s,"("+typeof s+")"),n[r]=s);o=e.extend({},e.fn.cycle.defaults,n,i||{}),o.timeoutId=0,o.paused=o.paused||!1,o.container=a,o._maxZ=o.maxZ,o.API=e.extend({_container:a},e.fn.cycle.API),o.API.log=l,o.API.trigger=function(e,t){return o.container.trigger(e,t),o.API},a.data("cycle.opts",o),a.data("cycle.API",o.API),o.API.trigger("cycle-bootstrap",[o,o.API]),o.API.addInitialSlides(),o.API.preInitSlideshow(),o.slides.length&&o.API.initSlideshow()}}):(n={s:this.selector,c:this.context},e.fn.cycle.log("requeuing slideshow (dom not ready)"),e(function(){e(n.s,n.c).cycle(i)}),this)},e.fn.cycle.API={opts:function(){return this._container.data("cycle.opts")},addInitialSlides:function(){var t=this.opts(),i=t.slides;t.slideCount=0,t.slides=e(),i=i.jquery?i:t.container.find(i),t.random&&i.sort(function(){return Math.random()-.5}),t.API.add(i)},preInitSlideshow:function(){var t=this.opts();t.API.trigger("cycle-pre-initialize",[t]);var i=e.fn.cycle.transitions[t.fx];i&&e.isFunction(i.preInit)&&i.preInit(t),t._preInitialized=!0},postInitSlideshow:function(){var t=this.opts();t.API.trigger("cycle-post-initialize",[t]);var i=e.fn.cycle.transitions[t.fx];i&&e.isFunction(i.postInit)&&i.postInit(t)},initSlideshow:function(){var t,i=this.opts(),n=i.container;i.API.calcFirstSlide(),"static"==i.container.css("position")&&i.container.css("position","relative"),e(i.slides[i.currSlide]).css({opacity:1,display:"block",visibility:"visible"}),i.API.stackSlides(i.slides[i.currSlide],i.slides[i.nextSlide],!i.reverse),i.pauseOnHover&&(i.pauseOnHover!==!0&&(n=e(i.pauseOnHover)),n.hover(function(){i.API.pause(!0)},function(){i.API.resume(!0)})),i.timeout&&(t=i.API.getSlideOpts(i.currSlide),i.API.queueTransition(t,t.timeout+i.delay)),i._initialized=!0,i.API.updateView(!0),i.API.trigger("cycle-initialized",[i]),i.API.postInitSlideshow()},pause:function(t){var i=this.opts(),n=i.API.getSlideOpts(),o=i.hoverPaused||i.paused;t?i.hoverPaused=!0:i.paused=!0,o||(i.container.addClass("cycle-paused"),i.API.trigger("cycle-paused",[i]).log("cycle-paused"),n.timeout&&(clearTimeout(i.timeoutId),i.timeoutId=0,i._remainingTimeout-=e.now()-i._lastQueue,(i._remainingTimeout<0||isNaN(i._remainingTimeout))&&(i._remainingTimeout=void 0)))},resume:function(e){var t=this.opts(),i=!t.hoverPaused&&!t.paused;e?t.hoverPaused=!1:t.paused=!1,i||(t.container.removeClass("cycle-paused"),0===t.slides.filter(":animated").length&&t.API.queueTransition(t.API.getSlideOpts(),t._remainingTimeout),t.API.trigger("cycle-resumed",[t,t._remainingTimeout]).log("cycle-resumed"))},add:function(t,i){var n,o=this.opts(),r=o.slideCount,s=!1;"string"==e.type(t)&&(t=e.trim(t)),e(t).each(function(){var t,n=e(this);i?o.container.prepend(n):o.container.append(n),o.slideCount++,t=o.API.buildSlideOpts(n),o.slides=i?e(n).add(o.slides):o.slides.add(n),o.API.initSlide(t,n,--o._maxZ),n.data("cycle.opts",t),o.API.trigger("cycle-slide-added",[o,t,n])}),o.API.updateView(!0),s=o._preInitialized&&2>r&&o.slideCount>=1,s&&(o._initialized?o.timeout&&(n=o.slides.length,o.nextSlide=o.reverse?n-1:1,o.timeoutId||o.API.queueTransition(o)):o.API.initSlideshow())},calcFirstSlide:function(){var e,t=this.opts();e=parseInt(t.startingSlide||0,10),(e>=t.slides.length||0>e)&&(e=0),t.currSlide=e,t.reverse?(t.nextSlide=e-1,t.nextSlide<0&&(t.nextSlide=t.slides.length-1)):(t.nextSlide=e+1,t.nextSlide==t.slides.length&&(t.nextSlide=0))},calcNextSlide:function(){var e,t=this.opts();t.reverse?(e=t.nextSlide-1<0,t.nextSlide=e?t.slideCount-1:t.nextSlide-1,t.currSlide=e?0:t.nextSlide+1):(e=t.nextSlide+1==t.slides.length,t.nextSlide=e?0:t.nextSlide+1,t.currSlide=e?t.slides.length-1:t.nextSlide-1)},calcTx:function(t,i){var n,o=t;return o._tempFx?n=e.fn.cycle.transitions[o._tempFx]:i&&o.manualFx&&(n=e.fn.cycle.transitions[o.manualFx]),n||(n=e.fn.cycle.transitions[o.fx]),o._tempFx=null,this.opts()._tempFx=null,n||(n=e.fn.cycle.transitions.fade,o.API.log('Transition "'+o.fx+'" not found.  Using fade.')),n},prepareTx:function(e,t){var i,n,o,r,s,a=this.opts();return a.slideCount<2?void(a.timeoutId=0):(!e||a.busy&&!a.manualTrump||(a.API.stopTransition(),a.busy=!1,clearTimeout(a.timeoutId),a.timeoutId=0),void(a.busy||(0!==a.timeoutId||e)&&(n=a.slides[a.currSlide],o=a.slides[a.nextSlide],r=a.API.getSlideOpts(a.nextSlide),s=a.API.calcTx(r,e),a._tx=s,e&&void 0!==r.manualSpeed&&(r.speed=r.manualSpeed),a.nextSlide!=a.currSlide&&(e||!a.paused&&!a.hoverPaused&&a.timeout)?(a.API.trigger("cycle-before",[r,n,o,t]),s.before&&s.before(r,n,o,t),i=function(){a.busy=!1,a.container.data("cycle.opts")&&(s.after&&s.after(r,n,o,t),a.API.trigger("cycle-after",[r,n,o,t]),a.API.queueTransition(r),a.API.updateView(!0))},a.busy=!0,s.transition?s.transition(r,n,o,t,i):a.API.doTransition(r,n,o,t,i),a.API.calcNextSlide(),a.API.updateView()):a.API.queueTransition(r))))},doTransition:function(t,i,n,o,r){var s=t,a=e(i),l=e(n),c=function(){l.animate(s.animIn||{opacity:1},s.speed,s.easeIn||s.easing,r)};l.css(s.cssBefore||{}),a.animate(s.animOut||{},s.speed,s.easeOut||s.easing,function(){a.css(s.cssAfter||{}),s.sync||c()}),s.sync&&c()},queueTransition:function(t,i){var n=this.opts(),o=void 0!==i?i:t.timeout;return 0===n.nextSlide&&0===--n.loop?(n.API.log("terminating; loop=0"),n.timeout=0,o?setTimeout(function(){n.API.trigger("cycle-finished",[n])},o):n.API.trigger("cycle-finished",[n]),void(n.nextSlide=n.currSlide)):void 0!==n.continueAuto&&(n.continueAuto===!1||e.isFunction(n.continueAuto)&&n.continueAuto()===!1)?(n.API.log("terminating automatic transitions"),n.timeout=0,void(n.timeoutId&&clearTimeout(n.timeoutId))):void(o&&(n._lastQueue=e.now(),void 0===i&&(n._remainingTimeout=t.timeout),n.paused||n.hoverPaused||(n.timeoutId=setTimeout(function(){n.API.prepareTx(!1,!n.reverse)},o))))},stopTransition:function(){var e=this.opts();e.slides.filter(":animated").length&&(e.slides.stop(!1,!0),e.API.trigger("cycle-transition-stopped",[e])),e._tx&&e._tx.stopTransition&&e._tx.stopTransition(e)},advanceSlide:function(e){var t=this.opts();return clearTimeout(t.timeoutId),t.timeoutId=0,t.nextSlide=t.currSlide+e,t.nextSlide<0?t.nextSlide=t.slides.length-1:t.nextSlide>=t.slides.length&&(t.nextSlide=0),t.API.prepareTx(!0,e>=0),!1},buildSlideOpts:function(i){var n,o,r=this.opts(),s=i.data()||{};for(var a in s)s.hasOwnProperty(a)&&/^cycle[A-Z]+/.test(a)&&(n=s[a],o=a.match(/^cycle(.*)/)[1].replace(/^[A-Z]/,t),r.API.log("["+(r.slideCount-1)+"]",o+":",n,"("+typeof n+")"),s[o]=n);s=e.extend({},e.fn.cycle.defaults,r,s),s.slideNum=r.slideCount;try{delete s.API,delete s.slideCount,delete s.currSlide,delete s.nextSlide,delete s.slides}catch(l){}return s},getSlideOpts:function(t){var i=this.opts();void 0===t&&(t=i.currSlide);var n=i.slides[t],o=e(n).data("cycle.opts");return e.extend({},i,o)},initSlide:function(t,i,n){var o=this.opts();i.css(t.slideCss||{}),n>0&&i.css("zIndex",n),isNaN(t.speed)&&(t.speed=e.fx.speeds[t.speed]||e.fx.speeds._default),t.sync||(t.speed=t.speed/2),i.addClass(o.slideClass)},updateView:function(e,t){var i=this.opts();if(i._initialized){var n=i.API.getSlideOpts(),o=i.slides[i.currSlide];!e&&t!==!0&&(i.API.trigger("cycle-update-view-before",[i,n,o]),i.updateView<0)||(i.slideActiveClass&&i.slides.removeClass(i.slideActiveClass).eq(i.currSlide).addClass(i.slideActiveClass),e&&i.hideNonActive&&i.slides.filter(":not(."+i.slideActiveClass+")").css("visibility","hidden"),0===i.updateView&&setTimeout(function(){i.API.trigger("cycle-update-view",[i,n,o,e])},n.speed/(i.sync?2:1)),0!==i.updateView&&i.API.trigger("cycle-update-view",[i,n,o,e]),e&&i.API.trigger("cycle-update-view-after",[i,n,o]))}},getComponent:function(t){var i=this.opts(),n=i[t];return"string"==typeof n?/^\s*[\>|\+|~]/.test(n)?i.container.find(n):e(n):n.jquery?n:e(n)},stackSlides:function(t,i,n){var o=this.opts();t||(t=o.slides[o.currSlide],i=o.slides[o.nextSlide],n=!o.reverse),e(t).css("zIndex",o.maxZ);var r,s=o.maxZ-2,a=o.slideCount;if(n){for(r=o.currSlide+1;a>r;r++)e(o.slides[r]).css("zIndex",s--);for(r=0;r<o.currSlide;r++)e(o.slides[r]).css("zIndex",s--)}else{for(r=o.currSlide-1;r>=0;r--)e(o.slides[r]).css("zIndex",s--);for(r=a-1;r>o.currSlide;r--)e(o.slides[r]).css("zIndex",s--)}e(i).css("zIndex",o.maxZ-1)},getSlideIndex:function(e){return this.opts().slides.index(e)}},e.fn.cycle.log=function(){window.console&&console.log&&console.log("[cycle2] "+Array.prototype.join.call(arguments," "))},e.fn.cycle.version=function(){return"Cycle2: "+i},e.fn.cycle.transitions={custom:{},none:{before:function(e,t,i,n){e.API.stackSlides(i,t,n),e.cssBefore={opacity:1,visibility:"visible",display:"block"}}},fade:{before:function(t,i,n,o){var r=t.API.getSlideOpts(t.nextSlide).slideCss||{};t.API.stackSlides(i,n,o),t.cssBefore=e.extend(r,{opacity:0,visibility:"visible",display:"block"}),t.animIn={opacity:1},t.animOut={opacity:0}}},fadeout:{before:function(t,i,n,o){var r=t.API.getSlideOpts(t.nextSlide).slideCss||{};t.API.stackSlides(i,n,o),t.cssBefore=e.extend(r,{opacity:1,visibility:"visible",display:"block"}),t.animOut={opacity:0}}},scrollHorz:{before:function(e,t,i,n){e.API.stackSlides(t,i,n);var o=e.container.css("overflow","hidden").width();e.cssBefore={left:n?o:-o,top:0,opacity:1,visibility:"visible",display:"block"},e.cssAfter={zIndex:e._maxZ-2,left:0},e.animIn={left:0},e.animOut={left:n?-o:o}}}},e.fn.cycle.defaults={allowWrap:!0,autoSelector:".cycle-slideshow[data-cycle-auto-init!=false]",delay:0,easing:null,fx:"fade",hideNonActive:!0,loop:0,manualFx:void 0,manualSpeed:void 0,manualTrump:!0,maxZ:100,pauseOnHover:!1,reverse:!1,slideActiveClass:"cycle-slide-active",slideClass:"cycle-slide",slideCss:{position:"absolute",top:0,left:0},slides:"> img",speed:500,startingSlide:0,sync:!0,timeout:4e3,updateView:0},e(document).ready(function(){e(e.fn.cycle.defaults.autoSelector).cycle()})}(jQuery),function(e){"use strict";function t(t,n){var o,r,s,a=n.autoHeight;if("container"==a)r=e(n.slides[n.currSlide]).outerHeight(),n.container.height(r);else if(n._autoHeightRatio)n.container.height(n.container.width()/n._autoHeightRatio);else if("calc"===a||"number"==e.type(a)&&a>=0){if(s="calc"===a?i(t,n):a>=n.slides.length?0:a,s==n._sentinelIndex)return;n._sentinelIndex=s,n._sentinel&&n._sentinel.remove(),o=e(n.slides[s].cloneNode(!0)),o.removeAttr("id name rel").find("[id],[name],[rel]").removeAttr("id name rel"),o.css({position:"static",visibility:"hidden",display:"block"}).prependTo(n.container).addClass("cycle-sentinel cycle-slide").removeClass("cycle-slide-active"),o.find("*").css("visibility","hidden"),n._sentinel=o}}function i(t,i){var n=0,o=-1;return i.slides.each(function(t){var i=e(this).height();i>o&&(o=i,n=t)}),n}function n(t,i,n,o){var r=e(o).outerHeight();i.container.animate({height:r},i.autoHeightSpeed,i.autoHeightEasing)}function o(i,r){r._autoHeightOnResize&&(e(window).off("resize orientationchange",r._autoHeightOnResize),r._autoHeightOnResize=null),r.container.off("cycle-slide-added cycle-slide-removed",t),r.container.off("cycle-destroyed",o),r.container.off("cycle-before",n),r._sentinel&&(r._sentinel.remove(),r._sentinel=null)}e.extend(e.fn.cycle.defaults,{autoHeight:0,autoHeightSpeed:250,autoHeightEasing:null}),e(document).on("cycle-initialized",function(i,r){function s(){t(i,r)}var a,l=r.autoHeight,c=e.type(l),u=null;("string"===c||"number"===c)&&(r.container.on("cycle-slide-added cycle-slide-removed",t),r.container.on("cycle-destroyed",o),"container"==l?r.container.on("cycle-before",n):"string"===c&&/\d+\:\d+/.test(l)&&(a=l.match(/(\d+)\:(\d+)/),a=a[1]/a[2],r._autoHeightRatio=a),"number"!==c&&(r._autoHeightOnResize=function(){clearTimeout(u),u=setTimeout(s,50)},e(window).on("resize orientationchange",r._autoHeightOnResize)),setTimeout(s,30))})}(jQuery),function(e){"use strict";e.extend(e.fn.cycle.defaults,{caption:"> .cycle-caption",captionTemplate:"{{slideNum}} / {{slideCount}}",overlay:"> .cycle-overlay",overlayTemplate:"<div>{{title}}</div><div>{{desc}}</div>",captionModule:"caption"}),e(document).on("cycle-update-view",function(t,i,n,o){"caption"===i.captionModule&&e.each(["caption","overlay"],function(){var e=this,t=n[e+"Template"],r=i.API.getComponent(e);r.length&&t?(r.html(i.API.tmpl(t,n,i,o)),r.show()):r.hide()})}),e(document).on("cycle-destroyed",function(t,i){var n;e.each(["caption","overlay"],function(){var e=this,t=i[e+"Template"];i[e]&&t&&(n=i.API.getComponent("caption"),n.empty())})})}(jQuery),function(e){"use strict";var t=e.fn.cycle;e.fn.cycle=function(i){var n,o,r,s=e.makeArray(arguments);return"number"==e.type(i)?this.cycle("goto",i):"string"==e.type(i)?this.each(function(){var a;return n=i,r=e(this).data("cycle.opts"),void 0===r?void t.log('slideshow must be initialized before sending commands; "'+n+'" ignored'):(n="goto"==n?"jump":n,o=r.API[n],e.isFunction(o)?(a=e.makeArray(s),a.shift(),o.apply(r.API,a)):void t.log("unknown command: ",n))}):t.apply(this,arguments)},e.extend(e.fn.cycle,t),e.extend(t.API,{next:function(){var e=this.opts();if(!e.busy||e.manualTrump){var t=e.reverse?-1:1;e.allowWrap===!1&&e.currSlide+t>=e.slideCount||(e.API.advanceSlide(t),e.API.trigger("cycle-next",[e]).log("cycle-next"))}},prev:function(){var e=this.opts();if(!e.busy||e.manualTrump){var t=e.reverse?1:-1;e.allowWrap===!1&&e.currSlide+t<0||(e.API.advanceSlide(t),e.API.trigger("cycle-prev",[e]).log("cycle-prev"))}},destroy:function(){this.stop();var t=this.opts(),i=e.isFunction(e._data)?e._data:e.noop;clearTimeout(t.timeoutId),t.timeoutId=0,t.API.stop(),t.API.trigger("cycle-destroyed",[t]).log("cycle-destroyed"),t.container.removeData(),i(t.container[0],"parsedAttrs",!1),t.retainStylesOnDestroy||(t.container.removeAttr("style"),t.slides.removeAttr("style"),t.slides.removeClass(t.slideActiveClass)),t.slides.each(function(){e(this).removeData(),i(this,"parsedAttrs",!1)})},jump:function(e,t){var i,n=this.opts();if(!n.busy||n.manualTrump){var o=parseInt(e,10);if(isNaN(o)||0>o||o>=n.slides.length)return void n.API.log("goto: invalid slide index: "+o);if(o==n.currSlide)return void n.API.log("goto: skipping, already on slide",o);n.nextSlide=o,clearTimeout(n.timeoutId),n.timeoutId=0,n.API.log("goto: ",o," (zero-index)"),i=n.currSlide<n.nextSlide,n._tempFx=t,n.API.prepareTx(!0,i)}},stop:function(){var t=this.opts(),i=t.container;clearTimeout(t.timeoutId),t.timeoutId=0,t.API.stopTransition(),t.pauseOnHover&&(t.pauseOnHover!==!0&&(i=e(t.pauseOnHover)),i.off("mouseenter mouseleave")),t.API.trigger("cycle-stopped",[t]).log("cycle-stopped")},reinit:function(){var e=this.opts();e.API.destroy(),e.container.cycle()},remove:function(t){for(var i,n,o=this.opts(),r=[],s=1,a=0;a<o.slides.length;a++)i=o.slides[a],a==t?n=i:(r.push(i),e(i).data("cycle.opts").slideNum=s,s++);n&&(o.slides=e(r),o.slideCount--,e(n).remove(),t==o.currSlide?o.API.advanceSlide(1):t<o.currSlide?o.currSlide--:o.currSlide++,o.API.trigger("cycle-slide-removed",[o,t,n]).log("cycle-slide-removed"),o.API.updateView())}}),e(document).on("click.cycle","[data-cycle-cmd]",function(t){t.preventDefault();var i=e(this),n=i.data("cycle-cmd"),o=i.data("cycle-context")||".cycle-slideshow";e(o).cycle(n,i.data("cycle-arg"))})}(jQuery),function(e){"use strict";function t(t,i){var n;return t._hashFence?void(t._hashFence=!1):(n=window.location.hash.substring(1),void t.slides.each(function(o){if(e(this).data("cycle-hash")==n){if(i===!0)t.startingSlide=o;else{var r=t.currSlide<o;t.nextSlide=o,t.API.prepareTx(!0,r)}return!1}}))}e(document).on("cycle-pre-initialize",function(i,n){t(n,!0),n._onHashChange=function(){t(n,!1)},e(window).on("hashchange",n._onHashChange)}),e(document).on("cycle-update-view",function(e,t,i){i.hash&&"#"+i.hash!=window.location.hash&&(t._hashFence=!0,window.location.hash=i.hash)}),e(document).on("cycle-destroyed",function(t,i){i._onHashChange&&e(window).off("hashchange",i._onHashChange)})}(jQuery),function(e){"use strict";e.extend(e.fn.cycle.defaults,{loader:!1}),e(document).on("cycle-bootstrap",function(t,i){function n(t,n){function r(t){var r;"wait"==i.loader?(a.push(t),0===c&&(a.sort(s),o.apply(i.API,[a,n]),i.container.removeClass("cycle-loading"))):(r=e(i.slides[i.currSlide]),o.apply(i.API,[t,n]),r.show(),i.container.removeClass("cycle-loading"))}function s(e,t){return e.data("index")-t.data("index")}var a=[];if("string"==e.type(t))t=e.trim(t);else if("array"===e.type(t))for(var l=0;l<t.length;l++)t[l]=e(t[l])[0];t=e(t);var c=t.length;c&&(t.css("visibility","hidden").appendTo("body").each(function(t){function s(){0===--l&&(--c,r(u))}var l=0,u=e(this),d=u.is("img")?u:u.find("img");return u.data("index",t),d=d.filter(":not(.cycle-loader-ignore)").filter(':not([src=""])'),d.length?(l=d.length,void d.each(function(){this.complete?s():e(this).load(function(){s()}).on("error",function(){0===--l&&(i.API.log("slide skipped; img not loaded:",this.src),0===--c&&"wait"==i.loader&&o.apply(i.API,[a,n]))})})):(--c,void a.push(u))}),c&&i.container.addClass("cycle-loading"))}var o;i.loader&&(o=i.API.add,i.API.add=n)})}(jQuery),function(e){"use strict";function t(t,i,n){var o,r=t.API.getComponent("pager");r.each(function(){var r=e(this);if(i.pagerTemplate){var s=t.API.tmpl(i.pagerTemplate,i,t,n[0]);o=e(s).appendTo(r)}else o=r.children().eq(t.slideCount-1);o.on(t.pagerEvent,function(e){t.pagerEventBubble||e.preventDefault(),t.API.page(r,e.currentTarget)})})}function i(e,t){var i=this.opts();if(!i.busy||i.manualTrump){var n=e.children().index(t),o=n,r=i.currSlide<o;i.currSlide!=o&&(i.nextSlide=o,i._tempFx=i.pagerFx,i.API.prepareTx(!0,r),i.API.trigger("cycle-pager-activated",[i,e,t]))}}e.extend(e.fn.cycle.defaults,{pager:"> .cycle-pager",pagerActiveClass:"cycle-pager-active",pagerEvent:"click.cycle",pagerEventBubble:void 0,pagerTemplate:"<span>&bull;</span>"}),e(document).on("cycle-bootstrap",function(e,i,n){n.buildPagerLink=t}),e(document).on("cycle-slide-added",function(e,t,n,o){t.pager&&(t.API.buildPagerLink(t,n,o),t.API.page=i)}),e(document).on("cycle-slide-removed",function(t,i,n){if(i.pager){var o=i.API.getComponent("pager");o.each(function(){var t=e(this);e(t.children()[n]).remove()})}}),e(document).on("cycle-update-view",function(t,i){var n;i.pager&&(n=i.API.getComponent("pager"),n.each(function(){e(this).children().removeClass(i.pagerActiveClass).eq(i.currSlide).addClass(i.pagerActiveClass)}))}),e(document).on("cycle-destroyed",function(e,t){var i=t.API.getComponent("pager");i&&(i.children().off(t.pagerEvent),t.pagerTemplate&&i.empty())})}(jQuery),function(e){"use strict";e.extend(e.fn.cycle.defaults,{next:"> .cycle-next",nextEvent:"click.cycle",disabledClass:"disabled",prev:"> .cycle-prev",prevEvent:"click.cycle",swipe:!1}),e(document).on("cycle-initialized",function(e,t){if(t.API.getComponent("next").on(t.nextEvent,function(e){e.preventDefault(),t.API.next()}),t.API.getComponent("prev").on(t.prevEvent,function(e){e.preventDefault(),t.API.prev()}),t.swipe){var i=t.swipeVert?"swipeUp.cycle":"swipeLeft.cycle swipeleft.cycle",n=t.swipeVert?"swipeDown.cycle":"swipeRight.cycle swiperight.cycle";t.container.on(i,function(){t._tempFx=t.swipeFx,t.API.next()}),t.container.on(n,function(){t._tempFx=t.swipeFx,t.API.prev()})}}),e(document).on("cycle-update-view",function(e,t){if(!t.allowWrap){var i=t.disabledClass,n=t.API.getComponent("next"),o=t.API.getComponent("prev"),r=t._prevBoundry||0,s=void 0!==t._nextBoundry?t._nextBoundry:t.slideCount-1;t.currSlide==s?n.addClass(i).prop("disabled",!0):n.removeClass(i).prop("disabled",!1),t.currSlide===r?o.addClass(i).prop("disabled",!0):o.removeClass(i).prop("disabled",!1)}}),e(document).on("cycle-destroyed",function(e,t){t.API.getComponent("prev").off(t.nextEvent),t.API.getComponent("next").off(t.prevEvent),t.container.off("swipeleft.cycle swiperight.cycle swipeLeft.cycle swipeRight.cycle swipeUp.cycle swipeDown.cycle")})}(jQuery),function(e){"use strict";e.extend(e.fn.cycle.defaults,{progressive:!1}),e(document).on("cycle-pre-initialize",function(t,i){if(i.progressive){var n,o,r=i.API,s=r.next,a=r.prev,l=r.prepareTx,c=e.type(i.progressive);if("array"==c)n=i.progressive;else if(e.isFunction(i.progressive))n=i.progressive(i);else if("string"==c){if(o=e(i.progressive),n=e.trim(o.html()),!n)return;if(/^(\[)/.test(n))try{n=e.parseJSON(n)}catch(u){return void r.log("error parsing progressive slides",u)}else n=n.split(new RegExp(o.data("cycle-split")||"\n")),n[n.length-1]||n.pop()}l&&(r.prepareTx=function(e,t){var o,r;return e||0===n.length?void l.apply(i.API,[e,t]):void(t&&i.currSlide==i.slideCount-1?(r=n[0],n=n.slice(1),i.container.one("cycle-slide-added",function(e,t){setTimeout(function(){t.API.advanceSlide(1)},50)}),i.API.add(r)):t||0!==i.currSlide?l.apply(i.API,[e,t]):(o=n.length-1,r=n[o],n=n.slice(0,o),i.container.one("cycle-slide-added",function(e,t){setTimeout(function(){t.currSlide=1,t.API.advanceSlide(-1)},50)}),i.API.add(r,!0)))}),s&&(r.next=function(){var e=this.opts();if(n.length&&e.currSlide==e.slideCount-1){var t=n[0];n=n.slice(1),e.container.one("cycle-slide-added",function(e,t){s.apply(t.API),t.container.removeClass("cycle-loading")}),e.container.addClass("cycle-loading"),e.API.add(t)}else s.apply(e.API)}),a&&(r.prev=function(){var e=this.opts();if(n.length&&0===e.currSlide){var t=n.length-1,i=n[t];n=n.slice(0,t),e.container.one("cycle-slide-added",function(e,t){t.currSlide=1,t.API.advanceSlide(-1),t.container.removeClass("cycle-loading")}),e.container.addClass("cycle-loading"),e.API.add(i,!0)}else a.apply(e.API)})}})}(jQuery),function(e){"use strict";e.extend(e.fn.cycle.defaults,{tmplRegex:"{{((.)?.*?)}}"}),e.extend(e.fn.cycle.API,{tmpl:function(t,i){var n=new RegExp(i.tmplRegex||e.fn.cycle.defaults.tmplRegex,"g"),o=e.makeArray(arguments);return o.shift(),t.replace(n,function(t,i){var n,r,s,a,l=i.split(".");for(n=0;n<o.length;n++)if(s=o[n]){if(l.length>1)for(a=s,r=0;r<l.length;r++)s=a,a=a[l[r]]||i;else a=s[i];if(e.isFunction(a))return a.apply(s,o);if(void 0!==a&&null!==a&&a!=i)return a}return i})}})}(jQuery),function(window,undefined){function _jq(e){return e&&e.call?void(_jq.ready?_jq.instance&&e.call(_jq.instance,_jq.instance):_jq.queue.push(e)):!1}function _collect_attribs(e,t,i){for(var n=e.attributes,o=n&&n.length,r={};o--;)if(!t||n[o].name===t||t&&t.test&&t.test(n[o].name)){if(i)return!0;r[n[o].name]=n[o].value}return i?!1:r}function _merge(e,t,i){var n;for(n in t)_has.call(t,n)&&t[n]!==undefined&&(e[n]=i?t[n]:e[n]||t[n]);return e}function _collect_context(node,data,jQuery){do _merge(data,_collect_attribs(node,_dataattrib),!1);while((node=node.parentNode)&&1===node.nodeType);var i,result={};for(i in data)result[i.substr(5)]=_jsonstruct.test(data[i])?jQuery.parseJSON(data[i]):_evalstruct.test(data[i])?eval(data[i]):data[i];return result}function _getEventOrigin(e,t){var i,n=t;do if(i=t.getAttribute("id")||t.getAttribute("name"))return i;while((n=n.parentNode)&&1===n.nodeType);return null}function _submit(e,t){t&&t.push&&t.push(e)}function debounce(e,t){var i;return function(){var n=arguments,o=this;i&&clearTimeout(i),i=setTimeout(function(){e.apply(o,n),i=null},t||500)}}_jq.queue=[];var i=setInterval(function(){var e=window.jQuery;if(e)for(clearInterval(i),_jq.instance=e,_jq.ready=!0;i=_jq.queue.pop();)i.call(e,e)},50),_has=Object.prototype.hasOwnProperty,_dataattrib=/^data-/,_jsonstruct=/^\{(.*)\}$/,_evalstruct=/^(null|undefined|[0-9]+(\.[0-9]+)?|true|false)$/,_known_datalayers=["dataLayer"];_jq(function(e){function t(t){var i=t.target,n=t.type,o=_getEventOrigin(t,t.target);if(t.target===t.currentTarget){var r=_collect_context(i,{},e);"event"in r||(r.event=n),"origin"in r||(r.origin=o);for(var s=_known_datalayers.length;s--;)_submit(r,window[_known_datalayers[s]])}}function i(t,i){var o=e(window).scrollTop(),r=o+e(window).height(),s=e(t).offset().top,a=s+e(t).height(),l=s>=o&&r>=a&&r>s&&a>o,c=a-s,u=c-n(s-o,0)+n(r-a,0),d=u/c;switch(i){case 1:return u;case 2:return d;case 3:return c-u;default:return l}}e.expr[":"].hasdata=function(e){return _collect_attribs(e,_dataattrib,!0)},e(document).ready(function(){var i=e("body");i.on("click","*",t),i.on("submit","form",t),i.on("blur focus change","input, select, textarea",t),i.on("visible","*",t)});{var n=Math.min;Math.max}e(window).scroll(debounce(function(){e(".track-visible").each(function(){i(this,2)>0&&e(this).trigger("visible")}),e(".track-mostly-visible").each(function(){i(this,2)>.5&&e(this).trigger("visible")}),e(".track-completely-visible").each(function(){i(this,0)&&e(this).trigger("visible")})}))})}(window),function(){if(!this.require){var e={},t={},i=function(r,s){var a,l,c=n(s,r),u=n(c,"./index");if(a=t[c]||t[u])return a;if(l=e[c]||e[c=u])return a={id:c,exports:{}},t[c]=a.exports,l(a.exports,function(e){return i(e,o(c))},a),t[c]=a.exports;throw"module "+r+" not found"},n=function(e,t){var i,n,o=[];i=/^\.\.?(\/|$)/.test(t)?[e,t].join("/").split("/"):t.split("/");for(var r=0,s=i.length;s>r;r++)n=i[r],".."==n?o.pop():"."!=n&&""!=n&&o.push(n);return o.join("/")},o=function(e){return e.split("/").slice(0,-1).join("/")};this.require=function(e){return i(e,"")},this.require.define=function(t){for(var i in t)e[i]=t[i]},this.require.modules=e,this.require.cache=t}return this.require}.call(this),this.require.define({"modules/lib/config":function(e,t,i){function n(e){if(!e)return e;var t,i=[Number,String,Boolean];if(i.forEach(function(i){e instanceof i&&(t=i(e))}),"undefined"==typeof t)if("[object Array]"===Object.prototype.toString.call(e))t=[],e.forEach(function(e,i){t[i]=n(e)});else if("object"==typeof e)if(e.nodeType&&"function"==typeof e.cloneNode)var t=e.cloneNode(!0);else if(e.prototype)t=e;else if(e instanceof Date)t=new Date(e);else{t={};for(var o in e)t[o]=n(e[o])}else t=e;return t}var o,r,s=function(){if(!window.whiConfig&&!r)throw new Error("whiConfig is not set. App will probably not work.");if(!r){r=!0;for(var e in window.whiConfig)window.whiConfig.hasOwnProperty(e)&&a.set(e,n(window.whiConfig[e]));return this}},a=i.exports={updateCache:s,get:function(e){return o||s(),o[e]},set:function(e,t){if("function"==typeof this[e]&&!o[e])throw new Error("Tried to set non-settable config property "+e);o=o||{},o[e]=t,this[e]||l(this,e,{get:this.get.bind(this,e),set:this.set.bind(this,e)})}},l=function(e,t,i){if("function"==typeof Object.defineProperty)Object.defineProperty(e,t,i);else{if("function"!=typeof e.__defineGetter__)throw new Error("Error: defineProperty is not supported in this environment.");e.__defineGetter__(t,i.get),e.__defineSetter__(t,i.set)}}}}),this.require.define({"modules/lib/crop":function(e,t,i){"use strict";var n,o,r,s,a,l,c,u=!1,d=0,h=0,f=0,p=null,m=null,g=240,v=200,y=g/v,b=30,w=null,_=null,x=i.exports=function(){return this.init.apply(this,arguments)};x.prototype.init=function(e,t,i){return this.canvas=e,e.removeClass("vertical horizontal"),e.css("background-position",""),c=$('<div class="loading">loading</div>'),e.append(c),t.get(0).complete?k(e,t,i):("data"!==t.attr("src").substr(0,4)&&t.attr("src",t.attr("src")+"?"+(new Date).getTime()),t.on("load",function(){k(e,t,i)})),this};var k=function(e,t,i){var u=t.width()/t.height();return u===y?void c.fadeOut():(w=y>u?g:v/t.height()*t.width(),_=u>y?v:g/t.width()*t.height(),y>u?(n="clientY",p=function(e){return"0 "+e+"px"},m=function(e){return{leftOffset:0,topOffset:e}},o=v-Math.floor(_),h=-(_/2-v/2),e.addClass("vertical")):u>y&&(n="clientX",p=function(e){return e+"px 0"},m=function(e){return{leftOffset:e,topOffset:0}},o=g-Math.floor(w),h=-(w/2-g/2),e.addClass("horizontal")),C(e),r=$("<input type=hidden name=crop[top]>"),s=$("<input type=hidden name=crop[left]>"),a=$("<input type=hidden name=crop[width]>"),l=$("<input type=hidden name=crop[height]>"),i.append(r,s,a,l),c.fadeOut(),void e.find(".thumb-crop-helper").fadeIn())};x.prototype.teardown=function(){this.canvas.off("mouseover",j),this.canvas.off("mousedown",S),this.canvas.off("mouseup",T),this.canvas.off("mousemove",I),this.canvas.off("mouseout",A)};var C=function(e){e.on("mouseover",j),e.on("mousedown",S),e.on("mouseup",T),e.on("mousemove",I),e.on("mouseout",A)},j=function(){$(this).find(".thumb-crop-helper").fadeOut()},S=function(e){u!==!0&&(d=e[n]-h,u=!0)},T=function(){u=!1},A=function(){u=!1},I=function(e){if(u){$.publish("whi:crop:dragging"),h=e[n]-d,h>f&&(h=f),o>h&&(h=o),$(this).css("background-position",p(h+b));var t=E(m(-h));P(t)}},E=function(e){return{left:e.leftOffset/w,top:e.topOffset/_,width:g/w,height:v/_}},P=function(e){var t=4;r.val(N(e.top,t)),s.val(N(e.left,t)),a.val(N(e.width,t)),l.val(N(e.height,t))},N=function(e,t){return Number(Math.round(e+"e"+t)+"e-"+t)}}}),this.require.define({"modules/lib/deep_link":function(e,t,i){"use strict";var n=i.exports={},o="whi://trigger_event/";n.triggerEvent=function(e,t,i){var n=Object.keys(t).map(function(e){return e+"="+encodeURIComponent(t[e])}).join("&"),r=o+e+"?"+n,s=document.createElement("iframe");s.style.border="none",s.style.width="1px",s.style.height="1px",s.src=r,document.documentElement.appendChild(s),setTimeout(function(){s.parentNode.removeChild(s),i&&i()},1e3)}}}),this.require.define({"modules/lib/entry_frame_buster":function(e,t,i){i.exports={init:function(){}}}}),this.require.define({"modules/lib/facebook":function(e,t,i){var n=t("./config"),o=i.exports={};o.load=function(e){return window.FB?void e():void jQuery.ajax({url:"https://connect.facebook.net/en_US/sdk.js#xfbml=1",dataType:"script",cache:!0,success:function(){FB.init({appId:n.facebook.appId,version:n.facebook.api_version,frictionlessRequests:!0,status:!0,cookie:!0,xfbml:!0}),$.publish("whi:fb_init"),e()}})}}}),this.require.define({"modules/lib/facebook_api":function(e,t,i){var n=t("./config"),o="https://graph.facebook.com/v2.2/",r=i.exports={};r.authenticated=function(){return!(!n.facebook||!n.facebook.user_token)},r.api=function(e,t,i){var e=/\/\/graph\.facebook/.test(e)?e:o+e.replace(/^\//,""),s=e+(/\?/.test(e)?"&":"?")+"access_token="+n.facebook.user_token+"&callback=?",a=i||[];$.ajax({url:s,dataType:"jsonp",success:function(e){e.paging&&e.paging.next?(a=a.concat(e.data),r.api(e.paging.next,t,a)):(i&&(e.data=a),t(e))}})},r.inviteDialog=function(){FB.ui({method:"send",link:"http://www.weheartit.com"})},r.requestDialog=function(){FB.ui({method:"apprequests",message:"Join WeHeartIt"},function(){})}}}),this.require.define({"modules/lib/global_events":function(e,t,i){{var n=t("./tracking"),o=t("./config");i.exports.init=function(){var e=$("body");if(e.attr("data-signing_up")){var t=e.attr("data-registration_source"),i=e.attr("data-registration_additional");n.trackGAEvent("RegistrationComplete",t,i,o.user_id)}}}}}),this.require.define({"modules/lib/heart_button_thumb":function(e,t,i){var n=t("./routes"),o=t("../utils/utils"),r=t("../lib/tracking"),s=t("../lib/tracking/data_layer"),a=[],l=i.exports={};l.reset=function(){$(window).off("click",".js-heart-button",f),$.unsubscribe("whi:heart_entry",h),a=[],u()},l.heartButtons=function(){return $(".js-heart-button")},l.heartedEntries=function(){return a};var c=l.addHearts=function(e){var t=e?e.find(".js-heart-button.js-hearted"):$(".js-heart-button.js-hearted");t.each(function(){var e=$(this).data("entry-id").toString();-1===$.inArray(e,a)&&a.push(e)})},u=l.init=function(){return d(),c(),this},d=function(){$(window).on("click",".js-heart-button",f),$.subscribe("whi:heart_entry",h)},h=function(e,t){if(t||(t=e),!t.entryId)return console.error("triggered heart, but no entry was passed.");var i={referrer:document.referrer,heart_page:document.URL};t.hearterUsername&&(i.hearter_username=t.hearterUsername),$.ajax({url:n.heart_path(t.entryId),type:"post",dataType:"html",data:i,success:function(){m(null,t.entryId)},error:o.defaultAjaxErrorCallback})
},f=function(e){e.preventDefault();var t=$(this),i=t.data("entry-id").toString();-1===$.inArray(i,a)?p(t,i):g(t,i)},p=function(e,t){e.addClass("ajax"),e.find(".js-heart-count").hide(),$.ajax({url:n.heart_path(t),type:"post",dataType:"html",data:{referrer:document.referrer,heart_page:document.URL,hearter_username:e.data("hearter-username")},success:function(){m(e,t)},error:o.defaultAjaxErrorCallback,complete:function(){e.removeClass("ajax")}})},m=function(e,t){a.push(t),e&&e.trigger("heart",[t]),r.trackGAEvent("Heart","Hearted",t.toString()),s.entryHeart(e);var i=e.closest(".entry").data("trackingUrl"),n=e.closest(".entry").data("adsNativeSid");y(e),$.publish("whi:hearted",{entry:t,adsNativeTrackingUrl:i,adsNativeSID:n})},g=function(e,t){e.addClass("ajax"),e.find(".js-heart-count").hide(),e.find(".icon").removeClass("icon-hearted"),$.ajax({type:"post",dataType:"html",url:n.unheart_path(t),data:{_method:"delete"},success:function(){v(e,t)},error:o.defaultAjaxErrorCallback,complete:function(){e.removeClass("ajax")}})},v=function(e,t){e.find(".icon"),a.splice($.inArray(t,a),1),r.trackGAEvent("Heart","Unhearted",t.toString()),e.trigger("unheart",[t]),b(e),$.publish("whi:unhearted",{entry:t})},y=function(e){var t=e.find(".js-heart-count"),i=parseInt($.trim(t.html()));t.html(i+1).show()},b=function(e){var t=e.find(".js-heart-count"),i=parseInt($.trim(t.html()));t.html(i-1).show()}}}),this.require.define({"modules/lib/heart_button_thumb_anonymous":function(e,t,i){var n=(t("../utils/utils").positionFloatingWindow,t("./routes")),o=(t("./tracking"),i.exports={});o.init=function(e){return e=e||{},this.disableRegistrationRequest=e.disable_anonymous_registration,r(),this};var r=o.bindCallbacks=function(){$(window).on("click",".js-heart-button",function(e){e.preventDefault();var t=$(this),i=t.data("entry-id"),o=t.attr("data-username");$.publish("whi:anonymous_heart",{done:n.getUrl(n.entry_path(i)),action:{type:"heart",entryId:i,hearterUserame:o}}),s(i)})},s=o.onUnauthorizedHeartClick=function(e){var t=$("#first-heart-window");t.find("a").each(function(){var t=$(this).attr("href");$(this).attr("href",t.replace(/heart=[0-9]+/,"heart="+e))})}}}),this.require.define({"modules/lib/hover_flicker_fix":function(e,t,i){var n=i.exports={};n.init=function(){$("body:not(.mobile-web)").on("mouseenter",".grid-thumb .entry",function(){var e=$(this),t=e.find(".heart-button").hasClass("hearted"),i=e.find(".call-to-action").length>0;e.addClass("hover"),t&&e.addClass("hover show-sets"),i&&e.addClass("has-cta"),e.find(".heart").stop(!0,!0).fadeIn().css("display","block")}).on("mouseleave",".grid-thumb .entry",function(){var e=$(this);e.removeClass("hover show-sets"),e.hasClass("show-sets")||e.hasClass("show-feedback")?setTimeout(function(){e.hasClass("hover")||e.hasClass("show-sets")||(e.addClass("entry"),e.find(".heart").stop(!0,!0).fadeOut())},3e3):e.find(".heart").stop(!0,!0).fadeOut()})}}}),this.require.define({"modules/lib/infinite_scroll":function(e,t,i){function n(e){for(var t=e.offsetTop,i=e.offsetLeft,n=e.offsetWidth,o=e.offsetHeight;e.offsetParent;)e=e.offsetParent,t+=e.offsetTop,i+=e.offsetLeft;return t<window.pageYOffset+window.innerHeight&&i<window.pageXOffset+window.innerWidth&&t+o>window.pageYOffset&&i+n>window.pageXOffset}function o(e){var t=[];return e.each(function(e,i){if($(i).hasClass("ad"))if(0==i.offsetHeight)i=null;else{var n=$(document.createElement("div"));n.addClass("grid-item"),$(i).hasClass("right")&&n.addClass("right"),n.attr("style",$(i).attr("style"));var o=$(document.createElement("div"));o.addClass("thumb-height"),o.appendTo(n),i=n[0]}i&&t.push(i)}),t}{var r,s,a,l,c,u,d,h,f,p,m,g,v,y,b=(t("../utils/logger"),t("./routes")),w=t("./whi_history"),_=t("./tracking"),x=t("./lightbox"),k=[],C=[],j=0,S=i.exports={},T=function(){return!1};S.init=function(){if(0!=$("[data-infinite-scroll-url]").length){$(document).on("scroll",E),$(".page-footer").hide();var e=$("[data-infinite-scroll-url]").data("infinite-scroll-url")||"/recent",t=window.location.search.replace(/\+/g,"%20");l=b.mergeQueryParams(e,t).replace(/#.+/,""),c=$("[data-scroll-id]").data("scroll-id")||"entry-id",s=parseInt($("[data-infinite-scroll-page]").data("infinite-scroll-page"))||1,a=$("[data-infinite-scroll-count]").data("infinite-scroll-count"),g=$("[data-thumb-selector]").data("thumb-selector")||".grid-thumb",v=$("[data-element-selector]").data("element-selector")||".entry",u=!1,d=$(window),h=$(g),f=$(".js-pagination-counter-current"),r=s==a,y=$("#scroll-placeholder");var i=1==s?l.replace(/\?$/,""):b.next_page(l,s,N()),n={number:s,url:i,viewed:!0,position:0,index:k.length};k.push(n),U(n),a&&$(".js-pagination-counter-total").html("of "+a),d.on("scroll",I),m=setTimeout(I,1e3),Q()||$(window).on("click",".js-pagination-scroll-top",X),$(".js-pagination-counter").removeClass("hidden"),$(".js-pagination-counter-form").on("submit",P),$(".js-pagination-counter-form").on("click",T)}}}i.exports.teardown=function(){d.off("scroll",I),clearTimeout(I,1e3),Q()||$(window).off("click",".js-pagination-scroll-top",X),$(".js-pagination-counter").addClass("hidden"),$(".js-pagination-counter-form").off("submit",P),$(".js-pagination-counter-form").off("click",T)};var A=!1,I=function(){x.isOpen()||A||(A=!0,requestAnimationFrame(F))},E=function(){return $(document).off("scroll",E),window.scrollTo(0,0),!1},P=function(){var e=this.elements[0].value;return window.location=b.next_page(l,e),!1},N=function(e){return e=e||$(g).find(v),e.not(".js-promoted").last().attr("data-"+c)},D=function(e){Q()&&(n(y[0])?y.height(0):null!=e&&y.height(e))},O=function(){if(Q()){var e=$(window).height();1e3>e&&(e=1e3);var t=-y[0].getBoundingClientRect().bottom,i=$(".grid-thumb")[0].getBoundingClientRect().bottom-e,n=3*e;t>=n?R():i>=n&&L()}},F=function(){var e=d.scrollTop();if(e>1200?$(".js-pagination-scroll-top").fadeIn():$(".js-pagination-scroll-top").fadeOut(),D(null),Math.abs(e-j)>100){var t=z(e);t&&t.index!=p.index&&U(t)}if(A=!1,!u){if(Q()){var i=$(window).height(),n=-y[0].getBoundingClientRect().bottom;2*i>=n&&H()}r||$("#lightbox,#loader,.floating-window").get().some(function(e){return $(e).is(":visible")})||$("body")[0].scrollHeight-e<=d.outerHeight()+1600&&q(s+1)}},q=function(e){M();var t=b.next_page(l,e,N()),i=b.next_infinite_scroll_page(l,e,N());k.push({number:e,url:t,viewed:!1,position:h.height(),index:k.length});var n=new Date,o=$.ajax({url:i});o.done(function(e){var t=new Date;G(e,n,t,i),O()}),o.fail(function(){r=!0,setTimeout(function(){$("#connection-error").show()},5e3)}),o.always(W)},R=function(){var e=$(document).height(),t=y.height(),i=24,n=$(".grid-item, .tt-wrapper.inread").slice(0,i),r=o(n);n.remove();var s=e-$(document).height();D(t+s),C.push({entries:r,offset:t})},H=function(){if(0!==C.length){var e=C.pop();D(e.offset),y.after(e.entries),O()}},L=function(){var e=k.pop();$("div[data-page-number="+e.number+"]").first().nextAll().remove(),s--,r=s==a||!N()},M=function(){u=!0,$("#page-spinner").find("a").hide(),$("#page-spinner").spin({lines:10,length:6,width:4,radius:8,speed:1.1})},W=function(){u=!1,$("#page-spinner").spin(!1)},U=function(e){p=e,f.val(e.number),w&&e&&e.url&&w.replaceState({link:e.url}),e.viewed||(e.viewed=!0,_.trackPageView(e.url))},z=function(e){if(a&&k[a-1]&&V())return k[a-1];var t=null;return k.forEach(function(i,n){if(!t){var o=k[n+1];i.position<e&&(!o||o.position>e)&&(t=i)}}),t},B=function(e){var t=$(e),i=t.attr("id");if(i&&$("#"+i).length>0)return!0;var n=t.attr("data-"+c);return $(v+"[data-"+c+'="'+n+'"]').length>0?!0:!1},G=function(e,t,i,n){var o=$(e.trim()),l=N(o.filter(v));if(s++,r=s==a||!l,l){var c=[];o.each(function(){B(this)||c.push(this)}),o=$(c),h.append(o),$.publish("whi:content_updated",{url:n,name:"infinite_scroll"})}},X=function(){$("body,html").animate({scrollTop:0},200,function(){U(k[0])}),event.preventDefault()},V=function(){return $(window).scrollTop()>$(document).height()-$(window).height()-10},Q=function(){return y.length&&void 0===window.ontouchmove}}}),this.require.define({"modules/lib/inject_script":function(e,t,i){i.exports=function(e,t){var i=document.createElement("script");if(i.type="text/javascript",i.src=e,t)t.appendChild(i);else{var n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(i,n)}return i}}}),this.require.define({"modules/lib/lightbox":function(e,t,i){var n,o=(t("./routes"),t("../lib/tracking"),!1),r=!1,s=i.exports={close:function(){return u(),this},open:function(e){return d(e),this},isClosed:function(){return $("#lightbox").is(":hidden")},isOpen:function(){return $("#lightbox").is(":visible")},showLoader:function(){var e=$("#loader");e.length||(e=$("body").append('<div id="loader">').find("#loader").hide()),e.html('<div class="spinner"></div>'),h(e),e.fadeIn(400)},hideLoader:function(){return $("#loader").remove(),this},loadContent:function(e,t,i,n){return o||l(),f(),c($(e),t,i,n),this}},a=function(e){var t=$("#lightbox");if(!$(e.target).is(":input")&&!t.is(":hidden"))switch(e.keyCode){case 27:u();break;case 38:t.animate({scrollTop:"-=100"},200);break;case 40:t.animate({scrollTop:"+=100"},200);break;default:return!0}},l=s.init=function(){$(window).on("keydown",a),$("#lightbox").length||$("body").append('<div id="lightbox">'),$(window).on("click","#lightbox, .entry-content, .entry-content .grid-responsive, .lightbox-entry-closex",function(e){return $(e.target).is("#lightbox, .entry-content, .entry-content .grid-responsive, .lightbox-entry-closex")&&(u(),e.preventDefault()),!0}),$.subscribe("whi:lightbox:close",u),o=!0},c=function(e){var t={},i=function(){},n=!1;Array.prototype.slice.call(arguments).slice(1).forEach(function(e){"function"==typeof e&&(i=e),"object"==typeof e&&(t=e),e===!0&&(n=e)}),$("#lightbox").html(e),n?e.show():e.fadeIn(400),r=!0,i(t),$.publish("whi:content_updated",{url:location.href,name:"lightbox"}),$.publish("lightbox:loaded")},u=function(){r=!1,$("html").css("overflow","scroll"),$("#lightbox").fadeOut(400,function(){$(this).html('<div class="spinner"></div>').scrollTop(0),$.publish("lightbox:closed")}),$(".js-pagination-counter").fadeIn(400)},d=function(e){e=e||function(){};var t=function(){e();$.cookie("__whsp")};h(),$("html").css("overflow","hidden"),$("#lightbox").fadeIn(400,t),$(".js-pagination-counter").fadeOut(400),$.publish("lightbox:opened")},h=s.showLoading=function(e){$(e||"#lightbox").find(".spinner").spin({lines:"11",length:"2",width:"8",radius:"30",corners:"1.0",rotate:"0",trail:"42",speed:"1.1",direction:"1",hwaccel:"on"});e||(n=e)},f=s.hideLoading=function(e){var t=n;e&&(t=$(e).find(".spinner")),t&&t.stop()}}}),this.require.define({"modules/lib/link_social_network":function(e,t,i){var n=i.exports,o={},r={},s=(n.openPopup=function(e,t){var i=600,n=400,a=screen.width/2-i/2,l=200,c=document.createElement("a"),u=(new Date).getTime();c.href=e,c.search=c.search+"&popup_id="+u;var d=window.open(c.href,"title","width="+i+",height="+n+",scrollbars=yes,status=1,left="+a+",top="+l);return o[u]=s(u,t),r[u]=d,window.addEventListener("message",o[u],!1),u},n.closePopup=function(e){r[e].postMessage(JSON.stringify({popupId:e,data:"close"}),document.location.origin),window.removeEventListener("message",s[e]),delete o[e],delete r[e]},function(e,t){return function(i){if(document.location.origin===i.origin){var n=JSON.parse(i.data);n.popupId==e&&t(n.data)}}})}}),this.require.define({"modules/lib/notifications":function(e,t,i){var n,o,r,s=t("./config"),a=t("../utils/logger"),l=t("./routes"),c=t("./tracking"),u=t("./popup_message"),d=t("../lib/tracking/data_layer"),h=i.exports={},f=(h.init=function(){n=!1,window.location.pathname==l.notifications_path()&&(o=v(),y()),f($(".content .js-notifications-list")),r=$(".js-navbar .js-notifications-list"),r.on("mouseenter",p),$(".js-notification-opt-out").click(m)},function(e){var t=e.find(".js-notification-action");t.on("ajax:before",function(){$(this).addClass("btn-is-loading")}),t.on("ajax:complete",function(){var e=$(this);("follow"===e.attr("data-action")||"request_to_follow"===e.attr("data-action"))&&(c.trackGAEvent("Follow","Follow","Notification"),d.followUser(e)),$(this).removeClass("btn-is-loading")}),o=v()}),p=function(){c.trackGAEvent("Notifications","NotificationsRollover","UserID",s.user_id),recentNotifications=$(".js-notifications-container"),recentNotifications.data("requested")?g():(recentNotifications.data("requested",!0),$.get(l.recent_notifications_path(),function(e){recentNotifications.removeClass("panel-is-loading"),recentNotifications.html(e),$.publish("whi:content_updated",{name:"notifications"}),f(recentNotifications),g(),$(".js-notifications-container .js-notification-opt-out").click(m)}))},m=function(e){var t=this.dataset.dismissTitle,i=this.dataset.dismissMessage,n=this.parentElement.dataset.notificationId;e.preventDefault(),e.stopPropagation(),u.confirm(t,i,function(e){e&&b(n)})},g=function(){if(o&&o.length&&r&&!n){var e=!1;r.one("mouseleave",function(){e=!0,n&&$(".js-notification").removeClass("notification-is-unread")}),setTimeout(function(){e||y(!0)},1e3)}},v=function(){return $("body").find(".js-notification.notification-is-unread").map(function(){return $(this).data("notification-id")}).get()},y=function(e){if(!n&&o){n=!0;var t=parseInt($(".js-notifications-count").text());$.ajax({url:l.read_notifications_path(o),type:"PUT"}).done(function(){var i=$(".js-navbar .js-notifications-list");i.data("unread-ids",""),$(".js-notifications-count").addClass("notifications-count-zero"),e&&$(".js-notifications-count").text(Math.max(0,t-o.length))}).fail(function(){"undefined"!=typeof a&&a.log("error marking notifications read!",o)})}},b=function(e){var t=l.dismiss_notification_path(e);$.ajax({url:t,dataType:"json",type:"delete",success:function(){$(".js_notification_"+e).remove();var t=o.indexOf(e);-1!=t&&o.splice(t)},error:function(){"undefined"!=typeof a&&a.log("error dismissing notification!",e)}})}}}),this.require.define({"modules/lib/paginator":function(e,t,i){var n=i.exports=function(e,t,i){function o(){return Math.ceil(d.length/i)}function r(){h>1&&(h-=1),l(),a()}function s(){h<o()&&(h+=1),l(),a()}function a(){m.val(h),h===o()?p.addClass("gray"):p.removeClass("gray"),1===h?f.addClass("gray"):f.removeClass("gray")}function l(){d.each(function(e,t){h===parseInt(e/i)+1?$(t).show():$(t).hide()})}function c(){d=$(e+" > *")}function u(e){e=parseInt(e),e<=o()&&e>=1&&(h=e,l(),a())}if(!(this instanceof n))return new n(e,t,i);"undefined"==typeof i&&(i=10),this.pagesTotal=o,this.previous=r,this.next=s,this.updateItems=c,this.setCurrentPage=u;var d,h=1,f=$(t+" .newer a"),p=$(t+" .older a"),m=$(t+" input");c(),o()>1&&(l(),$(t+" .total_pages").text(o()),f.click(function(e){r(),e.preventDefault()}),p.click(function(e){s(),e.preventDefault()}),m.keypress(function(e){13===e.which&&u(m.val())}),$(t).show())}}}),this.require.define({"modules/lib/popup_message":function(e,t,i){var n=t("../utils/logger"),o=["alert","confirm"],r=!1,s=null,a=null,l=null,c=function(){s=$(".js-popup"),a=$(".js-popup .js-popup-title"),l=$(".js-popup .js-popup-message"),$(".js-popup-confirm").click(u),$(".js-popup-cancel").click(d)},u=function(){s.removeClass(o.join(" ")),popupCallback&&popupCallback(!0),f()},d=function(){s.removeClass(o.join(" ")),popupCallback&&popupCallback(!1),f()},h=function(e,t){return e&&t?(a.text(e),l.text(t),s.show(),void(r=!0)):void n.log("popupMessage: Title or Message not provided ("+e+", "+t+") ")},f=function(){popupCallback=null,r=!1,s.hide()},p=function(e,t,i){r||(h(e,t),popupCallback=i)},m=function(e,t,i){r||(h(e,t),popupCallback=i)};i.exports={init:c,alert:p,confirm:m}}}),this.require.define({"modules/lib/prevent_double_submission":function(e,t,i){var n=function(){return this.beenSubmitted?!1:void(this.beenSubmitted=!0)};i.exports={init:function(){$(".js-prevent-double-submission").on("submit",n)}}}}),this.require.define({"modules/lib/registration_intercept":function(e,t,i){var n=t("./view"),o=t("./lightbox"),r=t("../utils/utils"),s=t("../utils/anonymous_session")(),a=t("./routes"),l=t("./config"),c=t("./signup_buttons"),u=t("./tracking"),d=i.exports={};d.init=function(){f()};var h=function(){var e=$(".js-registration-wall").length>0;if(l.user_authenticated||e)return!1;var t=[/registration/,/join/,/login/,/forgot_password/,/onboarding/,/postcard/,/(contact|about)/,/auth(\/.*)?/,/^\/$/,/heart-it/],i=t.some(function(e){return e.test(window.location.pathname)});if(i)return!1;if(s.current_pageviews()>2){if(l.mobile_site)return!1;"true"==$.cookie("hide_intercept")||r.prompt_helper.is_any_prompt_showed()||d.show(null,{done:a.currentPageWithParams({source:"registration_intercept"})})}},f=function(){$("body").on("click","#registration_intercept .button-signup",_),$("body").on("click","#registration_intercept .back-arrow",b),$.subscribe("whi:floating_window_closed",m),$.subscribe("whi:signup_updated",v),$.subscribe("whi:close_intercept",m.bind(null,5)),$.subscribe("whi:anonymous_heart",p.bind(d,"express")),$.subscribe("whi:anonymous_follow",p.bind(d,"connect")),$.subscribe("whi:anonymous_upload",p.bind(d,"inspire")),$.subscribe("whi:anonymous_set",p.bind(d,"collect")),$.subscribe("whi:add_favorite_tag",p.bind(d,"collect")),$.subscribe("whi:reg_wall_join",p.bind(d,"express")),$(document).ready(h)},p=d.show=function(e,t,i){if(i&&(i.done||i.action)&&$.cookie("whi:registration_complete_data",JSON.stringify(i),{path:"/",expires:30}),l.mobile_site)return u.trackPageview("/registration/sign_up_intercept"),window.location=a.join_url();var n={};e&&(n.type=e),o.showLoading(),$.ajax({url:a.getUrl("/registration/intercept"),data:n,success:function(e){$("#registration_intercept").remove(),$("body").append(e),r.prompt_helper.track_prompt_show(),u.trackPageview("/registration/sign_up_intercept"),u.trackGAEvent("Registration","JoinPageViewed","New",null,!0)},complete:function(){o.hideLoading()}})},m=function(e){"number"!=typeof e&&(e=1),$.cookie("hide_intercept",!0,{expires:e,path:"/"}),g()},g=function(){$("#registration_intercept .intercept_container").removeAttr("style").find(".intercept_signup_form").remove()},v=function(){var e=$("#registration_intercept .intercept_signup_form").removeAttr("style"),t=e.outerHeight();$(".registration_intercept").animate({height:t},200)},y=function(e){var t=$('<div class="intercept_signup_form">').append(e),i=$("#registration_intercept .intercept_container"),o=$(".registration_intercept").width();$("#registration_intercept .back-arrow").addClass("showing"),i.append(t);var r=i.find(".intercept_signup_form").outerHeight();i.animate({left:"-="+o},200),$(".registration_intercept").animate({height:r},200),n.loadView("registration/email_signup")},b=function(){n.unloadView("registration/email_signup");var e=$("#registration_intercept .intercept_container");if(0!=parseInt(e.css("left"))){var t=e.find(".intercept_content").outerHeight();$("#registration_intercept .back-arrow").removeClass("showing"),e.animate({left:0},200,function(){g()}),$(".registration_intercept").animate({height:t})}},w=new c({serviceClicked:function(){m(5)},emailStart:function(){},emailComplete:function(){},emailForm:y}),_=w.click}}),this.require.define({"modules/lib/routes":function(e,t,i){var n=i.exports={join_url:function(){return"/registration/sign_up"},admin_host_entries_number:function(){return"/admin/blocked_resources/host_entries_number"},user_entry_set_path:function(e){var t="/"+e+"/entry-sets";return t},follows_path:function(){return"/follows"},entry_path:function(e){return"/entry/"+e},heart_path:function(e){return"/entry/"+e+"/heart"},unheart_path:function(e){return"/entry/"+e+"/heart"},set_path:function(e){return"/entry/"+e+"/set"},remove_from_set:function(e){return"/setteds/"+e},similar_entries_path:function(e){return"/entry/"+e+"/similar"},create_entry_set_path:function(){return"/current_user/sets"},create_entry_set_with_entry_path:function(e){return"/"+e+"/sets"},tag_remove_path:function(e,t){return"entry/"+e+"/tag/"+t},follow_path:function(e){return"/user/"+e+"/follow"},unfollow_path:function(e){return"/user/"+e+"/follow"},heartButtonWidgetPath:function(e,t,i){return"/heart-it?button_type="+e+"&media="+t+"&via="+i},facebook_invite_forms_path:function(){return"/join/invitation-forms"},notifications_path:function(){return"/notifications"},read_notifications_path:function(e){return"/notifications?ids="+e},recent_notifications_path:function(){return"/recent_notifications"},dismiss_notification_path:function(e){return"/notifications/"+e+".js"},date_selection_path:function(){return"/popular_images/date_selection"},next_page:function(e,t,i){return c(e,t,i)},next_infinite_scroll_page:function(e,t,i){var n=e.split("?");e=n[0];var o=n[1]?n[1]:"";return o.match(/(\A|&)scrolling=true/)||(o.length>0&&(o+="&"),o+="scrolling=true"),"/"==e&&(e="/recent"),c(e+"?"+o,t,i)},registration_prompt_path:"/prompts/registration",start_hearting_prompt_path:"/prompts/start_hearting",update_dashboard:function(){return"/settings/dashboard"},app_download_email:function(){return"/app_download_email"},add_tracked_keyword_path:function(){return"/settings/tracked_keywords"},remove_tracked_keyword_path:function(){return"/settings/tracked_keywords"},promoted_entry_path:function(e){return/promoted_entries/+e},user_collections:function(e){return"/"+e+"/collections"},inspirations:function(){return"/inspirations"},follow_inspiration:function(){return"/follows"},add_to_collections:function(e){return"/add_to_collections/"+e},create_new_collection:function(e){return"/create_new_collection/"+e},link_facebook:function(){return"/settings/link-facebook"},link_twitter:function(){return"/settings/link-twitter"},link_account:function(){return"/settings/link-account"},share_modal:function(){return"/share_modal"},share_modal_basic:function(){return"/share_modal_basic"},share:function(){return"/share"},postcard_modal:function(e){return"/postcards/"+e},recipients_modal:function(){return"/postcards/recipients"},recipients_scroll:function(){return"/postcards/recipients/scroll"},create_postcard:function(){return"/postcards/"},postcards_share_modal:function(){return"/postcards/share"},postcards_share_link:function(){return"/postcards/share_link"}},o=n.currentPageWithParams=function(e){var t="";return"string"==typeof e?t=e:e&&"object"==typeof e&&(t=Object.keys(e).reduce(function(t,i){return t+i+"="+encodeURIComponent(e[i])+"&"},"?")),r(window.location.pathname+window.location.search,t)},r=(n.currentUrl=o.bind(null,null),n.mergeQueryParams=function(e,t){var i=e.split("?"),n=t.split("?"),o=i.length>1?i.slice(1).join("?"):"",r=n.length>1?n.slice(1).join("?"):n[0],l=(o?o+"&":"")+r,c="?"+a(s(l));return(i.length>1?i[0]:e)+c+(window.location.hash||"")});n.getUrl=function(e){return e};{var s=function(e){var t=e.split("&"),i=0,n=t.length,o={};for(i;n>i;i++){var r=t[i].split("=");r[0].length&&(o[r[0]]=decodeURIComponent(r[1]||""),"query"==r[0]&&l(r[1]))}return o},a=function(e){var t="";for(var i in e)i.length&&(t+=i+"="+encodeURIComponent(e[i])+"&");return t.slice(0,-1)},l=function(e){var t=$.cookie("weheartit_searches"),i=[];return t&&(i=t.toString().split(","),-1!=$.inArray(e,i)&&i.splice($.inArray(e,i),1)),i.push(e),$.cookie("weheartit_searches",i,{path:"/",expires:1}),!0},c=function(e,t,i){var n=[];return t&&n.push("page="+t),i&&n.push("before="+i),r(e,n.join("&"))},u=i.exports.LOCATION={other:0,entry_details:1,dashboard:2,search_people:3,followers_list:4,following_list:5,regflow:6,collection_details:7,search_collection:8,user_collections:9,user_canvas:10,discover:11,inspiration:12};i.exports.where=function(){var e=null;return e="/"===location.pathname?u.discover:location.pathname.match(/^\/inspirations\/.+/)?u.inspiration:$(".entry-container").length?u.entry_details:location.pathname.match(/^\/dashboard/)?u.dashboard:location.pathname.match(/^\/search\/users/)?u.search_people:location.pathname.match(/^\/search\/collections/)?u.search_collections:location.pathname.match(/.+\/fans$/)?u.followers_list:location.pathname.match(/.+\/contacts$/)?u.following_list:$(".registration_container .user_list_container").length?u.regflow:$(".set-header").length?u.collection_details:location.pathname.match(/.+\/collections$/)?u.user_collections:$(".user-profile").length?u.user_canvas:u.other}}}}),this.require.define({"modules/lib/search":function(e,t,i){function n(e){var t=$(document.createElement("div")),i=$(document.createElement("a")).attr("href",e.click_url).attr("target","_blank");if(i.addClass("autocomplete-ad-link"),e.image_url){var n=$(document.createElement("div")).attr("style","background-image:url("+e.image_url+")").addClass("autocomplete-ad-image");i.append(n)}return i.append($(document.createElement("div")).text(e.title).addClass("autocomplete-ad-title")),i.append($(document.createElement("div")).text(e.description).addClass("autocomplete-ad-description")),i.append($(document.createElement("div")).text(e.display_url).addClass("autocomplete-ad-url")),i.append($(document.createElement("img")).attr("src",e.impression_url).attr("width","1").attr("height","1").addClass("tracking-pixel")),t.append($(document.createElement("div")).addClass("autocomplete-ad-sponsored").text("adMarketplace")),t.append(i),t}{var o=i.exports={};o.init=function(){$(".js-autocomplete-field").autocomplete({minLength:1,source:function(e,t){var i=e.term.trim().toLowerCase();i.length>0&&$.ajax({url:"/search/autosuggest",dataType:"json",data:{query:i},success:function(e){var i=e.suggestions;if(e.ad){var o=n(e.ad);i.push(o)}t(i)}})},select:function(e,t){var i=$(this),n=i.closest("form");i.val(t.item.value),n.find(".autocomplete-clicked").val("1"),n.submit()},open:function(){$(this).removeClass("ui-corner-all").addClass("ui-corner-top")},close:function(){$(this).removeClass("ui-corner-top").addClass("ui-corner-all")}});var e=$.ui.autocomplete.prototype._renderMenu;$.ui.autocomplete.prototype._renderMenu=function(t,i){var n=null;if(i.length>0&&i[i.length-1].length&&(n=i.pop()),e.apply(this,[t,i]),n){var o=$(document.createElement("li")).html(n).data("ui-autocomplete-item","").addClass("autocomplete-ad");o.prependTo(t)}},$(".search-form,#entries-search-form,#image-search-form").submit(function(){var e=$(this).find(".searchfield").val().trim()||$(this).find('[name="query"]').val().trim();return e?void $.publish("whi:searched",{term:e}):!1}),$(".searchfield input[name=query]").bind("focus blur",function(){$(this).parent().toggleClass("focus")}),$("#image-search-form, #entries-search-form").submit(function(){var e=$(this).find("#text");return""==e.val()?(e.focus(),!1):void 0})}}}}),this.require.define({"modules/lib/signup_buttons":function(e,t,i){{var n=t("./routes"),o=t("./tracking");i.exports=function(e){var t={twitter:function(){return o.trackPageview("/join/twitter/button"),o.trackGAEvent("Registration","Started","Twitter"),!0},facebook:function(){return o.trackPageview("/join/facebook/button"),o.trackGAEvent("Registration","Started","Facebook"),!0},google:function(){return o.trackPageview("/join/google/button"),o.trackGAEvent("Registration","Started","Google"),!0},email:function(){e.emailStart&&e.emailStart(),o.trackPageview("/join/email/button"),o.trackGAEvent("Registration","Started","Email");var t=0;if(document.URL.match(/force_captcha=1/))var t=1;return $.ajax({url:n.getUrl("/registration/sign_up_form"),data:{popup:e.emailPopup,force_captcha:t},success:function(){var t=Array.prototype.slice.call(arguments);e.emailForm.apply(this,t)},complete:e.emailComplete||function(){}}),!1}};this.click=function(i){var n=$(i.target),o=n.is(".js-twitter-signup")?"twitter":n.is(".js-facebook-signup")?"facebook":n.is(".js-email-signup")?"email":n.is(".js-google-signup")?"google":!1;return o?($.publish("whi:initiate_signup"),"email"!=o&&"google"!=o&&e.serviceClicked&&e.serviceClicked(),t[o](i)):void 0}}}}}),this.require.define({"modules/lib/signup_prompt":function(e,t,i){var n=t("./routes"),o=t("../utils/storage"),r=i.exports={min_entries:6};r.display=function(){if(this.eligible()){var e=o.get("seen_entries").reverse();$.get(n.registration_prompt_path,{entry_ids:e},function(e){$("#lightbox").html(e),$.cookie("showed_prompt",!0,{expires:30})})}},r.eligible=function(){try{return"yes"!=$.cookie("auth")&&!$.cookie("showed_prompt")&&o.get("seen_entries").length>=this.min_entries}catch(e){return!1}}}}),this.require.define({"modules/lib/start_hearting_prompt":function(e,t,i){var n=t("../utils/logger"),o=(t("./config"),t("./routes")),r=t("../utils/utils"),s=t("./tracking"),a=(t("../utils/anonymous_session")(),i.exports={min_page_views:4,displayFromOptimizely:function(){return window.optimizely=window.optimizely||[],window.optimizely.push(["activate",208006851]),$("#optimizely_prompt").length>0},displayPrompt:function(){this.eligible()&&(this.displayFromOptimizely()||this.display("background"))},closePrompt:function(){$(".start_hearting_popup").off("click",".closex,#close",a.closePrompt),$(this).parent().remove(),s.trackGAEvent("Registration Overlay pinkheart","dismissed","yes",0,!0)},display:function(e){r.prompt_helper.track_prompt_show(),$.get(o.start_hearting_prompt_path,{variation:e},function(e){$("body").append(e),$.cookie("showed_start_hearting",!0,{expires:30,path:"/"}),$(".start_hearting_popup").on("click",".closex, #close",a.closePrompt)})},eligible:function(){return n.warn("start hearting prompt disabled."),!1}})}}),this.require.define({"modules/lib/tracking":function(e,t,i){var n=t("../utils/logger"),o=t("../utils/utils"),r=t("./config"),s=t("./inject_script"),a=t("./routes"),l=!1,c=!1,u={c1:"2",c2:"9875369"};window._gaq=window._gaq||[],window._comscore=window._comscore||[];{var d=i.exports={},h=function(){r.mobile_app||r.dev_mode||(_comscore.push(u),function(){var e=document.createElement("script"),t=document.getElementsByTagName("script")[0];e.async=!0,e.src=("https:"==document.location.protocol?"https://sb":"http://b")+".scorecardresearch.com/beacon.js",t.parentNode.insertBefore(e,t)}())},f=function(){window.COMSCORE&&COMSCORE.beacon&&COMSCORE.beacon(u)},p=function(e,t){if(e.indexOf("fb_source=")>-1){var i="utm_source=facebook.com&"+e.replace(/^\?/,"").replace("fb_action_types=","utm_medium=").replace("fb_source=","utm_campaign=");t.push(["_set","campaignParams",i]),n.log("set campaignParams",i)}},m=function(){if(!r.mobile_app){_gaq.push(["_setAccount","UA-20250234-1"]),/^m\./.test(window.location.hostname)&&_gaq.push(["_setDomainName","weheartit.com"]),p(document.location.search,_gaq),d.setCustomVar(1,"authenticated",r.authenticated,2),r.user_authenticated&&(d.setCustomVar(2,"registered",r.registration_date,1),d.setCustomVar(8,"registered-day",r.registered_day,1));var e=null;(e=/__utma=[0-9]+\.([0-9]+)/g.exec(document.cookie))&&d.setCustomVar(50,"userid",e[1],2);var t=null;if(r.user_authenticated){var i=r.user_id;d.setCustomVar(7,"userid",i,2),t="R"+i}else{var n=/__whsp=([\w]+)/g.exec(document.cookie);n?d.setCustomVar(7,"userid","C"+n[1],2):e&&d.setCustomVar(7,"userid","G"+e[1],2),e?t="U"+e[1]:n&&(t="U"+n[1])}!function(){if(t){var e=$(".beta a");if(e.length){var i=e.attr("href")+"?c="+t;e.attr("href",i)}}}();var o=r.current_locale;if(o&&""!=o&&d.setCustomVar(27,"locale",o,1),r.experiment?d.setCustomVar(20,r.experiment.name,r.experiment.variant,2):d.setCustomVar(20,"None","None",2),r.customVars)for(var a=0;a<r.customVars.length;a++){var l=r.customVars[a];d.setCustomVar(l.index,l.key,l.value,l.scope)}s(("https:"==document.location.protocol?"https://":"http://")+"stats.g.doubleclick.net/dc.js"),c=!0,$(window).on("click",'[data-track="event"]',v.bind(null,"trackGAEvent",["category","action","label","value","noninteraction"])),$(window).on("click",'[data-track="social"]',v.bind(null,"trackSocial",["service","action","target","pagepath"])),$(window).on("click",'[data-track="pageview"]',v.bind(null,"trackPageview",["pageurl","pagename"])),$.subscribe("trackGAEvent",g("trackGAEvent")),$.subscribe("trackSocial",g("trackSocial")),$.subscribe("trackPageview",g("trackPageview"))}},g=function(e){return function(){var t=Array.prototype.slice.call(arguments,1);d[e].apply(d,t)}},v=function(e,t,i){var n=$(i.currentTarget);t=t.map(function(e){return n.attr("data-"+e)}),d[e].apply(d,t)},y=function(e){return e&&(e=e.replace(/(\?.*?email(.*?)=)(.+?)(&|$)/gi,"$1xxxx$4"),e=e.replace(/(\?.*?password(.*?)=)(.+?)(&|$)/gi,"$1xxxx$4"),e=e.replace(/(\?.*?token(.*?)=)(.+?)(&|$)/gi,"$1xxxx$4"),e=e.replace(/(\?.*?secret(.*?)=)(.+?)(&|$)/gi,"$1xxxx$4")),e};d.init=function(){l||(h(),m(),d.trackPageView())}}d.trackPageView=d.trackPageview=function(e,t){var i=!1;e||(i=!0,e=window.location.pathname+window.location.search),e.match(/^http(s?):\/\//i)&&(e=e.replace(/^http(s?):\/\/[^\/]+/i,"")),e=y(e),_gaq.push(["_trackPageview",e]),f(),n.log("tracking page view: ",e,t||"")},d.trackTiming=function(e,t,i,o,r){_gaq.push(["_trackTiming",e,t,i,o,r]),n.log("tracking timing: ",e,t,i,o,r)},d.setCustomVar=function(e,t,i,o){"string"!=typeof i&&(i=i?i.toString():""),c&&n.error("WARNING: custom variable "+t+"("+e+") attempted to be set after ga was initialized. Data may be inconsistent."),_gaq.push(["_setCustomVar",e,t,i,o]),n.log("setting custom var: ",e,t,i,o)
},d.trackSocial=function(e,t,i,o){_gaq.push(["_trackSocial",e,t,i,o]),n.log("tracking social: ",e,t,i,o)},d.trackGAEvent=function(e,t,i,r,s){var a=null;r&&(a=parseInt(r,10),isNaN(a)&&(a=0,n.error("Invalid value "+r+" passed to trackGAEvent."))),i=i&&i.toString()||i;var l=["_trackEvent"].concat([e,t,i,a,s].map(function(e){switch(e){case"uniqueAnalyticsLabel":return o.uniqueAnalyticsLabel();default:return e}}));_gaq.push(l),n.log("tracking old GA event: ",l.slice(1).join(" "))},d.promotedEntryAction=function(e,t){$.ajax({type:"get",url:"/promoted_entry_action/"+t+"/"+e})},d.trackGridAction=function(e,t){var i=[];i.push("User: "+t.data("uploader-username")),i.push("Entry: "+t.data("entry-id")),t.data("actionable")===!0&&i.push("actionable"),t.data("promoted")===!0&&i.push(t.closest(".promoted-wrapper").length?"promoted":"organic"),d.trackGAEvent("Heart Actions",e,i.join(" "),1)},d.where=function(){var e=null,t=a.where();return t===a.LOCATION.entry_details&&(e="Entry Details"),t===a.LOCATION.dashboard&&(e="Dashboard"),t===a.LOCATION.search_people&&(e="Search People"),t===a.LOCATION.followers_list&&(e="Followers List"),t===a.LOCATION.following_list&&(e="Following List"),t===a.LOCATION.regflow&&(e="Regflow"),t===a.LOCATION.collection_details&&(e="Collection Details"),t===a.LOCATION.search_collection&&(e="Search Collection"),t===a.LOCATION.user_collections&&(e="User Collections"),t===a.LOCATION.user_canvas&&(e="User Canvas"),t===a.LOCATION.discover&&(e="Discover"),t===a.LOCATION.other&&(e="Other"),e}}}),this.require.define({"modules/lib/tracking/data_layer":function(e,t,i){var n=(t("../../utils/logger"),t("../config")),o=t("../../lib/routes"),r=i.exports={};r.init=function(){n.experiment&&r.experimentBucket(),n.experimentRendered&&r.experimentBucketRendered()},r.entryHeart=function(e){var t=new f;t.addString("event","entryHeart"),t.addString("entryId",e.attr("data-entry-id")),t.addString("entryGroupId",e.attr("data-entry-group-id")),t.addString("entryOwner",e.attr("data-username"));var i=l(e);t.addBoolean("entryPromoted",i),t.addStringIf("entryDisplayType",s(e),i);var n=c(e);t.addStringIf("entryCategory",n);var o=a(e);t.addStringIf("entryDisplayMode",o),t.push()},r.followCollection=function(e){var t=new f;t.addString("event","userFollowCollection"),t.addString("collectionId",u(e)),t.addString("followingType","collection"),t.addStringIf("collectionOwnerId",e.closest("[data-user-id]").attr("data-user-id")),t.push()},r.addEntryCollection=function(e){var t=new f;t.addString("event","entryAddToCollection"),t.addString("entryId",e.closest(".entry").data("entry-id")),t.addString("entryGroupId",e.closest("[data-uploader-username]").find("[data-entry-group-id]").attr("data-entry-group-id")),t.addString("collectionId",e.val()),t.addString("entryOwner",e.closest("[data-uploader-username]").attr("data-uploader-username")),t.addBoolean("entryPromoted",l(e)),t.addStringIf("entryDisplayType",s(e),l(e));var i=c(e);t.addStringIf("entryCategory",i),t.push()},r.entryShare=function(e){var t=new f;e=e||{},t.addString("event","entryShare"),t.addString("entryId",e.entry_id),t.addString("entryGroupId",e.entry_group_id),t.addString("entryOwner",n.username),t.addBoolean("entryPromoted",!1),t.addBoolean("isEntryUploaded",!1),t.addNumber("entriesAddedToday",e.entries_added_today),e.service&&(t.addString("network",e.service),t.addString("socialAction",d(e.service)),t.addString("opt_target",o.entry_path(e.entry_id)),t.addString("opt_pagePath",document.location)),t.push()},r.entryShareOnUpload=function(e){var t=new f;e=e||{},t.addString("event","entryShare"),t.addString("entryId",e.entry_id),t.addString("entryGroupId",e.entry_group_id),t.addString("entryOwner",n.username),t.addBoolean("entryPromoted",!1),t.addBoolean("isEntryUploaded",!0),t.addNumber("daysSinceLastAddedEntry",e.days_since_last_added_entry),t.addNumber("daysSinceFirstAddedEntry",e.days_since_first_added_entry),t.addNumber("entriesAddedToday",e.entries_added_today),e.service&&(t.addString("network",e.service),t.addString("socialAction",d(e.service)),t.addString("opt_target",o.entry_path(e.entry_id)),t.addString("opt_pagePath",document.location)),t.push()},r.contentViewUpdate=function(e){var t=n.pageData,i=new f;i.addString("event","content-view"),i.addString("locale",n.current_locale),i.addString("pageType",t.type),i.addStringIf("pageTypeId",t.id,"other"!==t.type),i.addString("contentLocale",n.current_locale),i.addStringIf("contentVirtualUrl",e&&h(e.url)),i.addStringIf("contentVirtualName",e&&e.name),i.push()},r.userRegister=function(e){var t=new f;e=e||{},t.addString("event","userRegister"),t.addString("userCountry",n.country),t.addString("visitorId",n.user_id),t.addString("visitorLoginState","loggedin"),t.addString("userLocalePreference",n.current_locale),t.push()},r.userLogin=function(){var e=new f;e.addString("event","userLogin"),e.addString("visitorId",n.user_id),e.addString("visitorLoginState","loggedin"),e.addString("visitorLastLoginVisitDate",n.last_visit_date),e.addNumber("visitorDaysSinceLastLoginVisit",n.days_since_last_visit),e.addString("visitClassification",n.classification),e.addNumberIf("demoUserAgeYears",n.age_year),e.addNumberIf("demoYearOfBirth",n.age),e.addNumberIf("demoMonthOfBirth",n.age_month),e.addString("userLocalePreference",n.current_locale),e.addNumber("totalEntriesAdded",n.num_of_entries),e.push()},r.followUser=function(e){var t=new f;t.addString("event","userFollow"),t.addString("followingId",e.attr("data-user-id")),t.addString("followingType","user"),t.push()},r.entryImpression=function(e){var t=(n.pageData,new f);t.addString("event","entryView"),t.addString("entryId",e.attr("data-entry-id")),t.addString("entryGroupId",e.attr("data-entry-group-id")),t.addString("entryOwner",e.attr("data-uploader-username")),t.addBoolean("entryPromoted",l(e)),t.addStringIf("entryDisplayType",s(e),l(e));var i=c(e);t.addStringIf("entryCategory",i);var o=a(e);t.addStringIf("entryDisplayMode",o),t.push()},r.experimentBucket=function(){var e=new f;e.addString("event","experimentBucket"),e.addString("experimentName",n.experiment.name),e.addString("variationName",n.experiment.variant),e.push()},r.experimentBucketRendered=function(){var e=new f;e.addString("event","experimentBucketRendered"),e.addString("experimentName",n.experiment.name),e.addString("variationName",n.experiment.variant),e.push()};var s=function(e){return 0===e.closest(".promoted-wrapper").length?"native":"promoted"},a=function(e){var t=null;return e.closest("#lightbox").length?t="lightbox":e.closest(".grid-dashboard").length?t="homepage":e.closest(".explore").length?t="stream":e.closest(".user-profile").length&&(t="user_profile"),t},l=function(e){return!!e.closest("[data-promoted=true]").length},c=function(e){var t=e.closest("#inspirations-view .content").find("h1");return t.length?t.text():null},u=function(e){return collectionId=null,e.siblings("[data-item-id]").length?collectionId=e.siblings("[data-item-id]").attr("data-item-id"):e.closest("[data-id]").length?collectionId=e.closest("[data-id]").attr("data-id"):e.closest("[data-set-id]").length&&(collectionId=e.closest("[data-set-id]").attr("data-set-id")),collectionId},d=function(e){return"facebook"===e?"share":"twitter"===e?"share":"tumblr"===e?"share":null},h=function(e){var t=RegExp("(http|https)://"+location.hostname);return e&&e.replace(t,"")},f=function(){this.values={}},p=function(e,t){return void 0!==e&&null!==e&&(e=t(e)),e},m=function(e){return function(t,i){this.values[t]=p(i,e)}};f.prototype.addString=m(String),f.prototype.addNumber=m(Number),f.prototype.addBoolean=m(Boolean);var g=function(e){return function(t,i,n){2===arguments.length&&(n=i),this.values[t]=p(n?i:null,e)}};f.prototype.addStringIf=g(String),f.prototype.addNumberIf=g(Number),f.prototype.addBooleanIf=g(Boolean),f.prototype.push=function(){window.dataLayer=window.dataLayer||[],window.dataLayer.push(this.values)}}}),this.require.define({"modules/lib/ujs_cors":function(e,t,i){var n=(i.exports=function(e){return this.action=e.attr("action"),this.method=e.attr("method"),this.form=e,e.on("submit",n.bind(this)),e},function(){{var e=this.form;$.ajax({url:this.action,data:e.serialize(),cache:!1,processData:!1,type:this.method,headers:{"X-Requested-With":"XMLHttpRequest"},success:function(t,i,n){e.trigger("ajax:success",[t,i,n])},error:function(t,i,n){e.trigger("ajax:error",[t,i,n])},complete:function(t,i){e.trigger("ajax:complete",[t,i])},beforeSend:function(t,i){e.trigger("ajax:complete",[t,i])}})}return e.trigger("ajax:before"),!1})}}),this.require.define({"modules/lib/verifier":function(e,t,i){i.exports=function(e,t,i,n,o,r){function s(){return n.empty()||n.equals(c)?(n.empty()&&(d.addClass("js-empty").removeClass("valid").removeClass("invalid"),h.hide(),p.hide()),void(void 0!=n.complete&&n.complete())):(d.removeClass("js-empty"),c=n.data(),u.abort(),h.removeClass("error"),h.removeClass("success"),h.addClass("ajax"),h.show(),f.show(),f.text(I18n.t("js.verifier.validating")),void(u=$.getJSON(o,n.data()).success(function(e){if(e.errors&&e.errors.username){if(d.removeClass("valid").addClass("invalid"),h.addClass("error"),p.show(),p.html(e.errors&&e.errors.username.join("; ")),e.suggested_username){var t=$('<a href="#">'+e.suggested_username+"</a></div>");m.html(I18n.t("js.verifier.suggested_username")+": ").append(t).show(),t.click(function(t){t.preventDefault(),d.val(e.suggested_username).trigger("change"),h.hide(),m.hide()})}}else p.hide(),h.addClass("success"),d.removeClass("invalid").addClass("valid"),f.text(I18n.t("js.verifier.valid"))}).complete(function(){f.hide(),h.removeClass("ajax"),void 0!=n.complete&&n.complete()})))}function a(){clearTimeout(l),l=setTimeout(s,r)}"undefined"==typeof o&&(o="/users/validate"),"undefined"==typeof r&&(r=1e3),this.verify=s;var l,c,u={abort:function(){}},d=$(e),h=$(t),f=h.find(".js-username-spinner"),p=$(".js-username-error"),m=$(i);d.on("keyup blur change input",a)}}}),this.require.define({"modules/lib/view":function(e,t,i){var n=i.exports=function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);return this};n.prototype.matchRoute=function(){return!1},n.prototype.rebindEvents=function(){this.events&&this.events.length&&(o(this.events,"off"),o(this.events,"on"))},n.prototype._init=function(){this.events&&this.events.length&&o(this.events,"on"),"function"==typeof this.init&&this.init.apply(this,arguments)},n.prototype._teardown=function(){this.events&&this.events.length&&o(this.events,"off"),"function"==typeof this.teardown&&this.teardown.apply(this,arguments)},n.loadView=function(){$.publish("whi:load_view",Array.prototype.slice.call(arguments))},n.unloadView=function(e){$.publish("whi:unload_view",e)};var o=function(e,t){(e||[]).forEach(function(e){var i=e.slice(1),n=e[0];"subscribe"==n?"on"==t?$.subscribe.apply($,i):$.unsubscribe.apply($,i):$.fn[t].apply($(n),i)})}}}),this.require.define({"modules/lib/whi_history":function(e,t,i){var n=i.exports={},o=n.enabled=window.history&&window.history.pushState,r=!1,s="state"in window.history?!1:!0,a=window.location.href.replace(/#.+/,""),l=window.location.href.replace(/#.+/,""),c=0,u=!1;n.init=function(){if(!r){r=!0,s&&this.replaceState({link:a});var e=window.onpopstate;window.onpopstate=function(){h.apply(this,arguments),"function"==typeof e&&e.apply(this,arguments)}}},n.pushState=function(e){return o?(window.history.pushState(e,e.link,e.link),d(e),c++,void $.publish("whiHistory:push",e)):window.location=e.link},n.replaceState=function(e){return o?(d(e),void $.publish("whiHistory:replace",e)):!1},n.returnToTop=function(){c>0&&window.history.go(-c),u=!0;var e="object"==typeof l?l:{link:l};n.replaceState(e),c=0},n.cancelPop=function(){if(!o)return!1;var e=n.previousState;window.history.replaceState(e,e.link,e.link),d(e)},n.setTop=function(){l=n.currentState?n.currentState:{link:window.location.href},c=0};var d=function(e){return o?(n.previousState=n.currentState,n.currentState=e,void window.history.replaceState(e,e.link,e.link)):!1},h=function(e){var t=e.state;t&&(s&&0==c||(d(t),c--,t.cancellable=!u,u=!1,$.publish("whiHistory:pop",t)))};n.init()}}),this.require.define({"modules/utils/anonymous_session":function(e,t,i){var n,o=function(){var e={cookie_name:"_weheartit_anonymous_session",maximum_searches_tracked:10,maximum_chars_per_search:50,new_session_data:function(){return{page_views:0,search_count:0,last_searches:[],last_page_view_at:null}},current_pageviews:function(){return this.get_anonymous_session_data().page_views},get_anonymous_session_data:function(){var e=$.cookie(this.cookie_name);return e&&"null"!==e?JSON.parse(e):this.new_session_data()},set_anonymous_session_data:function(e){$.cookie(this.cookie_name,JSON.stringify(e),{path:"/"})},track_anonymous_session:function(){var e=this;setTimeout(function(){var t=e.get_anonymous_session_data();t.page_views+=1,t.last_page_view_at=(new Date).getTime(),e.set_anonymous_session_data(t);var i=e;$(document).ready(function(){i.track_image_searches()})},1e3)},track_image_searches:function(){var e=$("#image-search-form");if(e.length){var t=this;e.submit(function(){var e=t.get_anonymous_session_data();return e.last_searches.unshift($("#text").val().substr(0,t.maximum_chars_per_search)),e.last_searches=e.last_searches.slice(0,t.maximum_searches_tracked),e.search_count+=1,t.set_anonymous_session_data(e),!0})}}};return e};i.exports=function(){return n?n:n=o()}}}),this.require.define({"modules/utils/logger":function(e,t,i){var n=t("../lib/config").updateCache(),o=n.dev_mode?!0:!1,r=[],s=window.logger=i.exports={printStack:function(){this.verbose=!0;for(var e;e=r.shift();)e.length&&a.apply(null,e);this.verbose=o},verbose:o},a=function(e,t){s.verbose?console[e].apply(console,t):r.push([e,t])};for(var l in console)s[l]=function(){a(this.type,arguments)}.bind({type:l})}}),this.require.define({"modules/utils/slug":function(e,t,i){i.exports=function(e){e=e.replace(/^\s+|\s+$/g,"");for(var t="\xe0\xe1\xe4\xe2\xe8\xe9\xeb\xea\xec\xed\xef\xee\xf2\xf3\xf6\xf4\xf9\xfa\xfc\xfb\xf1\xe7\xfd\xff\xb7/-,:;",i="aaaaeeeeiiiioooouuuuncyy______",n=0,o=t.length;o>n;n++)e=e.replace(new RegExp(t.charAt(n),"g"),i.charAt(n));return e=e.replace(/[^A-Za-z0-9 _]/g,"").replace(/\s+/g,"_").replace(/_+/g,"_")}}}),this.require.define({"modules/utils/storage":function(e,t,i){i.exports={enabled:function(){try{return"localStorage"in window&&null!==window.localStorage}catch(e){return!1}},store:function(e,t){return this.enabled()?(localStorage[e]=JSON.stringify(t),t):!1},get:function(e){if(!this.enabled())return void 0;try{return JSON.parse(localStorage[e])}catch(t){return void 0}},add:function(e,t){var i=this.get(e)||[];return-1==$.inArray(t,i)&&(i.push(t),this.store(e,i)),i},shift:function(e){var t=this.get(e)||[];return t.shift(),this.store(e,t),t},"delete":function(e){this.enabled()&&localStorage.removeItem(e)}}}}),this.require.define({"modules/utils/ua-parser":function(e,t,i){!function(t,n){"use strict";var o="",r="?",s="function",a="undefined",l="object",c="major",u="model",d="name",h="type",f="vendor",p="version",m="console",g="mobile",v="tablet",y={has:function(e,t){return-1!==t.toLowerCase().indexOf(e.toLowerCase())}},b={rgx:function(){for(var e,t,i,o,r,c,u,d=0,h=arguments;d<h.length;d+=2){var f=h[d],p=h[d+1];if(typeof e===a){e={};for(o in p)r=p[o],typeof r===l?e[r[0]]=n:e[r]=n}for(t=i=0;t<f.length;t++)if(c=f[t].exec(this.getUA())){for(o in p)u=c[++i],r=p[o],typeof r===l&&r.length>0?2==r.length?e[r[0]]=r[1]:3==r.length&&(e[r[0]]=typeof r[1]!==s||r[1].exec&&r[1].test?u?u.replace(r[1],r[2]):n:u?r[1].call(this,u,r[2]):n):e[r]=u?u:n;break}if(c)break}return e},str:function(e,t){for(var i in t)if(typeof t[i]===l&&t[i].length>0){for(var o in t[i])if(y.has(t[i][o],e))return i===r?n:i}else if(y.has(t[i],e))return i===r?n:i;return e}},w={browser:{oldsafari:{major:{1:["/8","/1","/3"],2:"/4","?":"/"},version:{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}}},device:{sprint:{model:{"Evo Shift 4G":"7373KT"},vendor:{HTC:"APA",Sprint:"Sprint"}}},os:{windows:{version:{ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2000:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",RT:"ARM"}}}},_={browser:[[/(opera\smini)\/((\d+)?[\w\.-]+)/i,/(opera\s[mobiletab]+).+version\/((\d+)?[\w\.-]+)/i,/(opera).+version\/((\d+)?[\w\.]+)/i,/(opera)[\/\s]+((\d+)?[\w\.]+)/i],[d,p,c],[/\s(opr)\/((\d+)?[\w\.]+)/i],[[d,"Opera"],p,c],[/(kindle)\/((\d+)?[\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/\s]?((\d+)?[\w\.]+)*/i,/(avant\s|iemobile|slim|baidu)(?:browser)?[\/\s]?((\d+)?[\w\.]*)/i,/(?:ms|\()(ie)\s((\d+)?[\w\.]+)/i,/(rekonq)((?:\/)[\w\.]+)*/i,/(chromium|flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt)\/((\d+)?[\w\.-]+)/i],[d,p,c],[/(yabrowser)\/((\d+)?[\w\.]+)/i],[[d,"Yandex"],p,c],[/(comodo_dragon)\/((\d+)?[\w\.]+)/i],[[d,/_/g," "],p,c],[/(chrome|omniweb|arora|[tizenoka]{5}\s?browser)\/v?((\d+)?[\w\.]+)/i],[d,p,c],[/(dolfin)\/((\d+)?[\w\.]+)/i],[[d,"Dolphin"],p,c],[/((?:android.+)crmo|crios)\/((\d+)?[\w\.]+)/i],[[d,"Chrome"],p,c],[/version\/((\d+)?[\w\.]+).+?mobile\/\w+\s(safari)/i],[p,c,[d,"Mobile Safari"]],[/version\/((\d+)?[\w\.]+).+?(mobile\s?safari|safari)/i],[p,c,d],[/webkit.+?(mobile\s?safari|safari)((\/[\w\.]+))/i],[d,[c,b.str,w.browser.oldsafari.major],[p,b.str,w.browser.oldsafari.version]],[/(konqueror)\/((\d+)?[\w\.]+)/i,/(webkit|khtml)\/((\d+)?[\w\.]+)/i],[d,p,c],[/(navigator|netscape)\/((\d+)?[\w\.-]+)/i],[[d,"Netscape"],p,c],[/(swiftfox)/i,/(iceweasel|camino|chimera|fennec|maemo\sbrowser|minimo|conkeror)[\/\s]?((\d+)?[\w\.\+]+)/i,/(firefox|seamonkey|k-meleon|icecat|iceape|firebird|phoenix)\/((\d+)?[\w\.-]+)/i,/(mozilla)\/((\d+)?[\w\.]+).+rv\:.+gecko\/\d+/i,/(uc\s?browser|polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf)[\/\s]?((\d+)?[\w\.]+)/i,/(links)\s\(((\d+)?[\w\.]+)/i,/(gobrowser)\/?((\d+)?[\w\.]+)*/i,/(ice\s?browser)\/v?((\d+)?[\w\._]+)/i,/(mosaic)[\/\s]((\d+)?[\w\.]+)/i],[d,p,c]],device:[[/\((ipad|playbook);[\w\s\);-]+(rim|apple)/i],[u,f,[h,v]],[/(hp).+(touchpad)/i,/(kindle)\/([\w\.]+)/i,/\s(nook)[\w\s]+build\/(\w+)/i,/(dell)\s(strea[kpr\s\d]*[\dko])/i],[f,u,[h,v]],[/\((ip[honed]+);.+(apple)/i],[u,f,[h,g]],[/(blackberry)[\s-]?(\w+)/i,/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|huawei|meizu|motorola)[\s_-]?([\w-]+)*/i,/(hp)\s([\w\s]+\w)/i,/(asus)-?(\w+)/i],[f,u,[h,g]],[/\((bb10);\s(\w+)/i],[[f,"BlackBerry"],u,[h,g]],[/android.+((transfo[prime\s]{4,10}\s\w+|eeepc|slider\s\w+))/i],[[f,"Asus"],u,[h,v]],[/(sony)\s(tablet\s[ps])/i],[f,u,[h,v]],[/(nintendo)\s([wids3u]+)/i],[f,u,[h,m]],[/((playstation)\s[3portablevi]+)/i],[[f,"Sony"],u,[h,m]],[/(sprint\s(\w+))/i],[[f,b.str,w.device.sprint.vendor],[u,b.str,w.device.sprint.model],[h,g]],[/(htc)[;_\s-]+([\w\s]+(?=\))|\w+)*/i,/(zte)-(\w+)*/i,/(alcatel|geeksphone|huawei|lenovo|nexian|panasonic|(?=;\s)sony)[_\s-]?([\w-]+)*/i],[f,[u,/_/g," "],[h,g]],[/\s((milestone|droid[2x]?))[globa\s]*\sbuild\//i,/(mot)[\s-]?(\w+)*/i],[[f,"Motorola"],u,[h,g]],[/android.+\s((mz60\d|xoom[\s2]{0,2}))\sbuild\//i],[[f,"Motorola"],u,[h,v]],[/android.+((sch-i[89]0\d|shw-m380s|gt-p\d{4}|gt-n8000|sgh-t8[56]9))/i],[[f,"Samsung"],u,[h,v]],[/((s[cgp]h-\w+|gt-\w+|galaxy\snexus))/i,/(sam[sung]*)[\s-]*(\w+-?[\w-]*)*/i,/sec-((sgh\w+))/i],[[f,"Samsung"],u,[h,g]],[/(sie)-(\w+)*/i],[[f,"Siemens"],u,[h,g]],[/(maemo|nokia).*(n900|lumia\s\d+)/i,/(nokia)[\s_-]?([\w-]+)*/i],[[f,"Nokia"],u,[h,g]],[/android\s3\.[\s\w-;]{10}((a\d{3}))/i],[[f,"Acer"],u,[h,v]],[/android\s3\.[\s\w-;]{10}(lg?)-([06cv9]{3,4})/i],[[f,"LG"],u,[h,v]],[/((nexus\s4))/i,/(lg)[e;\s-\/]+(\w+)*/i],[[f,"LG"],u,[h,g]],[/(mobile|tablet);.+rv\:.+gecko\//i],[h,f,u]],engine:[[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m)\/([\w\.]+)/i,/(khtml|tasman|links)[\/\s]\(?([\w\.]+)/i,/(icab)[\/\s]([23]\.[\d\.]+)/i],[d,p],[/rv\:([\w\.]+).*(gecko)/i],[p,d]],os:[[/(windows)\snt\s6\.2;\s(arm)/i,/(windows\sphone(?:\sos)*|windows\smobile|windows)[\s\/]?([ntce\d\.\s]+\w)/i],[d,[p,b.str,w.os.windows.version]],[/(win(?=3|9|n)|win\s9x\s)([nt\d\.]+)/i],[[d,"Windows"],[p,b.str,w.os.windows.version]],[/\((bb)(10);/i],[[d,"BlackBerry"],p],[/(blackberry)\w*\/?([\w\.]+)*/i,/(tizen)\/([\w\.]+)/i,/(android|webos|palm\os|qnx|bada|rim\stablet\sos|meego)[\/\s-]?([\w\.]+)*/i],[d,p],[/(symbian\s?os|symbos|s60(?=;))[\/\s-]?([\w\.]+)*/i],[[d,"Symbian"],p],[/mozilla.+\(mobile;.+gecko.+firefox/i],[[d,"Firefox OS"],p],[/(nintendo|playstation)\s([wids3portablevu]+)/i,/(mint)[\/\s\(]?(\w+)*/i,/(joli|[kxln]?ubuntu|debian|[open]*suse|gentoo|arch|slackware|fedora|mandriva|centos|pclinuxos|redhat|zenwalk)[\/\s-]?([\w\.-]+)*/i,/(hurd|linux)\s?([\w\.]+)*/i,/(gnu)\s?([\w\.]+)*/i],[d,p],[/(cros)\s[\w]+\s([\w\.]+\w)/i],[[d,"Chromium OS"],p],[/(sunos)\s?([\w\.]+\d)*/i],[[d,"Solaris"],p],[/\s([frentopc-]{0,4}bsd|dragonfly)\s?([\w\.]+)*/i],[d,p],[/(ip[honead]+)(?:.*os\s*([\w]+)*\slike\smac|;\sopera)/i],[[d,"iOS"],[p,/_/g,"."]],[/(mac\sos\sx)\s?([\w\s\.]+\w)*/i],[d,[p,/_/g,"."]],[/(haiku)\s(\w+)/i,/(aix)\s((\d)(?=\.|\)|\s)[\w\.]*)*/i,/(macintosh|mac(?=_powerpc)|plan\s9|minix|beos|os\/2|amigaos|morphos|risc\sos)/i,/(unix)\s?([\w\.]+)*/i],[d,p]]},x=function(e){var i=e||(t&&t.navigator&&t.navigator.userAgent?t.navigator.userAgent:o);return this instanceof x?(this.getBrowser=function(){return b.rgx.apply(this,_.browser)},this.getDevice=function(){return b.rgx.apply(this,_.device)},this.getEngine=function(){return b.rgx.apply(this,_.engine)},this.getOS=function(){return b.rgx.apply(this,_.os)},this.getResult=function(){return{browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice()}},this.getUA=function(){return i},this.setUA=function(e){return i=e,this},void this.setUA(i)):new x(e).getResult()};if(typeof e!==a)typeof i!==a&&i.exports&&(e=i.exports=x),e.UAParser=x;else if(t.UAParser=x,typeof define===s&&define.amd&&define(function(){return x}),typeof t.jQuery!==a){var k=t.jQuery,$=new x;k.ua=$.getResult(),k.ua.get=function(){return $.getUA()},k.ua.set=function(e){$.setUA(e);var t=$.getResult();for(var i in t)k.ua[i]=t[i]}}}(this)}}),this.require.define({"modules/utils/utils":function(e,t,i){var n=t("../lib/config"),o=i.exports={};o.prompt_helper={prompt_showed:!1,is_any_prompt_showed:function(){return this.prompt_showed},track_prompt_show:function(){this.prompt_showed=!0}},o.uniqueUserId=function(){var e=(/__utma=[0-9]+\.([0-9]+)/g.exec(document.cookie)||[])[1],t=(/__whsp=([\w]+)/g.exec(document.cookie)||[])[1];return n.user_id||t||e},o.forEachSeries=o.eachSeries=function(e,t,i){if(i=i||function(){},!e.length)return i();var n=0,o=function(){t(e[n],n,function(){return n++,n<e.length?o():void i()})};o()},o.isTouch=function(){return"ontouchstart"in window||"onmsgesturechange"in window},o.canvasSupported=function(){var e=document.createElement("canvas");return!(!e.getContext||!e.getContext("2d"))},o.render404AjaxErrorBox=function(){var e=I18n.t("js.errors.not_found");return'<div style="padding: 8px 16px;"><h3>'+e+"</h3></div>"},o.render5xxAjaxErrorBox=function(){var e=I18n.t("js.errors.server_error");return'<div style="padding: 8px 16px;"><h3>'+e+"</h3></div>"},o.uniqueAnalyticsLabel=function(){return(new Date).getTime()+"-"+Math.round(1e9*Math.random())},o.defaultAjaxErrorCallback=function(e){e.status>=500?($("#notice").find("p").html(o.render5xxAjaxErrorBox()),$("#notice").show()):404==e.status?($("#notice").find("p").html(o.render404AjaxErrorBox()),$("#notice").show()):($("#notice").find("p").html(e.responseText),$("#notice").show())},o.titleCase=function(e){return e[0].toUpperCase()+e.slice(1).toLowerCase()},o.positionFloatingWindow=function(e){if($(window).height()<e.height()+140){var t=window.innerHeight/2-e.clientHeight/2;e.css("top",(t>0?t:30)+$(window).scrollTop()+"px"),e.css("position","absolute")}else e.css("top","100px"),e.css("position","fixed")},o.parseQueryParams=function(e){var t=document.createElement("a");t.href=e;var i=t.search.replace("?","").split(/&/);return i.reduce(function(e,t){return e[t.split("=")[0]]=t.split("=")[1],e},{})}}}),this.require.define({"modules/views/actions/add_image":function(e,t,i){var n=t("../../lib/config"),o=t("../../lib/routes"),r=t("../../lib/view"),s=t("../../lib/tracking"),a=t("../../lib/tracking/data_layer"),l=i.exports=new r,c=l.reset=function(){$(".error").removeClass("showing").hide(),u=null,b=[],d=null,h=null};l.matchRoute=function(){return!0};var u,d,h,f=240,p=200,m=380,g=/^(?:image\/(?:x-)?(?:gif|p?jp(?:e|g|eg)|png|tiff))$/i,v=1e7,y={lines:"11",length:"2",width:"8",radius:"30",corners:"1.0",rotate:"0",trail:"42",speed:"1.1",direction:"1",hwaccel:"on"},b=[];l.teardown=function(){this.reset()},l.init=function(){$("<img/>")[0].src=n.pink_snake_loader_path;var e=/add_([^=]+)=?([^&]+)?/,t=(window.location.search||"").match(e);if(t||(t=(window.location.hash||"").match(e)),t)if("image"!=t[1])A(t[1]);else{var i={},o=decodeURIComponent(t[2]);try{i=JSON.parse(o),o=i.url}catch(r){i.url=o}i.url?k(i):A("upload")}};var w=function(e){13==e.keyCode&&$(".upload-url-button").trigger("click")},_=function(){$.publish("whi:lightbox:close")},x=function(){if(l.reset(),!$(".upload-info").is(":hidden")){var e={duration:m,queue:!1,complete:function(){$(this).removeAttr("style")}};$(".url-images,.url-box,.upload-box").show().each(function(){var t=$(this).height();$(this).css({height:0,opacity:0}).animate({height:t,opacity:1},e)}),$(".upload-info").animate({opacity:0,height:0},e),r.unloadView("actions/new_entry_form"),$(".back-arrow").removeClass("showing")}},k=function(e){A("image",function(){var t="upload"==e.via;return t?A("upload"):void F(e.url,e.title||"",t,function(){for(var t in e)e.hasOwnProperty(t)&&"url"!=t&&$('[name="'+t+'"]').val(e[t])})})},C=function(e){s.trackGAEvent("AddImage","Error: "+e),$(".upload-info .error").addClass("showing").slideDown().find(".error_message").html(e)},j=function(){T(),s.trackGAEvent("AddImage","ClickedUpload"),A("upload")},S=function(){T(),s.trackGAEvent("AddImage","ClickedAddByUrl"),A("url")},T=function(){$("#addimages").hide()},A=function(e,t){if(!u){u=!0,$("#lightbox").fadeIn(200,function(){$('[name="upload_url"]').focus()}),$("#lightbox .spinner").spin(y);var i=$.ajax({url:"/upload/add/"+("image"==e?"upload":e)});i.done(function(i){0===$("#lightbox").find(".entry-container").length&&(window.location.hash="#add_"+e);var n=300;$("#lightbox").prepend(i).find("#upload-container").css({top:"+="+n,opacity:0}).animate({top:"-="+n,opacity:1},m,"easeOutQuad",function(){$(this).removeAttr("style")}),t&&t()}),i.fail(function(){return $("#lightbox").hide(),403!=i.status||/add_/.test(window.location.hash)?void 0:$.publish("whi:anonymous_upload",{done:o.currentUrl()+"#add_"+e})}),i.always(function(){u=!1,$("#lightbox .spinner").spin(!1)})}},I=function(){var e=$(".upload-url-field").val();if(/\w+(\.\w+)+\/?/.test(e)){$(".url-images").append('<div id="image-loader">'),$(".icon-globe").css({"background-image":'url("/assets/pink_snake_loader.gif")',"background-position":"6px 3px"});var t=$.ajax({url:"/upload/images?url="+encodeURIComponent(e)});t.done(function(e){$(".upload-none-found").hide();var t=$(".url-images").html(e).css("height",0),i=t.find("img"),n=i.length,o=!1,r=function(e){n--,(n>=0||e)&&!o&&($(".url-images").removeAttr("style").hide().slideDown(m),o=!0,""!==$(".upload-info").find(".error").text()&&setTimeout(function(){$(".upload-info").show(),$(".upload-info").find(".error").show()},m+100)),(0>=n&&0==$(".upload-image-container .upload-image").length||e)&&$(".upload-none-found").fadeIn(200),(0>=n||e)&&$(".icon-globe").removeAttr("style")};return t.find("li").hide(),i.length?($(".upload-info").find(".error").text(""),void i.load(function(){var e=$(this),i=e.closest("li").show(),n=[e.width(),e.height()];n[0]<f||n[1]<p?($(".upload-info").find(".error").text(I18n.t("js.new_entry.images_too_small",{min_width:f,min_height:p})),i.remove()):t.append(i.hide().fadeIn(200)),r()}).error(function(){$(this).closest("li").remove(),r()})):r(!0)})}},E=function(){var e=$(this).find(".upload-image > img");$(".upload-info").hide(),$(".upload-info").find(".error").hide(),F(e.attr("src"),e.attr("data-title"),!1)};addUploadFile=function(){var e=this.files[0];if(e.name.length<1)return!1;if(!g.test(e.type))return $(".upload-error.type").slideDown(),!1;if(e.size>v)return $(".upload-error.size").slideDown(),!1;try{var t=new FileReader;t.onload=function(e){return function(t){var i=new FormData(document.getElementById("upload_file"));F(t.target.result,e.name,i)}}(e),t.readAsDataURL(e)}catch(i){$(".upload-error.support").slideDown(),$("#fileupload").prop("disabled",!0)}};var P=function(e){return d?(e&&e(),b.forEach(function(e){e()}),void(b=[])):b.push(e||function(){})},N=function(e,t){if(!this.calledFrom||"showUploadResult"!=this.calledFrom)return P(N.bind({calledFrom:"showUploadResult"},e,t));if("string"!=typeof e&&(t=e,e="url"),t&&(t.error||!t.entry_id))return C(t.error||"No Entry ID returned.");s.trackGAEvent("AddImage","upload"==e?"CompletedAddImageUpload":"CompletedAddImageUrl"),$('.share-toggle-container [type="checkbox"]').each(function(){var e=$(this);if(e.is(":checked")){var t=e.is('[name="share_facebook"]')?"facebook":e.is('[name="share_twitter"]')?"twitter":e.is('[name="share_tumblr"]')?"tumblr":null;s.trackSocial(t,"shareEntry")}});var i=$('.share-toggle-container [type="checkbox"]:checked').map(M),n=function(e){return{entry_id:t.entry_id,entry_group_id:t.entry_group_id,days_since_last_added_entry:t.days_since_last_added_entry,days_since_first_added_entry:t.days_since_first_added_entry,entries_added_today:t.entries_added_today,service:e}},r="upload"===e?"entryShareOnUpload":"entryShare";a[r](n(null)),i.each(function(e,t){var i=n(t);a[r](i)}),setTimeout(function(){window.location=o.entry_path(t.entry_id)+window.location.search},150)},D=function(e,t){return h="failed",this.calledFrom&&"showUploadResult"==this.calledFrom?void C(I18n.t("js.add_image.unknown_error")):P(D.bind({calledFrom:"showUploadResult"},e,t))},O=function(){return"success"!=h&&(h="failed"),this.calledFrom&&"showUploadResult"==this.calledFrom?($('.upload-form [type="submit"]').removeClass("disabled").removeAttr("disabled"),$("#upload-entry-loading").remove(),$(".upload-progress-spinner").spin(!1),void $(".upload-current .status, .upload-progress").hide()):P(O.bind({calledFrom:"showUploadResult"}))},F=function(e,t,i,n){$(".back-arrow").addClass("showing"),$(".url-images,.url-box,.upload-box").animate({height:0,opacity:0},m,function(){$(this).removeAttr("style").hide()}),$(".upload-info").slideDown(m);var o="/upload/form?original-title="+t+"&encoding=UTF-8";via=$(".upload-images").attr("data-url"),via&&(o+="&via="+encodeURIComponent(via)+"&hearting_method=url"),i||(o+="&media="+encodeURIComponent(e));var s=$.ajax({url:o});s.done(function(t){var o=$(".upload-form").html(t).attr("data-username");$(".thumb-tmp").attr("src",e),$(".thumb-mask").css("background-image","url('"+e+"')"),r.loadView("actions/new_entry_form",o,$(".upload-form"),!0),n&&n(),i&&q(i)})},q=function(e){h="uploading";var t=$("#create-entry-form"),i=t.data("meat-url");$.ajax({url:i,data:e,xhr:function(){return myXhr=$.ajaxSettings.xhr(),myXhr.upload&&myXhr.upload.addEventListener("progress",R,!1),myXhr},cache:!1,contentType:!1,processData:!1,type:"POST",success:function(e){h="success",t.find('[name="media"]').remove(),Object.keys(e).forEach(function(i){var n=e[i];t.append('<input type="hidden" name="media['+i+']" value="'+n+'"/>')});t.find('[name="via"]').val("upload");d&&H(N)},error:D,complete:O})},R=function(e,t){if(d){var i=parseInt(t.loaded/t.total*100,10);$(".upload-progress").show().css({width:i+"%"}),100>i?($(".uploading-message").show(),$(".processing-message").hide()):($(".uploading-message").hide(),$(".processing-message").show())}},H=function(e){h&&h.length&&($(".upload-progress-spinner").spin($.extend($.extend({},y),{color:"#fff",radius:11,width:5,length:5,shadow:!0})),e=e.bind(null,"upload"));var t=$("#create-entry-form"),i=$.ajax({url:t.attr("action"),type:t.attr("method"),data:t.serializeArray().concat([{name:"ajax_upload",value:"true"}])});i.done(e),i.fail(D),i.always(O)},L=function(){if(d)return!1;d=!0,$(".error").removeClass("showing").slideUp();var e=$(this);return $(this).after('<div id="upload-entry-loading">'),e.addClass("disabled").attr("disabled","disabled"),"failed"==h?P():"uploading"==h?!1:(H(N),!1)},M=function(e,t){return $(t).prop("name").replace("share_","")},W=function(e,t){var i=$(".js-selected-collections");i.empty(),t.selectedIds.each(function(e,t){i.append('<input type="hidden" name="set[]" value="'+t+'">')})};l.events=[["#addimages","click",".js-add-from-url",S],["#addimages","click",".js-upload-image",j],["subscribe","whi:collections_selected",W],["#lightbox","change","#fileupload",addUploadFile],["#lightbox","click",".upload-url-button",I],["#lightbox","keyup",".upload-url-field",w],["#lightbox","click",".upload-image-container",E],["#lightbox","click",".close-button",_],["#lightbox","click",".back-arrow",x],["#lightbox","click",'.upload-form [type="submit"]',L],["subscribe","lightbox:closed",c]]
}}),this.require.define({"modules/views/actions/heart_success":function(e,t,i){var n=t("../../lib/view"),o=t("../../lib/tracking"),r=i.exports=new n;r.matchRoute=function(){return $("#heart-success-view").length},r.init=function(){var e=$("#heart-success-view");["facebook","twitter","tumblr"].forEach(function(t){"true"==e.attr("data-"+t+"-shared")&&o.trackSocial(t,"shareEntry")}),setTimeout(function(){window.close()},1e3)}}}),this.require.define({"modules/views/actions/new_entry_form":function(e,t,i){var n,o,r,s,a,l,c=t("../../lib/routes"),u=t("../../lib/tracking"),d=t("../../lib/crop"),h=t("../../lib/view"),f=i.exports=new h,p=!1;f.init=function(e,t,i){var t=this.container=t||$("body");j(),n=e,i&&$("[data-referurl]").each(function(){var e=$(this);e.attr("data-referurl",window.location.href.replace(/#.+/,""))}),o=t.find("select[name=set]"),r=t.find("input[name=new_set]"),s=t.find("#create_new_set"),a=t.find("input[name=title]"),s.click(g),r.keydown(v),r.blur(b),C.call($('[name="share_tumblr"]'),!0),"false"==$("#create-entry-form").attr("data-persisted")&&(l=new d($(".thumb-mask"),$(".thumb-tmp"),$("form.stacked-form")))},f.teardown=function(){s.off("click",g),r.off("keydown",v),r.off("blur",b),l&&(l.teardown(),l=null)},f.matchRoute=function(){return $("#create-entry-form").length};var m=function(){return a.val().match(/^\s*$/)?(a.val(""),a.attr("placeholder",I18n.t("js.new_entry.add_title")),!1):(p&&u.trackGAEvent("Post Image","CropAdjusted"),u.trackGAEvent("Post Image","Posted"),!0)},g=function(e){e.preventDefault(),x()},v=function(e){return 13===e.keyCode?(r.attr("disabled","disabled"),w(),!1):void(27===e.keyCode&&x())},y=function(e){var t;[].forEach.call(o[0].options,function(i){t=i.textContent===e.name&&i.value}),e.id&&_(e),o.val(e.id||t),x()},b=function(){""!==r.val()?(r.attr("disabled","disabled"),w()):x()},w=function(){$.ajax({type:"post",url:c.create_entry_set_path(),data:{entry_set:r.val()},success:function(e){y(e)},error:function(){x()}})},_=function(e){document.createElement("option");o.append($("<option>",{value:e.id}).text(e.name)),o.val(e.id)},x=function(){o.is(":visible")?(o.hide(),r.removeAttr("disabled","false"),r.show().focus()):(o.show(),r.hide(),r.val(""),a.focus())},k="_weheartit_default_shares",C=function(e){var t,i=$(this);i.is('[name="share_tumblr"]')?(setTimeout(function(){$.fn[i.is(":checked")?"slideDown":e===!0?"slideUp":"hide"].call($(".tumblr_blog_container"),200,"swing")},90),t="tumblr"):i.is('[name="share_facebook"]')?t="facebook":i.is('[name="share_twitter"]')&&(t="twitter");var n={twitter:$('[name="share_twitter"]').is(":checked"),facebook:$('[name="share_facebook"]').is(":checked"),tumblr:$('[name="share_tumblr"]').is(":checked"),tumblr_blog:$("select.tumblr_blog").val()};if($.cookie(k,JSON.stringify(n)),e!==!0&&i.is(".unlinked")&&i.attr("data-linkurl")){var o={url:$('[name="media"]').val(),via:$('[name="via"]').val(),title:$('[name="title"]').val(),set:$('[name="set"]').val(),tags:$('[name="tags"]').val()},r=c.mergeQueryParams(i.attr("data-referurl")||window.location.href.replace(/#.+/,""),"add_image="+encodeURIComponent(JSON.stringify(o))),s=c.mergeQueryParams(i.attr("data-linkurl"),"referer="+encodeURIComponent(r));u.trackSocial(t,"link"),window.location=s}},j=function(){var e=$.cookie(k);if(e){var t={};try{t=JSON.parse(e)}catch(i){}for(var n in t)if(t.hasOwnProperty(n)){if(t[n]===!0){var o=$('[name="share_'+n+'"]');o.is(".unlinked")||o.prop("checked",!0)}"tumblr_blog"==n&&$("select.tumblr_blog").val(t[n])}}},S=function(){$.unsubscribe("whi:crop:dragging",S),p=!0};f.events=[["form","change",'.share-toggles [type="checkbox"], select.tumblr_blog',C],["form","submit",m],["subscribe","whi:crop:dragging",S]]}}),this.require.define({"modules/views/actions/new_entry_form_sign_in":function(e,t,i){var n=t("../../lib/view"),o=i.exports=new n;o.matchRoute=function(){return $("#login-form,#sign-in").length},o.init=function(){};var r=function(){return $("#sign-in").hide(),$("#login-form").show(),!1},s=function(){return $("#sign-in").show(),$("#login-form").hide(),!1};o.events=[["#sign-in small a","click",r],["#login-form small a","click",s]]}}),this.require.define({"modules/views/actions/too_many_tags":function(e,t,i){var n=t("../../lib/view"),o=i.exports=new n;o.matchRoute=function(){return $("#too_many_tags").length};var r=function(){return s($(this).parent("li")),!1},s=function(e){var t=$("#tags_form ul.tag-list");e.remove();var i=t.children("li").size();$("#tag_count").html(String(i)),8>=i&&($("#resubmit_entry")[0].disabled=!1)},a=function(){$("#reenter_tags").hide(),$("#tags_form ul.tag-list").hide(),$("#tags_form").prepend('<p><textarea name="tags" rows="4" cols="60"></textarea></p>');var e=$("#tags_form textarea")[0],t="";$("#tags_form li input[type=hidden]").each(function(){t+=$(this).val()+", "}),$("#tags_form ul.tag-list").remove(),e.value=t.substring(0,t.length-2),$("#resubmit_entry")[0].disabled=!1};o.events=[[".remove-excess-tag","click",r],["#reenter_tags","click",a]]}}),this.require.define({"modules/views/activation":function(e,t,i){"use strict";var n=t("../lib/view"),o=t("../utils/utils"),r=t("../lib/tracking"),s=i.exports=new n;s.matchRoute=function(){return $(".js-activation").length},s.init=function(){r.trackGAEvent("Activation","LoadedActivation")};var a=function(e){e.preventDefault(),$(".js-activation").hide(),$(".full-spinner").spin(p),$.get($(this).prop("href")).done(function(e){$(".js-activation").html($(".js-activation","<div>"+e+"</div>").html()),$(".entry-thumbnail").first().on("load",function(){var e=$(this).height();$(".entry-thumbnail").each(function(){$(this).css("height",e)})}),$.publish("whi:content_updated"),r.trackGAEvent("Activations","LoadCollection")}).fail(o.defaultAjaxErrorCallback).always(function(){$(".js-activation").fadeIn(100),$(".full-spinner").spin(!1)})},l=function(e){e.preventDefault();var t=$(this).closest("form");$(".js-modal-container").length?($(".js-modal-container").show(),$.subscribe("whi:modal:close",d.bind(null,t))):f(t)},c=function(){var e=$(".js-entries .js-selectable.is-selected").length<3;$(".js-collection-submit").toggleClass("btn-is-disabled",e),$(".js-collection-submit").prop("disabled",e);var t=$(".js-collection-submit"),i=t.attr(e?"data-disabled-message":"data-ready-message");t.val(i)},u=function(){$(this).select(),r.trackGAEvent("Activations","SelectedLink")},d=function(e){var t=e.attr("data-prompt-value"),i=e.find("input[name=collection_name]");i.val(i.val().replace(/%{.+?}/,t)),0===$(".modal-element").length&&f(e)},h=function(){var e=$(this),t=e.val().trim();e.closest(".modal-element").find(".js-modal-close").toggleClass("btn-is-disabled",!t),$("form").attr("data-prompt-value",t)},f=function(e){$(".js-activation").hide(),$(".full-spinner").spin(p);var t=e.find("input[type=checkbox]").toArray().filter(function(e){return $(e).prop("checked")}).map(function(e){return $(e).val()}),i={entry_ids:t,collection_name:e.find("input[name=collection_name]").val(),activation_collection_id:e.find("input[name=activation_collection_id]").val()};$.post(e.prop("action"),i).done(function(e){$(".js-activation").html($(".js-activation","<div>"+e+"</div>").html()),$.publish("whi:content_updated"),r.trackGAEvent("Activations","LoadedDone")}).fail(o.defaultAjaxErrorCallback).always(function(){$(".js-activation").fadeIn(100),$(".full-spinner").spin(!1)})},p={lines:"11",length:"2",width:"8",radius:"30",corners:"1.0",rotate:"0",trail:"42",speed:"1.1",direction:"1",hwaccel:"on"};s.events=[[".js-activation","click",".js-collection-link",a],[".js-activation","click",".js-collection-submit",l],[".js-activation","changed",".js-selectable",c],[".js-activation","click",".js-link",u],[".js-activation","keyup",".js-prompt-value",h]]}}),this.require.define({"modules/views/add_favorite_keyword":function(e,t,i){var n=t("../lib/routes"),o=t("../lib/view"),r=i.exports=new o;r.matchRoute=function(){return $("form#new_keyword").length},r.init=function(){s=$("form#new_keyword input[type=submit]"),a=$("form#new_keyword .tooltip.remove"),l=$("form#new_keyword .tooltip.add")};var s,a,l,c=function(e){$("form#new_keyword .tooltip").hide(),s.hasClass("favorite")?d($("#keyword").val()):u($("#keyword").val()),e.preventDefault()},u=function(e){$.ajax({type:"post",dataType:"json",url:n.add_tracked_keyword_path(),data:{keyword:e},success:function(){s.addClass("favorite"),$.publish("trackGAEvent",["Tag","AddToFavorite"]),$.publish("trackEvent",["click",{widget:"Favorite Tags",action:"add"}])},error:function(e){403===e.status?$.publish("whi:add_favorite_tag",{done:n.currentUrl()}):console.log("Couldn't add keyword to favorites.",arguments)}})},d=function(e){$.ajax({type:"post",dataType:"json",url:n.remove_tracked_keyword_path(),data:{keyword:e,_method:"delete"},success:function(){s.removeClass("favorite"),$.publish("trackGAEvent",["Tag","RemoveFromFavorite"]),$.publish("trackEvent",["click",{widget:"Favorite Tags",action:"remove"}])},error:function(){403===event.status?$.publish("whi:add_favorite_tag",{done:n.currentUrl()}):console.log("Couldnt remove keyword from favorites.",arguments)}})},h=function(){s.hasClass("favorite")?($("form#new_keyword .tooltip.remove").show(),$("form#new_keyword .tooltip.add").hide()):($("form#new_keyword .tooltip.remove").hide(),$("form#new_keyword .tooltip.add").show())},f=function(){$("form#new_keyword .tooltip").hide()};r.events=[["form#new_keyword","submit",c],["form#new_keyword input[type=submit]","mouseleave",f],["form#new_keyword input[type=submit]","mouseenter",h]]}}),this.require.define({"modules/views/adsnative_ads":function(e,t,i){"use strict";var n=t("../lib/view"),o=t("../lib/routes"),r=(t("../lib/tracking"),t("../lib/config")),s=i.exports=new n,a="http://api.adsnative.com/v1/",l=r.get("adsNativeZID"),c=a+"ad.json?zid="+l+"&callback=?";window.location.search.indexOf("test_adsnative=1")>-1&&(c="/debug/ads_native"),s.matchRoute=function(){return!0};var u=function(e){if(0!=e.length)var t=e.data("trackingUrl")||"",i=e.data("adsNativeSid")||"";var n={adsNativeTrackingUrl:t,adsNativeSID:i};return n},d=function(e,t){var i=t.adsNativeTrackingUrl||"",n=t.thirdPartyTracking||"";""!=i&&w(i,"",""),""!=n&&w(n,"","")},h=function(e,t){w(t.adsNativeTrackingUrl,"hearted",t.adsNativeSID)},f=function(e,t){w(t.adsNativeTrackingUrl,"follow_user",t.adsNativeSID)},p=function(e){var t=$(e.currentTarget.closest(".entry")),i=u(t),n=t.data("uploaderUsername")||"",o=$(e.currentTarget).attr("href").substring(1);""!=i.adsNativeTrackingUrl&&n==o&&w(i.adsNativeTrackingUrl,"click_user",i.adsNativeSID)},m=function(e,t){w(t.adsNativeTrackingUrl,"shared",t.adsNativeSID)},g=function(e,t){w(t.adsNativeTrackingUrl,"created_postcard",t.adsNativeSID)},v=function(e,t){w(t.adsNativeTrackingUrl,"setted",t.adsNativeSID)},y=function(e){var t=$(e.currentTarget.closest(".entry")),i=u(t);""!=i.adsNativeTrackingUrl&&w(i.adsNativeTrackingUrl,"clickout",i.adsNativeSID)},b=function(){var e=$('.entry[data-promoted="true"]');$.each(e,function(e,t){if(!$(t).hasClass("adsnative-placement")&&!$(t).attr("data-impression-earned_sent")&&!$(t).hasClass("entry-main")){var i=u($(t));i.adsNativeTrackingUrl&&(w(i.adsNativeTrackingUrl,"impression_earned",i.adsNativeSID),$(t).attr("data-impression-earned_sent",!0))}})},w=function(e,t,i){var n=new Image,o="";return e?(o=e,""!=t&&(o+="?action_name="+t),i="undefined"==typeof i?adsNativeSID:i,""!=i&&(o+="&sid="+i),n.onload=function(){console.log("Ads Native ->",o)},n.onerror=function(e){console.log("Ads Native -> ERROR Tracking Call",e,o)},void(n.src=o)):!1},_=function(e){if(e.ad){var t=null,i=null,n=null,r=null,s=null,a=null;t=e.ad.customFields.content_id,i=e.ad.customFields.user_id,n=e.sid,0==i&&(r=e.ad.brandImageUrl,s=e.ad.promotedBy);var a=o.promoted_entry_path(t);$(".js-ads-native").each(function(t,n){$.get(a,{user_id:i,brand:s,img:r},function(t){var o=$(t),a=o.find(".entry"),l=(a.find("a").first(),a.find("h2.header a").first(),e.ad.trackingUrls.clicks[0]||""),c=e.ad.trackingUrls.clicks[1]||"";a.attr({id:"adsnative-placement"}),""!=l&&a.attr({"data-promoted-click-tracking-url":l}),""!=c&&a.attr({"data-third-party-tracking-url":c}),a.addClass("adsnative-placement"),0==i&&""!=r&&""!=s&&(a.attr({"data-accountless-ad":!0}),a.attr({"data-uploader-username":s}),a.attr({"data-uploader-img":r})),o.append(e.ad.trackingTags),$(n).replaceWith(o),console.log("Inserted ad")}).fail(function(){console.error("Something went wrong getting the ads native promoted entry")})})}},x=function(){var e=$(".js-ads-native");e.length>0&&$.getJSON(c,_),b()},k=function(e,t){try{"infinite_scroll"==t.name&&x()}catch(i){console.error(i)}},C=!1,j=function(e,t){w(t.trackingUrl,t.name,t.sessionId)};s.init=function(){C||(x(),C=!0)},s.events=[["subscribe","whi:ads_native:track",j],["subscribe","whi:content_updated",k],["subscribe","whi:adsnative:clicked",d],["subscribe","whi:hearted",h],["subscribe","whi:followed",f],["subscribe","whi:sharing_dialog",m],["subscribe","whi:setted",v],["subscribe","whi:ads_native:setted",v],["subscribe","whi:share_postcard",g],[window,"click",".entry-holder > a",y],[window,"click",".ads-native-cta > a",y],[window,"click","a.original-link",y],[window,"click",".user-section > a",p],[window,"click",".creator-section > a",p],[window,"click",".creator-section > div > a",p],[window,"click",".header > a",p]]}}),this.require.define({"modules/views/banner_join":function(e,t,i){var n=t("../lib/view"),o=t("../utils/utils"),r=t("../lib/routes"),s=i.exports=new n;s.matchRoute=function(){return $(".about-page .banner-join").length},s.init=function(){};var a=function(){$.publish("trackGAEvent",["JumboPromo","iOSClick",o.uniqueUserId()]),$.publish("trackEvent",["click",{widget:"JumboPromo",action:"iOSClick"}])},l=function(){$.publish("trackGAEvent",["JumboPromo","AndroidClick",o.uniqueUserId()]),$.publish("trackEvent",["click",{widget:"JumboPromo",action:"AndroidClick"}])},c=function(e){e.preventDefault();var t=$("#email").val().trim();$(".loading").show(),$.ajax({url:r.app_download_email(),dataType:"json",type:"post",data:{email:t},success:u,error:d}),$.publish("trackGAEvent",["JumboPromo","EmailClick",o.uniqueUserId()]),$.publish("trackEvent",["click",{widget:"JumboPromo",action:"EmailClick"}])},u=function(){$(".loading").hide(),$(".form").hide(),$("#email_success").fadeIn(),setTimeout(function(){$("#email_success").hide(),$(".form").fadeIn("slow")},5e3)},d=function(){$(".loading").hide(),$(".form").hide(),$("#email_error").fadeIn("fast"),setTimeout(function(){$("#email_error").hide(),$(".form").fadeIn("slow")},3e3)},h=function(){$.publish("trackGAEvent",["JumboPromo","JoinClick",o.uniqueUserId()]),$.publish("trackEvent",["click",{widget:"JumboPromo",action:"JoinClick"}])};s.events=[[".banner-join .itunes-link","click",a],[".banner-join .play-link","click",l],[".banner-join","click","#email_send",c],[".banner-join-1 .button","click",h]]}}),this.require.define({"modules/views/block_warning":function(e,t,i){var n=t("../lib/view"),o=i.exports=new n;o.matchRoute=function(){return $("#blockwarning").length};var r=function(){$.cookie("__hide_block_warning","1",{expires:365}),$("#blockwarning").slideUp()},s=function(){"1"!==$.cookie("__hide_block_warning")&&$("#blockwarning").slideDown()};o.init=function(){s()},o.events=[[window,"click",".js-close-warning",r]]}}),this.require.define({"modules/views/catalog/catalog":function(e,t,i){var n,o=t("../../lib/routes"),r=t("../../lib/view"),s=t("../../lib/whi_history"),a=t("../../lib/tracking"),l=t("../../lib/tracking/data_layer"),c=t("../../lib/lightbox"),u=t("../../lib/start_hearting_prompt"),d=t("../../lib/config"),h=(t("../navbar/navbar"),t("../modals/collections_modal")),f=i.exports=new r;f.init=function(){n=$("#main-container").data("title"),u.displayPrompt(),"#facebook-timeline"==window.location.hash&&$("#timeline-enabled-message").slideDown();var e=!!$("body").attr("data-signing_up");d.mobile_site&&e&&a.trackGAEvent("SignUp","SignUp","SignUp"),$("div.grid-thumb .entry").not(".empty").once("entryViewWaypoint").waypoint(function(){var e=$(this);l.entryImpression(e)},{triggerOnce:!0,offset:"bottom-in-view"}),navigator.userAgent.match(/SAMSUNG|SGH-[I|N|T]|GT-[I|P|N]|SM-[N|P|T|Z]|SHV-E|SCH-[I|J|R|S]|SPH-L/i)&&$(".entry-thumbnail").addClass("samsung_browser")},f.matchRoute=function(){return $(".grid-thumb,.entry-similar").length};var p=function(){var e=$(this),t=e.closest("li").attr("class").replace("view-",""),i=e.closest(".entry");return i.hasClass("show-"+t)?i.removeClass("show-"+t):i.addClass("entry show-"+t+" hover"),!1},m=function(){var e=$(this),t=e.closest(".entry"),i=e.data("username");return P(t,"You're now following "+i+"!"),!1},g=function(){var e=$(this),t=e.closest(".entry");t.addClass("entry show-sets hover");var i=t.find(".call-to-action").length>0;return i&&t.addClass("has-cta"),P(t,I18n.t("js.catalog.image_hearted")),!1},v=function(){var e=$(this),t=e.closest(".entry");return t.addClass("entry hover"),P(t,I18n.t("js.catalog.image_unhearted")),!1},y=function(e,t){var i=$(".entry[data-entry-id='"+t.entry+"']");return P(i,t.$message&&t.$message.text()||""),!1},b=function(){var e=$(this),t=e.closest(".entry"),i=t.find(".sets-window"),n=t.find(".call-to-action");return i.length>0?(i.fadeIn(300),a.trackGAEvent("Set","OpenCollectionSelector","EntryCatalog"),n.length&&n.addClass("hide")):(t.addClass("entry show-sets hover"),n.removeClass("hide")),!1},w=function(){var e=($(this),$(this).parent()),t=$(".call-to-action");return e.fadeOut(300),$(".entry-hover-heart").fadeIn(300),t.removeClass("hide"),!1},_=function(){var e=$(this),t=e.find(".entry-hover.sets-window"),i=$(".call-to-action");return e.addClass("entry"),e.find(".heart").stop(!0,!0).fadeOut(),t.fadeOut(300),$(".entry-hover-heart").fadeIn(300),i.removeClass("hide"),!1},x=function(e,t,i){var n=i.data("trackingUrl"),o=i.data("adsNativeSid");$.publish("whi:setted",{id:e,collection:t,adsNativeTrackingUrl:n,adsNativeSID:o})},k=function(){var e=$(this),t=e.closest(".entry"),i=t.data("entry-id"),n=e.val();e.is(":checked")?""!==n&&($.ajax({type:"post",url:o.set_path(i),data:{entry_set_id:+n},success:function(o){x(i,n,t),C(t,e,o),a.trackGAEvent("Set","Setted",i)},error:function(){P(t,I18n.t("js.catalog.error_try_again"))}}),a.trackGAEvent("Set","Setted"),l.addEntryCollection(e)):$.ajax({type:"delete",url:o.remove_from_set(n),data:{entry_id:+i}}).success(function(){$.publish("whi:unsetted",{id:i,collection:n});var o=I18n.t("js.catalog.removed_from",{from:e.closest("label").text()});P(t,o),a.trackGAEvent("Set","Unsetted",i)}).fail(function(){P(t,I18n.t("js.catalog.error_try_again"))})},C=function(e,t){P(e,I18n.t("js.catalog.saved_to",{to:t.parent().text()}))},j=function(){var e=$(this),t=e.closest(".entry"),i=e.data("entry"),n=e.val();-1===+n?(e.hide(),t.find(".sets .textfield").focus()):""!==n&&$.ajax({type:"post",url:o.set_path(i),data:{entry_set_id:+n},success:function(o){x(i,n,t),E(t,e,o)},error:function(){P(t,I18n.t("js.catalog.error_try_again"))}})},S=function(e){var t=$(this),i=t.closest(".entry"),n=i.data("entry-id"),r=t.closest(".sets-picker"),s=t.data("username");13===e.keyCode?(t.attr("disabled","disabled"),$.ajax({type:"post",url:o.create_entry_set_with_entry_path(s),data:{entry_id:n,entry_set:t.val()},success:function(e){var o=$(e).find(".set-link").attr("data-set-id");x(n,o,i),D(e,n),T(i,t,r)},error:function(){t.removeAttr("disabled").val(""),P(i,I18n.t("js.catalog.error_try_again"))}})):27===e.keyCode&&t.val("")},T=function(e,t){t.removeAttr("disabled").val(""),P(e,I18n.t("js.catalog.set_created"))},A=function(e){var t=$(this),i=t.closest(".entry"),n=i.data("entry-id"),r=t.closest(".sets").find(".js-selectfield"),s=t.data("username");13===e.keyCode?(t.attr("disabled","disabled"),$.ajax({type:"post",url:o.create_entry_set_with_entry_path(s),data:{entry_id:n,entry_set:t.val()},success:function(e){var o=$(e).find(".set-link").attr("data-set-id");x(n,o,i),I(i,t,r),N(e)},error:function(){t.removeAttr("disabled").val(""),P(i,I18n.t("js.catalog.error_try_again"))}})):27===e.keyCode&&r.show().val(0)},I=function(e,t,i){t.removeAttr("disabled").val(""),P(e,I18n.t("js.catalog.set_created")),i.show().val(0)},E=function(e,t){P(e,I18n.t("js.catalog.saved_to",{to:t.find("option:selected").text()})),t.removeAttr("disabled").val(0)},P=function(e,t){e.find(".feedback").html(t.trim()),e.addClass("show-feedback"),setTimeout(function(){e.removeClass("show-feedback")},2e3)},N=function(e){var t=$("<div>").append($(e)),i=t.find("a:last");i.length>0&&$(".entry .sets .js-selectfield").each(function(){$(this).find("option:last").before('<option value="'+i.data("set-id")+'">'+i.find(".set_name").text()+"</option>")})},D=function(e,t){var i=$("<div>").append($(e)),n=i.find("a:last");n.length>0&&$(".entry .sets-wrapper").each(function(){var e=$(this),i=e.closest(".entry"),o=i.data("entry-id"),r="";o===t&&(r="checked"),e.prepend('<p><label><input type="checkbox" class="checkbox" value="'+n.data("set-id")+'" '+r+">"+n.find(".set_name").text()+"</label></p>")})},O=function(e){$.xhrPool.abortAll(),$("title").html(e),s.returnToTop()},F=function(e){if($(window).width()<=666||$("body").is(".mobile-web"))return!0;if($(this).closest(".no-lightbox").length)return!1;if($(this).closest(".entry-similar").length&&!$(this).closest("#lightbox").length)return!0;if(e.metaKey)return!0;var t=$(this).attr("href"),i=$(this).closest(".entry"),n=i.prev().data("entry-id"),o=i.next().data("entry-id"),r=i.data("context-user-id");if(i.attr("data-promoted-click-tracking-url")){var l=i.attr("data-promoted-click-tracking-url"),u=i.attr("data-third-party-tracking-url");$.publish("whi:adsnative:clicked",{adsNativeTrackingUrl:l,thirdPartyTracking:u})}if(i.data("click-track")){$.publish("whi:promoted:clicked",{entryId:i.data("entry-id")});var d=i.closest(".promoted-wrapper");n=d.prev(".entry").data("entry-id"),o=d.next(".entry").data("entry-id")}if(!s.enabled)return!0;s.setTop(),s.pushState({link:t,view:"entry"}),$.publish("whi:content_update_started");var h=new Date;c.isClosed()&&c.open();var f={prev:n,next:o};""!==r&&(f.context_user=r);var p=$.ajax(t,{data:f,success:function(e,n){if("success"==n||"notmodified"==n){var o=$(e),r=$(o.filter("#main-container").html()),s=o.filter("title").html();$("title").html(s);var l=i.data("external-click-track")||"",u=r.find(".original-link, .hub-button, .entry-main-image .entry-holder > a");l.length&&(console.log("External link",u,l),u.attr("href",l),u.attr("target","_blank"));var d=i.data("trackingUrl")||"",f=i.data("adsNativeSid")||"";d.length&&r.find(".entry").attr({"data-tracking-url":d,"data-ads-native-sid":f}),c.loadContent(r,{startTime:h},function(e){if($(".entry-main").data("paid",!!i.closest(".promoted-wrapper").length),a.trackGAEvent("EntryPage","Open Lightbox"),a.trackPageView(t),e.startTime){var n=new Date;a.trackTiming("Ajax","Lightbox Entry",n-h,window.location.origin),a.trackTiming("New Entry Page","Load Entry on Lightbox",n-h,window.location.origin)}})}else window.location.href=t}});return $.xhrPool.push(p),!1},q=function(){if($(window).width()<=666||$("body").is(".mobile-web"))return!0;if($(this).closest(".no-lightbox").length)return!1;if($(this).closest(".entry-similar").length&&!$(this).closest("#lightbox").length)return!0;var e=$(this).attr("href"),t=$(this).closest(".entry");if(!s.enabled)return!0;s.setTop(),s.pushState({link:e,view:"entry_group"}),$.publish("whi:content_update_started"),c.isClosed()&&c.open();var i=$.ajax(e,{success:function(i,n){if("success"==n||"notmodified"==n){var o=$(i),r=$(o.filter("#main-container").html()),s=o.filter("title").html();$("title").html(s),r.removeAttr("id");var a=t.data("external-click-track")||"";if(a.length){var l=r.find(".original-link, .hub-button, .entry-main-image .entry-holder > a");l.attr("href",a),l.attr("target","_blank")}c.loadContent(r)}else window.location.href=e}});return $.xhrPool.push(i),!1},R=function(){O(n)},H=function(e,t){var i=$(".entry[data-entry-id='"+t.entry+"']"),n=$(".js-add-to-collection[data-entry-id='"+t.entry+"']"),o=i.find(".js-collection-placeholder"),r=$(".js-entry-hover-actions[data-entry-id='"+t.entry+"']"),s=$(".js-entry-hover-collections-select[data-entry-id='"+t.entry+"']"),a=i.find(".js-heart-button");a.addClass("hearted"),a.find(".icon").addClass("icon-hearted"),r.hide(),s.show(),n.show(),o.show()},L=function(e,t){var i=$(".entry[data-entry-id='"+t.entry+"']"),n=$(".js-add-to-collection[data-entry-id='"+t.entry+"']"),o=i.find(".js-collection-placeholder"),r=$(".js-entry-hover-actions[data-entry-id='"+t.entry+"']"),s=$(".js-entry-hover-collections-select[data-entry-id='"+t.entry+"']"),a=i.find(".js-heart-button");a.removeClass("hearted"),a.find(".icon").removeClass("icon-hearted"),r.show(),s.hide(),n.hide(),o.hide()},M=function(e){e.preventDefault();var t=$(this).attr("data-entry-id"),i=$(".js-entry-hover-actions[data-entry-id='"+t+"']"),n=$(".js-entry-hover-collections-select[data-entry-id='"+t+"']");n.hide(),i.show()},W=function(){var e=$(this).attr("data-entry-id");return h.openCollectionsModal(e),!1},U=function(){a.trackGridAction("Action Button Tap - Partner CTA",$(this).closest(".entry"))},z=function(e,t){var i=null,n=$(".entry[data-entry-id='"+t.entry+"']"),r=o.where();r===o.LOCATION.entry_details&&(i="Entry Details"),r===o.LOCATION.dashboard&&(i="Home"),r===o.LOCATION.collection_details&&(i="Collection"),r===o.LOCATION.inspiration&&(i="Inspiration"),r===o.LOCATION.user_canvas&&(i="Canvas"),r===o.LOCATION.discover&&(i="Discover"),i&&a.trackGridAction("Heart - "+i,n)},B=function(e,t){var i=$(".entry[data-entry-id='"+t.entry+"']");a.trackGridAction("Unheart",i)};f.events=[[window,"click",".entry > a, .entry-preview > a",F],[window,"click",".entry_tabs .opening-tab a",p],[window,"change",".sets .js-selectfield",j],[window,"click",".sets.js-selectfield",b],[window,"click",".edit-set",b],[window,"keyup",".sets .textfield",A],[window,"click",".sets-window .close",w],[window,"click",".sets-picker .checkbox",k],[window,"mouseleave",".entry.show-sets",_],[window,"keyup",".new-set .textfield",S],[window,"heart",".grid-thumb .js-heart-button",g],[window,"unheart",".grid-thumb .js-heart-button",v],[window,"follow",".grid-thumb .js-follow-button",m],["subscribe","lightbox:closed",R],["subscribe","whi:shared",y],["subscribe","whi:hearted",H],["subscribe","whi:hearted",z],["subscribe","whi:unhearted",L],["subscribe","whi:unhearted",B],[window,"click",".view-info > a",q],[window,"click",".js-add-to-collection",W],[window,"click",".call-to-action",U],[window,"click",".js-hide-entry-hover-collections-select",M]]}}),this.require.define({"modules/views/catalog/vimeo_thumbs":function(e,t,i){var n=t("../../lib/view"),o=i.exports=new n;o.matchRoute=function(){return $(".vimeo-entry").length};var r=function(e,t){var i=e.attr("data-thumb-id"),n=e.is(".tiny")?"small":"medium";window[t]=function(e){if(e[0]){var o=e[0]["thumbnail_"+n];$("#"+i).attr("src",o),delete window[t]}}};o.init=function(){$(".vimeo-entry").each(function(){var e=$(this).attr("data-video-id"),t=$(this).attr("data-callback");r($(this),t);var i=document.createElement("script");i.type="text/javascript",i.src="//vimeo.com/api/v2/video/"+e+".json?callback="+t,document.body.appendChild(i)})},o.events=[]}}),this.require.define({"modules/views/click_out":function(e,t,i){"use strict";function n(){var e=$(".js-click-out");e.removeClass("js-click-out"),e.click(function(){if(this.href&&this.href.match(/^http/i)){var e=this.href;o.log("click out: "+e),$.post("/track/click_out",{url:this.href})}})}var o=t("../utils/logger"),r=t("../lib/view"),s=i.exports=new r;s.matchRoute=function(){return!0};var a=function(){n()},l=!0;s.init=function(){l&&(l=!1,n())},s.events=[["subscribe","whi:content_updated",a]]}}),this.require.define({"modules/views/dashboard/box_contacts":function(e,t,i){var n,o,r=t("../../lib/view"),s=t("../../lib/facebook"),a=t("../../lib/facebook_api"),l=i.exports=new r;l.matchRoute=function(){return $(".box-contacts").length},l.init=function(){s.load(function(){c($(".box-contacts.follow"))})};var c=function(e){var t=e.find(".grid-user");if(!e.attr("data-loaded")){e.attr("data-loaded",!0);var i=t.spin({lines:10,length:4,width:2,radius:5,speed:1.1}).find(".spinner");return a.authenticated()?void f("follow",function(n){if(i.remove(),n.trim().length){var o=$(n).filter(function(e,t){return $(t).is(".user-grid-item")}).slice(0,5);t.prepend(o),u(o)}else e.remove()}):$(this).remove()}},u=function(e){$(e).find("[data-facebook-id]").each(function(){var e=$(this).attr("data-facebook-id");$(this).attr("title",o[e].name)})},d=!1,h=[],f=function(e,t){var i=!1;return n?p(e,i,t):d?h.push(f.bind(null,e,t)):(d=!0,void a.api("/me/friends",function(r){if(!r||r.error)throw new Error(r.error.message||"Failed to get friends");n=[],o=r.data.reduce(function(e,t){return n.push(t.id),e[t.id]=t,e},{}),p(e,i,t),h.length&&h.forEach(function(e){e()})}))},p=function(e,t,i,o){var r=n;"object"==typeof o&&o.length&&(r=r.filter(function(e){return!~o.indexOf(e)})),r=r.sort(function(){return Math.round(2*Math.random())-1}),t&&(r=r.slice(0,t)),$.ajax({url:"/friends/"+e+"/avatars",type:"POST",data:{friend_ids:r},success:function(e){i(e)}})},m=function(){var e=$(this).is(".user-followed")?$(this).prev(".avatar"):$(this);e.is(".followed")?$.publish("whi:unfollow_user",{userId:e.attr("data-user-id")}):$.publish("whi:follow_user",{userId:e.attr("data-user-id")}),e.spin({lines:10,length:4,width:2,radius:5,speed:1.1})},g=function(e,t){var i=$('.follow-user[data-user-id="'+t.user+'"]');i.next(".user-followed").fadeIn(200),i.addClass("followed").find(".spinner").remove()},v=function(e,t){var i=$('.follow-user[data-user-id="'+t.user+'"]');i.next(".user-followed").fadeOut(200),i.removeClass("followed").find(".spinner").remove()},y=function(){return s.load(a.requestDialog),!1};l.events=[[window,"click",".follow-user.avatar,.user-followed",m],[window,"click","#invite_friends_button",y],["subscribe","whi:followed",g],["subscribe","whi:unfollowed",v]]}}),this.require.define({"modules/views/dashboard/userFilter":function(e,t,i){var n=t("../../lib/view"),o=i.exports=new n,r=function(e){var t=/[\w\s]/.test(String.fromCharCode(e.keyCode));if(t||8==e.keyCode){var i=new RegExp($(this).val().replace(/[^\w\s\d]/,""),"i");$(this).closest(".user-filter-list").find(".user").each(function(){var e=$(this).find(".user_name").html();i&&!i.test(e)?$(this).hide():$(this).show()})}};o.matchRoute=function(){return $(".user-filter-list").length},o.events=[[window,"keyup",".user-filter-list .searchfield",r]]}}),this.require.define({"modules/views/doubleclick_ads":function(e,t,i){"use strict";function n(e){var t=$(e).data("ad-size");if(null==t||""==t){var i=$(e).data("ad-unit"),n=i.match(/(\d+x\d+)/);n&&(t=n[1])}if(t&&t.match(/^(\d+x\d+ *)+$/)){for(var o=t.split(" "),r=0;r<o.length;r++){var s=o[r].split("x",2);o[r]=[parseInt(s[0]),parseInt(s[1])]}return o}return null}function o(e){return $(e).closest("[data-ad-placeholder-url]").data("ad-placeholder-url")}function r(){return window.location.search.indexOf("test_ads=1")>-1}function s(e){for(var t=e[0],i=t[0]*t[1],n=1;n<e.length;n++){var o=e[n][0],r=e[n][1],s=o*r;s>i&&(i=s,t=e[n])}var a=$(document.createElement("div"));return a.css("width",t[0]).css("height",t[1]).css("background-color","#CCC").css("box-sizing","border-box").css("padding","10px").css("opacity","0.9"),a.append("Advertisement: "+t[0]+"x"+t[1]),a}var a=t("../utils/logger"),l=t("../lib/view"),c=i.exports=new l,u=[136938636,138521796,138521916,138815796,139041876,139041996,139968036,138932076],d="3431";c.matchRoute=function(){return"googletag"in window?!0:!1};var h=97720036,f=function(){window.STR&&STR.Tag.boot()},p=function(){$(".js-doubleclick-ad:visible").each(function(e,t){t=$(t),t.removeClass("js-doubleclick-ad");var i=t.attr("id");i||(i="dfp-ad-"+(e+1)+"-"+Math.round(1e9*Math.random()),t.attr("id",i)),t.addClass("ad");var l=t.data("adUnit");if(l){var c=n(t);if(c){var u={},d=t.data();if(d){var f="adTargetingName";for(var p in d)if(p.substring(0,f.length)==f){var m=p.substring(f.length),g=d["adTargetingValue"+m];g&&(u[d[p]]=g)}}var v=o(t);if(r())t.append(s(c)),t.find(".ad-label").show();else{var y=t.children();if(y.length>0){t[0].adSlotContents=y;var b=t[0].getBoundingClientRect(),w=b.bottom-b.top;t.css("min-height",w+"px")}googletag.cmd.push(function(){a.log("Define DFP Slot on "+l+" "+i);var e=googletag.defineSlot("/"+h+"/"+l,c,i);v?(e.setCollapseEmptyDiv(!1),e.set("empty-url",v)):e.setCollapseEmptyDiv(!0),e.addService(googletag.pubads());for(var t in u)e.setTargeting(t,u[t]);googletag.display(i)})}}}})},m=function(){f(),y(function(){p()}),g()};window.renderAdPlaceholder=function(e){e=$(e);var t=o(e);t&&("collapse"==t?e.hide():$.ajax(t,{success:function(t){var i=$(document.createElement("div"));i.append(t);var n=$(i[0].firstChild);
e.hasClass("right")&&n.addClass("right"),n.attr("style",e.attr("style")),e.replaceWith(n),i.remove()}}))};var g=function(){setTimeout(function(){var e=[];$("[data-str-native-key]").each(function(t,i){e.push(i)}),$("[data-str-third-party-source]").each(function(t,i){e.push(i)});for(var t=0;t<e.length;t++){var i=e[t],n=$(i).hasClass(".ad")?i:$(i).closest(".ad")[0];$(i).removeAttr("data-str-native-key").removeAttr("data-str-third-party-source"),n&&null==i.firstChild&&(a.log("SFP: hide empty ad in slot "+n.id),window.renderAdPlaceholder(n))}},3e3)},v=function(e){var t=e.slot.getSlotElementId(),i=$(document.getElementById(t)),n=e.slot.getResponseInformation().lineItemId;if(a.log("DFP line item: "+n+" to slot "+t),i[0].adSlotContents){var o=i[0].adSlotContents;delete i[0].adSlotContents;for(var r=i.children(),s=!0,l=0;l<o.length;l++)if(o[l]!=r[l]){s=!1;break}s||i.prepend(o)}e.isEmpty?(a.log("DFP empty ad: "+t),window.renderAdPlaceholder(i)):(null==n||u.indexOf(n)<0)&&(a.log("DFP show ad label: "+t),i.find(".ad-label").show())},y=function(e){"undefined"!=typeof amznads&&amznads.getAdsCallback&&(!window.amznLoadTime||(new Date).getTime()-window.amznLoadTime>=3e4)?(window.amznLoadTime=(new Date).getTime(),amznads.getAdsCallback(d,function(){try{amznads.setTargetingForGPTAsync("amznslots"),a.log("Set targeting for amznslots: "+JSON.stringify(amznads.ads))}catch(t){a.log(t)}e()},2),googletag.pubads().clearTargeting("amznslots")):e()},b=function(){try{window.amznLoadTime=(new Date).getTime(),amznads.setTargetingForGPTAsync("amznslots"),a.log("Set targeting for amznslots: "+JSON.stringify(amznads.ads))}catch(e){a.log(e)}p()},w=!0;c.init=function(){w&&(w=!1,googletag.cmd.push(function(){googletag.pubads().enableAsyncRendering(),googletag.pubads().addEventListener("slotRenderEnded",v),googletag.enableServices()}),g(),"undefined"==typeof amznads||window.amznadsLoaded?b():$.subscribe("whi:amazon_ads_ready",b))},c.events=[["subscribe","whi:content_updated",m]]}}),this.require.define({"modules/views/dropdown":function(e,t,i){var n=t("../lib/view"),o=i.exports=new n;o.init=function(){},o.matchRoute=function(){return $(".tabs .dropdown-menu").length};var r=function(e){e.preventDefault(),$(this).parent().toggleClass("open")};o.events=[[window,"click",".tabs li:has(.dropdown-menu) .tab",r]]}}),this.require.define({"modules/views/dummy_ads":function(e,t,i){var n=t("../lib/view"),o=i.exports=new n;o.matchRoute=function(){return $(".dummy_ad").length},o.init=function(){$(".dummy_ad").show()};var r=function(){return $(this).parents("div.ad").hide(),!1};o.events=[[window,"click",".hide_ad",r]]}}),this.require.define({"modules/views/email_bounced":function(e,t,i){var n=t("../lib/view"),o=i.exports=new n;o.matchRoute=function(){return $(".js-bounce-warning").length};var r=function(){$.cookie("__hide_bounce_warning","1",{expires:2}),$(".js-bounce-warning").hide()},s=function(){"1"!==$.cookie("__hide_bounce_warning")&&$(".js-bounce-warning").slideDown()};o.init=function(){s()},o.events=[[".js-bounce-warning-close","click",r]]}}),this.require.define({"modules/views/entry/add_to_collection":function(e,t,i){var n=t("../../lib/view"),o=t("../../lib/routes"),r=t("../../lib/popup_message"),s=t("../../lib/tracking"),a=i.exports=new n;a.matchRoute=function(){return $(".entry-collection-button").length},a.init=function(){var e=$(".dropdown-collection .dropdown-menu").data("selected");if(e){e="string"==typeof e?e.split(","):[e];for(var t=0;t<e.length;t++)$(".dropdown-collection .dropdown-menu li[data-collection-id="+e[t]+"]").addClass("added")}$(".dropdown .entry-collection-button").bind("click",l),$(".dropdown .entry-more-button").bind("click",l),$(".dropdown .dropdown-menu-wrapper").bind("click",c),$(".dropdown-collection .collection").bind("click",f)};var l=function(e){$(this).parent().hasClass("active")||($(this).parent().toggleClass("active"),e.preventDefault())},c=function(e){return"ontouchstart"in document.documentElement?($(this).parent().removeClass("active"),void e.preventDefault()):!0},u=function(){$(".dropdown-collection").addClass("active"),s.trackGAEvent("Set","OpenCollectionSelector","EntryDropdownAuto")},d=function(){u(),$(".dropdown-collection").addClass("visible").addClass("active")},h=function(){$(".dropdown-collection").removeClass("visible")},f=function(e){var t=$(this),i=$(".entry-main").data("entryId"),n=t.data("collectionId");return t.hasClass("added")?m(i,n,t):p(i,n,t),e.preventDefault(),e.stopPropagation(),!1},p=function(e,t,i){$.post(o.set_path(e),{entry_set_id:t},void 0,"html").success(function(){i.addClass("added"),s.trackGAEvent("Set","Setted",e);var n=i.closest(".entry").data("trackingUrl"),o=i.closest(".entry").data("adsNativeSid");$.publish("whi:setted",{id:e,collection:t,adsNativeTrackingUrl:n,adsNativeSID:o})}).error(function(e){$("#notice").html(e.responseText).show()})},m=function(e,t,i){$.ajax({url:o.remove_from_set(t),data:{entry_id:e},type:"delete",method:"post",success:function(){i.removeClass("added"),s.trackGAEvent("Set","Setted",e)},error:function(e){$("#notice").html(e.responseText).show()}})},g=function(e){var t=$(this);if(13===e.keyCode){var i=$(this).data("username"),n=$(".entry-main").data("entryId");$.ajax({type:"post",url:o.create_entry_set_with_entry_path(i),data:{entry_id:n,entry_set:t.val(),cover:!0},success:function(e){$(".dropdown-menu .collection[data-collection-id="+$(e).data("collectionId")+"]").remove(),$(".dropdown-menu .new-collection").before($(e).addClass("added"));var i=$(".dropdown-item.collection.added"),n=i.closest(".entry").data("trackingUrl"),o=i.closest(".entry").data("adsNativeSid");$.publish("whi:ads_native:setted",{adsNativeTrackingUrl:n,adsNativeSID:o}),t.val("")},error:function(){t.val(""),r.alert("Network error","Please try again later")}})}else 27===e.keyCode&&t.val("")},v=function(){var e=$(this);return"ontouchstart"in document.documentElement?!0:(e.hasClass("dropdown-collection")&&s.trackGAEvent("Set","OpenCollectionSelector","EntryDropdown"),void $(this).addClass("active"))},y=function(){return"ontouchstart"in document.documentElement?!0:void $(this).removeClass("active")};a.events=[[".dropdown","mouseenter",v],[".dropdown","mouseleave",y],[".dropdown-collection","keydown",".new-collection-name",g],[".entry-main","heart",d],[".entry-main","unheart",h]]}}),this.require.define({"modules/views/entry/box_tagged_with":function(e,t,i){var n=t("../../lib/view"),o=t("../../lib/tracking"),r=i.exports=new n;r.matchRoute=function(){return $("#add_tag_form,.tag-list").length};var s,a=function(){var e=s=$(this).closest(".form"),t=e.find(".add-tag-name"),i=$(this);if(i.is(".expanded")){var n=$("#add_tag_notice");return $(".error").slideUp(),t.val()===t.attr("data-default-value")||""===t.val()?(n.slideDown(100),t.focus(),!1):(n.hide(),t.animate({width:0},function(){t.hide().removeAttr("style").removeClass("expanded"),i.removeClass("expanded").val(t.attr("data-add-tag-text"))}),e.on("ajax:before",l.start).on("ajax:success",l.success).on("ajax:error",l.error).on("ajax:complete",l.complete),!0)}$(this).add(t).addClass("expanded");var o=t.show().width();return t.css("width",0).animate({width:o}),i.val(t.attr("data-add-text")),t.focus(),!1},l={start:function(){s.find(".add_tag_submit").attr("disabled","disabled")},success:function(e,t){var i=s.closest(".entry-tags").find(".tag-list"),n=s.closest(".entry-tags").find(".msgempty");n.hide(),i.html(t);var r=i.attr("data-id");o.trackGAEvent("Tag","Tagged",r)},error:function(e,t){t&&t.responseText&&$(".error").text(t.responseText).slideDown()},complete:function(){s.find(".add-tag-name").attr("value",""),s.find(".add_tag_submit").removeAttr("disabled")}},c=/untag-e(\d+)-t(\d+)/,u=function(){var e,t=$(this).attr("id"),i=t.match(c),n=$(this).attr("data-delete-url"),r=$(this).attr("data-list-id");i&&(e=i[1]),$.post(n,{_method:"delete"},void 0,"html").success(function(t){$("#"+r).html(t),o.trackGAEvent("Tag","Untagged",e)})};r.events=[["body","click",".add_tag_submit",a],["body","click",".remove_tag",u]]}}),this.require.define({"modules/views/entry/create_entry_set":function(e,t,i){var n=t("../../lib/view"),o=(t("../../lib/tracking"),i.exports=new n);o.matchRoute=function(){return $(".js-new-set").length||$("#create-new-set-container").length||$(".js-edit-set").length},o.init=function(){"#create"==window.location.hash&&($("#create-new-set-container").hide(),$("#create-new-set-form").show(),$("#set-name").focus())};var r,s=function(e){e.preventDefault();var t=$(this).closest(".set");$(this).is(".js-edit-set")&&(t=$(this).closest(".set-header")),t.addClass("form-mode").find(".textfield").focus(),$(".delete_set").addClass("showing"),$("textarea.set-description").show(),$("h2.set-description").hide(),r=$("textarea.set-description").val()},a=function(e){e&&e.preventDefault();var t=$(this).closest(".set");$(this).closest(".set-header").length&&(t=$(this).closest(".set-header")),t.removeClass("form-mode"),$(".delete_set").removeClass("showing"),$("textarea.set-description").hide(),$("h2.set-description").text()&&$("h2.set-description").show()},l=function(){$("#create-new-set-container").toggle(),$("#create-new-set-form").toggle(),$("#set-name").focus()},c=function(){$("form input.description").val($("textarea.set-description").val()),$(this).find(".loader").show(),$(this).find(".set-save, .set-cancel").hide(),setTimeout(function(){$(this).find(".textfield").attr("disabled","disabled")})},u=function(){a.call(this)},d=function(e,t){if($(this).is("#new_entry_set")&&t.html)$(this).find(".textfield").val(""),$(this).closest(".set-container").after(t.html),a.call(this),$.publish("trackGAEvent",["Set","NewCollectionSet",""]),$.publish("trackEvent",["click",{widget:"Set",action:"NewCollectionSet",label:""}]);else if(t.redirect)window.location=t.redirect;else if(1==t.success){var i=$(this).find(".textfield").val();if($(this).closest(".set-container,.set-header").find(".title-text").text(i),$("textarea.set-description").length){var n=$("textarea.set-description").val(),o=$("h2.set-description");o.text(n),o.html(o.html().replace(/[\n|$]/g,"<br>"))}if(a.call(this),r===n)return;"true"===o.attr("data-new-description")?($.publish("trackGAEvent",["Set","UpdateCollectionDescription","New"]),$.publish("trackEvent",["click",{widget:"Set",action:"UpdateCollectionDescription",label:"New"}])):($.publish("trackGAEvent",["Set","UpdateCollectionDescription","Edited"]),$.publish("trackEvent",["click",{widget:"Set",action:"UpdateCollectionDescription",label:"Edited"}]))}else 0==t.success&&alert(t.message)},h=function(){$(this).find(".loader").hide(),$(this).find(".set-save, .set-cancel").show(),$(this).find(".textfield").removeAttr("disabled")};o.events=[["body","click","#create-new-set-button",l],[".set-container,.set-header","ajax:before",".set-form",c],[".set-container,.set-header","ajax:error",".set-form",u],[".set-container,.set-header","ajax:success",".set-form",d],[".set-container,.set-header","ajax:complete",".set-form",h],["body","click",".js-new-set,.js-edit-set",s],["body","click",".set-cancel",a],["body","click",".set-form-open",s]]}}),this.require.define({"modules/views/entry/entry":function(e,t,i){var n=t("../../lib/view"),o=t("../../utils/utils"),r=t("../../utils/storage"),s=t("../../lib/tracking"),a=t("../../lib/tracking/data_layer"),l=t("../../lib/whi_history"),c=t("../../lib/start_hearting_prompt"),u=t("../../lib/routes"),d=t("../../lib/lightbox"),h=i.exports=new n;h.matchRoute=function(){return $(".entry-container").length},h.init=function(){var e=$(".entry-container");C(e),c.displayPrompt();var t=window.location.hash.match(/#share-(\w+)-options-(\d+)/i);t&&("email"==t[1]?inlineShareEmail(t[2]):"code"==t[1]&&inlineEmbedCode(t[2])),x(),e.attr("data-open-via")&&$(".js-view-users"+e.data("open-via")).click(),e.find(".video-entry")&&gt()};var f,p,m,g,v,y,b,w,_,x=function(){var e=$(".entry-main"),t=e.data("entry-id");if(a.entryImpression(e),vt(e),$(".js-shop-button").length&&s.trackGAEvent("ShopButton","view",t),e.data("promoted")&&s.promotedEntryAction(t,"detail_view"),$(".js-action-button").each(function(e){s.trackGAEvent("EntryAction","view",$(e).data("action-label"),t)}),$(".entry-similar .loader").length>0){var i=u.similar_entries_path(t);$.get(i,function(e){$(".entry-similar .loader").replaceWith($(e)),$.publish("whi:tags_loaded",".entry-similar")})}if($("#lightbox").is(":visible")){var n=$(".entry[data-entry-id='"+t+"']");e.data("next-entry",n.next().data("entry-id")),e.data("prev-entry",n.prev().data("entry-id")),$("#lightbox").scrollTop(0)}$(".heart-button").data("entry-id")&&(r.add("seen_entries",$(".heart-button").data("entry-id")),r.get("seen_entries").length>200&&r.shift("seen_entries")),$(".page-footer").hide(),l.currentState||l.replaceState({link:window.location.href.replace(/#.+/,""),view:"entry"})},k=function(e){var t=$(".entry a[href='"+e+"']").closest(".entry");if(0==t.length){var i=/entry\/(\d+)\//gi,n=i.exec(e);if(null!==n){var o=n[1];t=$(".entry[data-entry-id='"+o+"']")}else console.error("Something is wrong with the link",e)}var r=t.next().data("entry-id"),s=t.prev().data("entry-id"),a=t.data("context-user-id"),l={next:r,prev:s};if(""!==a&&(l.context_user=a),1==t.data("accountless-ad")&&(l.promoted=!0,l.brand=t.data("uploader-username"),l.img=t.data("uploader-img")),t.data("click-track")){var c=t.closest(".promoted-wrapper");s=c.prev(".entry").data("entry-id"),r=c.next(".entry").data("entry-id")}return l},C=function(e){$("title").html(e.find(".page_title").html()),$(".entry-peek .entry-holder").each(function(){if(0==$(this).children().length?$(this).closest(".entry-peek").children().hide():$(this).parent().is(":hidden")&&$(this).closest(".entry-peek").children().show(),$(this).closest(".entry-peek").is(".animated")){var e=$(this).find(".full-size");e.hide();var t=function(){e.show();var t={width:e.width(),height:e.height()};if(o.canvasSupported())try{var i=e.parent().append("<canvas></canvas>");i.find("canvas").attr(t)[0].getContext("2d").drawImage(e[0],0,0,t.width,t.height),e.remove()}catch(n){}else{var r=$(this).closest(".entry-peek").attr("data-thumbnail");e.css(t).attr("src",r)}};0===e.width()?e.on("load",t):t()}}),S(),X()},j=!1,S=function(){f={left:{usedKey:!1,loading:!1,loaded:!1,res:!1},right:{usedKey:!1,loading:!1,loaded:!1,res:!1}}},T=function(e,t,i){if(void 0!=t&&null!=t&&""!=t){if(t=t.replace(/^https?:/i,""),i=i||function(){},f[e].loaded)return f[e].usedKey=!1,void i(f[e].res);if(f[e].loading)return void(f[e].callback=i);f[e].loading=!0;var n=k(t),o=$.ajax(t,{data:n,success:function(t,n){f[e].res="success"==n||"notmodified"==n?t:!1,f[e].loaded=!0,f[e].loading=!1,f[e].usedKey=!1,f[e].callback&&f[e].callback(f[e].res),i(f[e].res),f[e].usedKey=!1}});$.xhrPool.push(o)}},A=function(e,t,i){if(!j){var n=e.link,o=e.direction;$(".peek-loader."+o).addClass("loading"),j=!0,T(o,n,function(e){$(".peek-loader."+o).removeClass("loading"),e?($.xhrPool.abortAll(),P(e,function(){s.trackPageView(n),i&&i()})):window.location.href=n}),j=!1}},I=function(e){e.preventDefault();var t=$(".entry-main-image"),i=t.find(".heart-button");return 0==i.length?!1:(0==i.closest(".entry-hover").css("opacity")&&t.addClass("showing"),void i.trigger("click"))},E=800,P=function(e,t,i){var n=($(e).filter("title").html(),$(e).filter("script[data-ajaxscript]"),$(e).filter("#main-container"));if(i=i||0,j&&E/10>i)return void setTimeout(function(){P(e,t,i+1)},10);var o=$("#lightbox .entry-container");0==o.length&&(o=$(".entry-container")),n.find(".entry-bottom-section, .entry-main-below").hide(),n.find(".js-entry-fade-in").hide(),o.parent().html(n.html()),setTimeout(function(){$(".js-entry-fade-in").fadeIn(400).css("display",""),$(".entry-bottom-section, .entry-main-below").fadeIn(400),$("#lightbox").scrollTop=0,"function"==typeof t&&t(),$.publish("whi:content_updated",{url:location.href,name:"entry_page"})},100)},N=function(e,t,i){return l.enabled?(l.pushState(e),A(e,t,i),!1):window.location=e.link},D=function(e,t){if("entry_group"!==l.currentState.view&&("entry"!==l.view||"entry_group"!==l.previousState.view)){var i=[],n=t.link.match(/\/entry\/(\d+)/);!n&&$(".entry-container").closest("#lightbox").length>0?(d.close(),l.returnToTop()):n&&(i=$('[data-entry-id="'+n[1]+'"]'),i.is(".entry-peek")?(t.direction=i.filter(".entry-peek").is(".entry-left-image")?"left":"right",A(t)):i.is(".entry")&&i.filter(".entry").find("a").first().trigger("click"))}},O=function(){var e=$("#report-form").hide().clone();$("body").append(e.addClass("__current_report_form").show())},F=function(){$(".__current_report_form").remove()},q=function(){$(".__current_report_form").find("#actual-report-form").show(),$(this).hide()},R=function(){var e=$(this).find("#report_reason option:selected").text();s.trackGAEvent("ReportImage","SubmittedReport",e)},H=function(){$(".entry-main-image").toggleClass("showing")},L=function(){var e=$(this),t=e.attr("href");if(void 0==t)return whi.lightbox.close(),!1;var i=e.is(".entry-left-image")?"left":"right",n={link:t,direction:i,view:"entry"};return s.trackGAEvent("DiscoverImages","WingImage"),N(n)},M={37:function(){f.left.usedKey||(f.left.usedKey=!0,r.store("used_keys",!0),$(".entry-left-image a").trigger("click"))},39:function(){f.right.usedKey||(f.right.usedKey=!0,r.store("used_keys",!0),$(".entry-right-image a").trigger("click"))},32:I,72:I},W=function(e){var t=$(".floating-window:visible").length;if(!$(e.target).is("input,textarea")&&!t&&!j){var i=M[e.keyCode||e.which];i&&(e.preventDefault(),i.apply(this,arguments))}},U=function(e){return j||M[e.keyCode?e.keyCode:e.which]?!1:void 0},z=$(window),B=function(){z.width()>800?$(".entry-main-top-content").slideUp(200):$(".entry-main-top-content").slideDown(200),p=!1},G=function(){p||(p=!0,requestAnimationFrame(B))},X=function(){"ontouchstart"in document.documentElement||window.navigator.msMaxTouchPoints?$(".non-mobile").removeClass("non-mobile"):$(".entry-container").addClass("non-mobile"),_=0},V=function(e){return{x:e.originalEvent.touches[0].pageX,y:e.originalEvent.touches[0].pageY}},Q=function(e){b=$(".entry-wrapper"),w=b.position(),m=!0,v=g=V(e),e&&$(e.target).is("img")&&$(e.target).closest(".entry-main").length&&_++},Y=function(e){if(y=!1,m){var t=V(e);_=0,v=t}},J=function(e){y||(y=!0,requestAnimationFrame(function(){Y(e)}))},Z=function(){if(m){m=!1;var e=v.x-g.x,t=Math.abs(v.y-g.y),i=0>e?"left":"right",n="left"==i?"right":"left";e=Math.abs(e);var o=!!$(".entry-"+n+"-image img").length;if(5>e&&5>t&&setTimeout(function(){1==_&&H(),2==_&&$(".entry-main-top-content .heart-button").trigger("click"),_=0},250),e>60&&o){var r=$(".entry-"+n+"-image").find("a").eq(0).attr("href"),s={link:r,direction:n,offset:w,view:"entry"};b.animate({left:("left"==i?"-=":"+=")+b.width()+"px"},200,function(){b.hide(),$(".entry-peek").removeAttr("style"),N(s,!0)})}m=!1}},K=function(e,t){if(e.preventDefault(),t&&t.entry){var i=$('.entry-main[data-entry-id="'+t.entry+'"] .js-heart-button');if(!i.length||i.is(".hearted"))return}$(".entry-main").addClass("hearted"),ut()},et=function(){$(".entry-main").removeClass("hearted"),ut()},tt=0,it=!1,nt=$("#lightbox"),ot=function(){it=!1,nt.scrollTop(nt.scrollTop()-tt)},rt=function(e){tt=e.originalEvent.wheelDelta||30*-e.originalEvent.detail,it||(requestAnimationFrame(ot),it=!0)},st=function(){s.trackGAEvent("More From",$(this).attr("href"),window.location.pathname)},at=function(e){$(".users-window").fadeOut(),e.preventDefault()},lt=function(e){var t=$(this),i=t.attr("href");$.ajax({url:i}).done(function(e){t.replaceWith(e)}),e.preventDefault()},ct=function(e,t){$.ajax({url:"/entry/"+t.id+"/add-to-set-link",type:"GET",success:function(e){$(".entry-add-to-set").show(),$("#add-to-set-link").replaceWith(e)}})},ut=function(){$(".tag_form_wrapper").toggleClass("active")},dt=function(){$(this).parent().remove()},ht=function(){var e=$(this).closest(".entry");e.data("trackingUrl")&&$.publish("whi:ads_native:track",{name:"shop_button",trackingUrl:e.data("trackingUrl"),sessionId:e.data("adsNativeSid")}),s.trackGAEvent("ShopButton","click",e.data("entry-id"))},ft=function(e){$(this).hasClass("youtube-subscribe")||(yt("Action Button Tap - Action Button",$(this).closest(".entry")),e.stopPropagation())},pt=function(){yt("YouTube Subscribe",$(this).closest(".entry"))},mt=function(){yt("Action Button Tap - View Source",$(this).closest(".entry"))},gt=function(){if("undefined"==typeof YT){var e=document.createElement("script");e.src="//www.youtube.com/iframe_api";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t);var i=null;window.onYouTubeIframeAPIReady=function(){i=new YT.Player("youtube-player",{events:{onStateChange:n}})};var n=function(e){e.data==YT.PlayerState.PLAYING&&yt("Video Play - Entry Details",$(".entry.entry-main"))}}},vt=function(e){yt("View Entry Details",e)},yt=function(e,t){var i=[];i.push("User: "+t.data("uploader-username")),i.push("Entry: "+t.data("entry-id")),t.data("actionable")===!0&&i.push("actionable"),t.data("promoted")===!0&&i.push(t.data("paid")?"promoted":"organic"),s.trackGAEvent("Heart Actions",e,i.join(" "),1)},bt=function(e,t){var i=$(".entry-main");$(t.html).data("username")===i.data("uploader-username")&&yt("Follow",i)};h.events=[[".entry-container","click",".entry-peek",L],[".entry-container","touchstart",Q],[".entry-container","touchmove",J],[".entry-container","touchend",Z],[".entry-main","heart",K],[".entry-main","unheart",et],[".entry-main .js-shop-button","click",ht],[".entry-main .js-action-button.youtube-subscribe","click",pt],[".entry-main .js-action-button","click",ft],[".entry-holder > a","click",mt],[".entry-main .upload-link","click",mt],[".entry-container","click",".hub-button",st],["#lightbox","mousewheel DOMMouseScroll",".entry-peek",rt],[window,"keydown",W],[window,"keyup",U],[window,"click","#report-button",O],[window,"click","#report-form-cancel",F],[window,"click","#report-form .close, #report-form .closex",F],[window,"click",".report-confirm",q],[window,"submit","#report_form",R],[window,"resize",G],["subscribe","whiHistory:pop",D],["subscribe","whi:hearted",K],["subscribe","whi:setted",ct],["subscribe","whi:unsetted",ct],[window,"click",".similar_x",dt],[window,"click",".users-window .close",at],[window,"click",".js-users-window-load-more",lt],["subscribe","whi:followed",bt]]}}),this.require.define({"modules/views/entry/entry_ftue":function(e,t,i){var n,o=t("../../lib/view"),r=t("../../utils/anonymous_session")(),s=(t("../../utils/utils"),t("../../lib/tracking")),a=i.exports=new o({min_page_views:0,reset_days:10,max_shows:5});a.times_shown=function(){var e=parseInt($.cookie("showed_entry_ftue"),10);return isNaN(e)&&(e=0),e},a.eligible=function(){try{return!n&&"yes"!=$.cookie("auth")&&"yes"!=$.cookie("has_account")&&this.times_shown()<this.max_shows&&r.current_pageviews()>=this.min_page_views&&$(".entry-container").length}catch(e){return!1}},a.matchRoute=function(){return this.eligible()},a.init=function(){n=!0,$.cookie("showed_entry_ftue",this.times_shown()+1,{expires:this.reset_days}),$(".entry-container").addClass("ftue-showing").on("click",".entry-peek",function(){$(".entry-ftue").animate({left:"-=1000"},150)}).on("click",".entry-ftue .primay.button",function(){s.trackGAEvent("EntryFTUE","Clicked")}).find(".entry-left-image").hide()}}}),this.require.define({"modules/views/entry/entry_group":function(e,t,i){var n=t("../../lib/view"),o=t("../../lib/whi_history"),r=t("../../lib/popup_message"),s=i.exports=new n,a=null;s.matchRoute=function(){return $(".entry-sidebar").length},s.init=function(){};var l=function(e){e.preventDefault();var t=$(this).attr("href"),i=p();i.forEach(d),c(t,function(e){e&&(i.forEach(u(e)),$.publish("whi:content_updated",{url:t,name:"entry_group"})),i.forEach(h),$(".entry-peek").fadeOut(400),o.pushState({link:t,view:"entry_group"})})},c=function(e,t){a?t(a):$.ajax({url:e,success:function(e){a=$(".entry-content").html(),t(e)},error:function(){r.alert("Connection error","Please try again in a few minutes"),t()}})},u=function(e){return function(t){var i=$(e).find(t.selector);i.children().css("opacity",0),t.html(i.html())}},d=function(e){e.addClass("ajax").children().animate({opacity:0},200)},h=function(e){e.removeClass("ajax").children().animate({opacity:1},200)},f=function(e,t){if("entry_group"===t.view){var i=p();i.forEach(d),c(t.link,function(e){e&&(i.forEach(u(e)),$.publish("whi:content_updated",{url:location.href,name:"entry_group"})),i.forEach(h),$(".entry-peek").fadeOut(400)})}else if("entry"===t.view&&"entry_group"===o.previousState.view){var i=p();i.forEach(d),c(t.link,function(e){e&&(i.forEach(u(e)),$.publish("whi:content_updated",{url:location.href,name:"entry_page"})),i.forEach(h),$(".entry-peek").fadeIn(400)})}a=null},p=function(){return[$(".entry-main .entry-sidebar"),$(".entry-main-content"),$(".entry-timeline")]};s.events=[[".more-section a","click",l],["subscribe","whiHistory:pop",f]]}}),this.require.define({"modules/views/entry/report_button":function(e,t,i){var n=t("../../lib/view"),o=t("../../lib/tracking"),r=i.exports=new n;r.matchRoute=function(){return $("#report-button").length},r.init=function(){};var s=function(){o.trackGAEvent("ReportImage","ClickedReportImage"),$("#report-form").slideToggle(200)};r.events=[["#report-button","click",s]]}}),this.require.define({"modules/views/entry/share_buttons":function(e,t,i){var n=t("../../lib/config"),o=t("../../lib/view"),r=t("../../lib/tracking"),s=(t("../../lib/tracking/data_layer"),t("../../lib/routes")),a=t("../../utils/utils"),l=t("../modal"),c=i.exports=new o;c.matchRoute=function(){var e=this.events.some(function(e){return"subscribe"==e?!1:$(e[0]).length});return e||u()};var u=function(){return window.location.hash.match(/#(facebook|twitter|tumblr|email)-(\w+)-(\d+)/i)},d=function(){var e=$(this),t=e.attr("data-type"),i=e.attr("data-item-id"),o=e.attr("data-username"),c=e.attr("data-message"),u=e.attr("data-postcard-message"),d=n.user_authenticated?"share_modal":"share_modal_basic",h=s[d];return l.loading(!0),$.ajax(h(),{type:"post",data:{id:i,type:t,username:o,message:decodeURIComponent(c),postcard_message:u},success:function(t){l.load(t);var n=e.closest(".entry").data("trackingUrl"),o=e.closest(".entry").data("adsNativeSid");$.publish("whi:sharing_dialog",{entryId:i,adsNativeTrackingUrl:n,adsNativeSID:o}),$.publish("whi:content_updated")},error:a.defaultAjaxErrorCallback}),1==$(this).data("promoted")&&"entry"==t&&r.promotedEntryAction(item_id,service+"_share"),!1};c.events=[[window,"click",".js-share-button",d]]}}),this.require.define({"modules/views/entry/youtube_autoplay":function(e,t,i){var n=t("../../lib/view"),o=i.exports=new n;o.matchRoute=function(){return!1},o.init=function(){},addYouTubeAPI=function(){var e=document.createElement("script");e.src="https://www.youtube.com/iframe_api";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)},o.events=[]}}),this.require.define({"modules/views/facebook_widget":function(e,t,i){var n=t("../lib/view"),o=(t("../lib/config"),t("../lib/facebook")),r=i.exports=new n;r.matchRoute=function(){return $(".fb-like").length},r.init=function(){o.load(s)};var s=function(){FB.Event.subscribe("edge.create",function(e){$.publish("trackSocial",["facebook","like",e])}),FB.Event.subscribe("edge.remove",function(e){$.publish("trackSocial",["facebook","unlike",e])})}}}),this.require.define({"modules/views/facepile_box":function(e,t,i){var n=t("../lib/view"),o=t("../lib/facebook"),r=t("../utils/logger"),s=i.exports=new n;s.matchRoute=function(){return $("#fb_facepile").length},s.init=function(){o.load(a)};var a=function(){FB.getLoginStatus(function(e){r.log("response:",e),"connected"===e.status||"not_authorized"===e.status?$("#fb_friends").show():$("#testimonials").show()})}}}),this.require.define({"modules/views/file_preview":function(e,t,i){"use strict";var n=t("../lib/view"),o=i.exports=new n;o.matchRoute=function(){return $(".js-file-preview-input").length};var r=function(e){var t=$(".js-file-preview-target");t.attr("src",URL.createObjectURL(e.target.files[0]))};o.events=[[".js-file-preview-input","change",r]]}}),this.require.define({"modules/views/floating_window":function(e,t,i){var n=t("../lib/view"),o=i.exports=new n;o.matchRoute=function(){return!0};var r=function(){var e=$(this).closest(".floating-window,.start_hearting_popup");e.length||(e=$(".floating-window,.start_hearting_popup")),e.length&&(e.fadeOut(200),$.publish("whi:floating_window_closed",{window:e}))},s=function(e){var t=$(".floating-window,.start_hearting_popup");27!==e.keyCode||t.is("hidden")||(t.fadeOut(200),$.publish("whi:floating_window_closed",{window:t}))};o.events=[["body","click",".overlay, #close, .close, .closex",r],["subscribe","whi:close_floating_windows",r],[window,"keydown",s]]}}),this.require.define({"modules/views/follow_button":function(e,t,i){"use strict";var n=t("../lib/view"),o=t("../lib/routes"),r=t("../utils/utils"),s=t("../lib/tracking"),a=t("../lib/lightbox"),l=t("../lib/tracking/data_layer"),c=i.exports=new n;c.matchRoute=function(){return!0};var u,d=function(){var e=$(this),t=e.attr("data-user-id");console.log("toggling",t,e.is(":checked")?"FOLLOW":"UNFOLLOW"),e.is(":checked")?j({userId:t,button:e}):k("unfollow",e,t,o.follows_path(),{resource:{id:t,type:"user"},_method:"delete"})},h=function(){if(!($(".grid-dashboard").length>0)){var e=$(this);e.addClass("ajax disabled");var t=e.attr("data-user-id");return j({userId:t,button:e}),!1}},f=function(){if(!($(".grid-dashboard").length>0)){var e=$(this),t=e.attr("data-user-id"),i=$("#follow-button-dialog");return 0===i.length?k("unfollow",e,t,o.follows_path(),{resource:{id:t,type:"user"},_method:"delete"}):T(t,e.attr("data-name"),e.attr("data-username"),e.attr("data-collection-count"),i),!1}},p=function(){var e=$(this),t=$(this).closest(".entry").attr("data-entry-id"),i=e.attr("data-user-id"),n=e.attr("data-name"),o=e.attr("data-username");if(e.attr("data-user-private")){P("#follow-button-dialog");var r=$("#lightbox .modal-heavy.unfollow .follow-user");return r.show(),r.text(e.text()),r.click(m(i)),$("#lightbox .modal-heavy.unfollow .unfollow-user").hide(),$("#lightbox .modal-heavy.unfollow .unfollow-collection").hide(),!1}return e.addClass("ajax disabled"),$.ajax({url:"/entry/"+t+"/"+o+"/collections",dataType:"json",success:function(t){var r,s,a,l,c=null!==t.collection_filter;l=$("#follow-button-dialog"),l.attr("data-user-id",i),l.attr("data-name",n),l.attr("data-username",o),P("#follow-button-dialog"),r=$("#lightbox .modal-heavy.unfollow .unfollow-collection"),s=$("#lightbox .modal-heavy.unfollow .follow-user"),a=$("#lightbox .modal-heavy.unfollow .unfollow-user"),c?(0===t.collection_filter?(s.hide(),a.show()):-1===t.collection_filter?(s.hide(),a.show()):1===t.collection_filter&&(s.show(),a.hide(),s.click(m(i))),I(r,t.collections,t.description)):(s.show(),s.click(m(i)),a.hide(),r.hide()),e.removeClass("ajax disabled")}}),!1},m=function(e){return function(){var t=$(this);return t.addClass("ajax disabled"),j(event,{userId:e,button:t},function(){D(),t.removeClass("ajax disabled")}),!1}},g=function(){var e=$("#lightbox  #follow-button-dialog"),t=e.attr("data-user-id"),i=$(".js-unfollow-button[data-user-id="+t+"]");return A("user",e.attr("data-name"),e.attr("data-username")),$("#lightbox .modal-heavy.confirm .confirm").click(function(){return $(this).addClass("ajax disabled"),k("unfollow",i,t,o.follows_path(),{resource:{id:t,type:"user"},_method:"delete"},function(){$(".grid-dashboard").length?($(this).removeClass("ajax disabled"),E($(".js-follow-button[data-user-id="+t+"]").first().prev().find(".user-name").text())):D()}),!1}),!1},v=function(e){var t=$("#follow-button-dialog");return $("#lightbox .unfollow-all-collections").hide(),A("collection",t.attr("data-name"),t.attr("data-username"),e[0].name),$("#lightbox .modal-heavy.confirm .confirm").click(function(){return b($(this),e),!1}),!1},y=function(e,t){var i=$("#follow-button-dialog"),n=$("#lightbox .modal-heavy.collections");return n.find(".description").html(t),e.forEach(function(e){var t=$('<a class="button" href="/follows?resource[id]='+e.id+'&resource[type]=collection">'+e.name+"</a>");t.click(function(){return A("collection",i.attr("data-name"),i.attr("data-username"),e.name),$("#lightbox .modal-heavy.confirm .confirm").click(function(){return b($(this),[e]),!1}),!1}),n.find(".unfollow-all-collections").before(t)}),$("#lightbox .unfollow-all-collections").click(function(){return A("collections",i.attr("data-name"),i.attr("data-username")),$("#lightbox .modal-heavy.confirm .confirm").click(function(){return b($(this),e),!1}),!1}),N("collections"),!1},b=function(e,t){e.addClass("ajax disabled");var i=function(e){return $.ajax({url:o.follows_path(),type:"delete",data:{resource:{id:e.id,type:"collection"}}})};return $.when.apply($,t.map(i)).then(function(){e.closest("#follow-button-dialog").attr("data-user-id");
e.removeClass("ajax disabled"),E(t.map(function(e){return e.name}).join("<br>")),t.forEach(function(){s.trackGAEvent("Follow","Unfollow Collection",s.where())})},function(){r.defaultAjaxErrorCallback}),!1},w=function(){return D(),!1},_=function(){return D(),setTimeout(function(){$(".modal-heavy.refresh").hide()},500),!1},x=function(){{var e=$(this),t=e.attr("data-user-id");e.attr("data-username")}return $.publish("whi:anonymous_follow",{done:o.currentUrl(),action:{type:"follow",userId:t}}),!1},k=function(e,t,i,n,o,s){var a=null,l=null,c=null;if(t){var u=$(t.closest(".entry")),d=t.attr("data-username"),h=u.data("uploaderUsername");if("follow"==e&&d==h&&u.data("trackingUrl"))var a=u.data("trackingUrl"),l=u.data("adsNativeSid");c=u.data("entryId"),t.addClass("ajax").attr("disabled","disabled")}$.ajax({url:n,type:"post",data:o,success:C.bind(null,e,t,i,c,a,l),error:r.defaultAjaxErrorCallback,complete:function(){t&&t.removeClass("ajax").removeAttr("disabled"),s&&s()}})},C=function(e,t,i,n,o,r,a){t&&t.trigger(e,[i]);var c=$('.follow-toggle[data-user-id="'+i+'"]');"follow"==e?(c.attr("checked","checked"),l.followUser(t)):c.removeAttr("checked"),$.publish("whi:"+e+"ed",{user:i,html:a,entryId:n,adsNativeTrackingUrl:o,adsNativeSID:r}),s.trackGAEvent("Follow","follow"===e?"Follow":"Unfollow",s.where()),"follow"==e&&0==$(".user-list .js-follow-button").length?$("#follow_all").hide():$("#follow_all").show()},j=function(e,t,i){return t&&t.userId||(t=e),t.userId?void k("follow",t.button,t.userId,o.follows_path(),{resource:{id:t.userId,type:"user"}},i):console.error("triggered follow, but no user was passed.")},S=function(e,t){return t&&t.userId||(t=e),t.userId?void k("unfollow",t.button,t.userId,o.follows_path(),{resource:{id:t.userId,type:"user"},_method:"delete"}):console.error("triggered follow, but no user was passed.")},T=function(e,t,i,n,r){r.attr("data-user-id",e),r.attr("data-name",t),r.attr("data-username",i),r.attr("data-collection-count",n);var s=$("#follow-button-dialog .unfollow-collection");s.css("display","none"),n>0&&(s.attr("href",o.user_collections(i)),s.css("display","block")),P("#follow-button-dialog")},A=function(e,t,i,n){var o,r,s;N("confirm"),o=$("#lightbox .modal-heavy.confirm"),o.find(".title").hide(),o.find(".description").hide(),s=o.find(".description-"+e),r=o.find(".title-"+e),r.show(),s.show(),s.find(".name").text(t),s.find(".username").text(i),s.find(".collection-name").text(n)},I=function(e,t,i){0===t.length?e.hide():e.click(1===t.length?function(){return v(t,i)}:function(){return y(t,i)})},E=function(e){$("#lightbox .modal-heavy.refresh .description .name").html(e),N("refresh")},P=function(e){a.isOpen()&&(u=$("#lightbox").contents().clone()),a.loadContent($(e).clone()),a.open()},N=function(e){$("#lightbox .modal-heavy").hide(),$("#lightbox .modal-heavy."+e).fadeIn()},D=function(){u?a.loadContent(u):a.close()},O=function(e,t){$(".js-follow-button[data-user-id='"+t.user+"']").each(function(e,i){var n=$(i).attr("class").replace(/(js-follow-button|text-primary|text-gray)/g,""),o=$(t.html).removeClass();$(i).replaceWith(o.addClass("js-unfollow-button text-gray "+n))})},F=function(e,t){$(".js-unfollow-button[data-user-id='"+t.user+"']").each(function(e,i){var n=$(i).attr("class").replace(/(js-unfollow-button|text-primary|text-gray)/g,""),o=$(t.html).removeClass();$(i).replaceWith(o.addClass("js-follow-button text-primary "+n))})};c.events=[[window,"click",".js-follow-button.anonymous",x],[window,"click",".js-follow-button:not(.anonymous)",h],[window,"click",".js-unfollow-button",f],[window,"click",".grid-dashboard .follow-button",p],[window,"change",".js-follow-toggle",d],["#follow-button-dialog .unfollow-user","click",g],["#follow-button-dialog .cancel","click",w],["#follow-button-dialog .continue","click",_],["subscribe","whi:follow_user",j],["subscribe","whi:unfollow_user",S],["subscribe","whi:followed",O],["subscribe","whi:unfollowed",F]]}}),this.require.define({"modules/views/follow_collection_button":function(e,t,i){var n=t("../lib/view"),o=t("../lib/routes"),r=t("../utils/utils"),s=t("../lib/tracking"),a=(t("../lib/lightbox"),t("../lib/tracking/data_layer")),l=i.exports=new n;l.matchRoute=function(){return!0};var c=function(){var e=$(this),t=e.closest(".js-follow-collection-form");return d(e,null,function(){e.removeClass("js-follow-collection-button text-primary"),e.addClass("js-unfollow-collection-button text-gray"),s.trackGAEvent("Follow","Follow Collection",s.where()),a.followCollection(t)}),!1},u=function(){{var e=$(this);e.closest(".js-follow-collection-form")}return d(e,"delete",function(){e.removeClass("js-unfollow-collection-button text-gray"),e.addClass("js-follow-collection-button text-primary"),s.trackGAEvent("Follow","Unfollow Collection",s.where())}),!1},d=function(e,t,i){var n=e.closest(".js-follow-collection-form");e.addClass("btn-is-loading"),$.ajax({url:n.attr("action"),type:"post",data:{_method:t},success:function(e){var o=n.attr("data-follow-label"),r=n.attr("data-unfollow-label"),s=t?o:r;n.html(e),n.data("data-follow-label",o),n.data("data-unfollow-label",r),n.find("input[type=submit]").val(s),i&&i()},error:r.defaultAjaxErrorCallback})},h=function(e,t){var i=t.user,n=$(t.html).text(),o=$(".js-follow-collection-form[data-user-id]="+i+" input[type=submit]");o.removeClass("js-follow-collection-button text-primary"),o.addClass("js-unfollow-collection-button text-gray"),o.val(n)},f=function(e,t){var i=t.user,n=$(t.html).text(),o=$(".js-follow-collection-form[data-user-id]="+i+" input[type=submit]");o.removeClass("js-unfollow-collection-button text-gray"),o.addClass("js-follow-collection-button text-primary"),o.val(n),$(t.html).attr("data-user-private")&&(o.addClass("btn-is-disabled"),o.attr("disabled",!0))},p=function(){var e=$(this),t=e.attr("data-collection-id"),i=e.attr("data-username");return $.publish("whi:anonymous_follow",{done:o.currentUrl(),action:{type:"follow_collection",collectionId:t,username:i}}),!1},m=function(e,t){$.ajax({url:o.follows_path(),type:"post",data:{resource:{id:t.collectionId,type:"collection"}},success:function(){$.publish("whi:followed_collection",t)}})};l.events=[[window,"click",".js-anonymous",p],[window,"click",".js-follow-collection-button",c],[window,"click",".js-unfollow-collection-button",u],["subscribe","whi:followed",h],["subscribe","whi:unfollowed",f],["subscribe","whi:follow_collection",m]]}}),this.require.define({"modules/views/heart_button":function(e,t,i){var n=t("../lib/view"),o=i.exports=new n;o.matchRoute=function(){return $("#other_browser").length},o.init=function(){};var r=function(){$(this).parent().hide(),$("#select_browser").show()};o.events=[["#other_browser","click",r]]}}),this.require.define({"modules/views/heart_button_container":function(e,t,i){var n=t("../lib/view"),o=i.exports=new n;o.matchRoute=function(){return $(".heart-button-content").length},o.init=function(){$(function(){var e=$("#content");self.resizeTo(700,e.height()+110)})}}}),this.require.define({"modules/views/inbox":function(e,t,i){"use strict";var n=t("../lib/view"),o=(t("../lib/tracking"),t("../lib/routes"),t("../utils/utils"),i.exports=new n);o.matchRoute=function(){return $(".js-inbox").length};var r=function(e){var t=$(this),i=t.attr("data-correspondent-id"),n=+$.cookie("postcard_reply_shown")||0;$.cookie("correspondent_id",i,{path:"/"}),5>n&&($.cookie("postcard_reply_shown",n+1,{path:"/",expires:9999}),location.href=t.attr("href")+"?postcard_reply=1",e.preventDefault())};o.events=[[".js-inbox","click",".js-reply",r]]}}),this.require.define({"modules/views/inspirations/inspirations":function(e,t,i){"use strict";var n=t("../../lib/view"),o=i.exports=new n;o.matchRoute=function(){return $("#inspirations-view").length};var r=null,s=null,a=null,l=null,c=null,u=null,d=0,h=null;o.init=function(){if($(".content-sidebar-scroll").length){r=$(window).height(),s=$(".content-sidebar-scroll .sidebar-scroll"),a=$(".content-sidebar-scroll .grid-thumb"),l=s.width();var e=s.offset();c=e.top+s.height()+100,r>=c&&(c=r),u=c+l,d=0,h=!1}}}}),this.require.define({"modules/views/interstitial":function(e,t,i){var n=(t("../lib/config"),t("../lib/tracking")),o=t("../lib/view"),r=i.exports=new o;r.matchRoute=function(){return $(".js-interstitial").length},r.init=function(){$.cookie("mobile_interstitial")||($(".js-interstitial").show(),$("#navbar").hide(),$("#languages-picker").hide(),$(".floating-window").hide(),$("#main-container").hide(),setTimeout(function(){$("#branch-banner-iframe").length&&$("#branch-banner-iframe").hide()},2e3))};var s=function(e){e.preventDefault();var t=$(this).attr("href"),i=5;$.cookie("mobile_interstitial",1,{expires:i,path:"/"}),$(".js-interstitial").remove(),$("#navbar").show(),$("#languages-picker").show(),$(".floating-window").show(),$("#main-container").show(),t?(n.trackGAEvent("Growth","Mobile web interstitial","Clicked download"),window.open(t)):n.trackGAEvent("Growth","Mobile web interstitial","Clicked browser")};r.events=[[".js-interstitial-continue","click",s]]}}),this.require.define({"modules/views/modal":function(e,t,i){var n=t("../lib/view"),o=i.exports=new n;o.matchRoute=function(){return $(".js-modal-container").length},o.init=function(){};var r=function(e){e.preventDefault(),a()};o.load=function(e){$(".js-modal-container").append(e),$(".js-modal-container").show(),$("html").addClass("no-scroll"),s(!1)};var s=o.loading=function(e){$(".js-modal-container").toggleClass("modal-is-loading",e),$(".js-modal-container").show()},a=o.close=function(){var e=$(".js-modal-container"),t=e.find(".modal-element").last().remove();return $.publish("whi:modal:close",t),0==e.children().length&&(e.hide(),$("html").removeClass("no-scroll")),e.children().length},l=o.closeAll=function(){for(;a(););},c=function(e){e.target===$(".js-modal-container")[0]&&l()};o.events=[[".js-modal-container","click",".js-modal-close",r],[".js-modal-container","click",c]]}}),this.require.define({"modules/views/modals/add_to_collection_modal":function(e,t,i){var n=t("../../lib/view"),o=t("../../lib/routes"),r=(t("../../lib/popup_message"),t("../../lib/tracking")),s=t("./collections_modal"),a=i.exports=new n,l=!1;a.matchRoute=function(){return $(".modal-element.js-add-to-collections").length},a.init=function(){$(".dropdown .entry-more-button").bind("click",c),$(".dropdown .dropdown-menu-wrapper").bind("click",u)},a.addEntriesToCollection=function(e,t){var i=e.toString().split(",");$(i).each(function(){p(e,t,"")}),l=!0};var c=function(e){$(this).parent().hasClass("active")||($(this).parent().toggleClass("active"),e.preventDefault())},u=function(e){return"ontouchstart"in document.documentElement?($(this).parent().removeClass("active"),void e.preventDefault()):!0},d=function(){$(".dropdown-collection").addClass("visible").addClass("active")},h=function(){$(".dropdown-collection").removeClass("visible")},f=function(e){var t=$(this).find("input[type=checkbox]"),i=$(this).closest(".js-selectable").data("entryId"),n=i.toString().split(","),o=$(this).closest(".js-selectable").data("collectionId");return e.srcElement!=t[0]&&t.attr("checked",!t.attr("checked")),$(n).each(function(e,i){t.prop("checked")?(l=!0,p(i,o,t)):m(i,o,t)}),event.preventDefault(),event.stopPropagation(),!1},p=function(e,t,i){""!=e&&(i.length&&i.addClass("btn-is-loading"),$.post(o.set_path(e),{entry_set_id:t},void 0,"html").success(function(){i.length&&(i.removeClass("btn-is-loading"),i.attr("checked",!0)),r.trackGAEvent("Set","Setted",e)}).error(function(){i.length&&(i.removeClass("btn-is-loading"),i.attr("checked",!0))}))},m=function(e,t,i){e&&(i.addClass("btn-is-loading"),$.ajax({url:o.remove_from_set(t),data:{entry_id:e},type:"delete",method:"post",success:function(){i.attr("checked",!1),i.removeClass("btn-is-loading"),r.trackGAEvent("Set","Unsetted",e)},error:function(e){i.attr("checked",!0),i.removeClass("btn-is-loading"),$("#notice").html(e.responseText).show()}}))},g=function(){var e=$(this).data("entryId");s.openCreateCollectionModal(e)},v=function(e){var t=$(this),i=t.val(),n=t.closest(".list");i&&27!=e.keyCode?(n.find(".list-item").css("display","none"),n.find(".list-item:contains("+i+")").css("display","block"),n.find(".list-item:first-child").css("display","block")):n.find(".list-item").css("display","block")},y=function(){if(l){var e=$(".list-item.js-selectable").closest(".js-selectable"),t=(e.data("entryId"),e.find("input[type=checkbox][checked=checked]").map(function(e,t){return $(t).val()}));$(this).remove,$.publish("whi:content_updated"),$.publish("whi:collections_selected",{selectedIds:t}),l=!1}},b=function(){return"ontouchstart"in document.documentElement?!0:void $(this).addClass("active")},w=function(){return"ontouchstart"in document.documentElement?!0:void $(this).removeClass("active")};a.events=[[".dropdown","mouseenter",b],[".dropdown","mouseleave",w],[".modal-element.js-add-to-collections","click",".js-open-create-collection-modal",g],[".js-filter-list","keyup",v],[".modal-element.js-add-to-collections","click",".list-item.js-selectable",f],[".modal-element.js-add-to-collections","click",".js-modal-close",y],[".entry-main","heart",d],[".entry-main","unheart",h]]}}),this.require.define({"modules/views/modals/collections_modal":function(e,t,i){var n=t("../../lib/view"),o=t("../../lib/routes"),r=i.exports=new n;r.matchRoute=function(){return $(".modal.js-modal-container").length},r.init=function(){},r.openCollectionsModal=function(e,t){return a(),$.ajax({url:o.add_to_collections(e),method:"get",success:function(e){$(".modal-element.js-add-to-collections").length&&$(".modal-element.js-add-to-collections").remove(),s(e,t)},error:function(e){l(),$("#notice").html(e.responseText).show()}}),!0},r.openCreateCollectionModal=function(e){e||(e="0"),$.ajax({url:o.create_new_collection(e),method:"get",success:function(e){s(e)},error:function(e){$("#notice").html(e.responseText).show()}})};var s=function(e,t){var i=$(".modal.js-modal-container"),t=t||"";i.removeClass("modal-is-loading"),i.append(e),""!==t&&i.find("[data-collection-id='"+t+"']").find("input").attr("checked",!0),$.publish("whi:content_updated"),$(".js-filter-list").focus()},a=function(){$(".modal.js-modal-container").show().addClass("modal-is-loading"),$("html").addClass("no-scroll")},l=function(e){e.preventDefault(),$(this).closest(".modal-element").remove();var t=$(".modal.js-modal-container");0==t.children().length&&($("html").removeClass("no-scroll"),t.hide())};r.events=[[".modal.js-modal-container","click",".js-modal-close",l]]}}),this.require.define({"modules/views/modals/create_new_collection_modal":function(e,t,i){var n=t("../../lib/view"),o=t("../../lib/routes"),r=t("../../lib/tracking"),s=t("./add_to_collection_modal"),a=t("./collections_modal"),l=i.exports=new n;l.matchRoute=function(){return $(".modal-element.js-create-new-collection").length},l.init=function(){};var c=function(){var e=$(".modal-element.js-create-new-collection");if(e.length){{var t=e.data("username"),i=e.data("entryId"),n=e.find(".collection-name").val();e.find(".collection-desc").val()}return""!==e.find(".collection-name").val().trim()?(d(t,i,n),!0):(popupMessage.alert("Missing Title","New Collection must have a title in order to be created"),e.find("input.collection-name").focus(),!1)}console.log("ERROR: no entries ids in data attribute")},u=function(e){var t=$(this);if(13===e.keyCode){var i=$(this).data("username"),n=$(".entry-main").data("entryId");d(i,n,collectionTitle)}else 27===e.keyCode&&t.val("")},d=function(e,t,i){var n=t.toString().split(",");$.ajax({type:"post",url:o.create_entry_set_with_entry_path(e),data:{entry_id:n[0],entry_set:i,cover:!0},success:function(e){var i=$(e).data("collectionId");r.trackGAEvent("Set","NewCollection",i),a.openCollectionsModal(t,i),$(n).each(function(e,t){s.addEntriesToCollection(t,i)})},error:function(){popupMessage.alert("Network error","Please try again later")}})};l.events=[[".modal-element.js-create-new-collection","click",".create-btn",c],[".modal-element.js-create-new-collection","onkeypress","input",u]]}}),this.require.define({"modules/views/navbar/navbar":function(e,t,i){var n=t("../../lib/config"),o=t("../../lib/view"),r=(t("../../lib/routes"),t("../../lib/signup_buttons")),s=t("../../lib/lightbox"),a=i.exports=new o;a.matchRoute=function(){return $("#navbar").length||n.mobile_site},a.init=function(){if($(".navbar").length||$(".navbar .dropdown-menu").remove(),!n.mobile_site){var e=$("#content"),t=$("#sidebar");e.height()>t.height()?t.css("min-height",e.height()-5):e.css("min-height",t.height()+5),e.resize(function(){t.css("min-height",e.height()-5)}),t.resize(function(){e.css("min-height",t.height()+5)})}};var l=function(){$(".navbar").length&&n.mobile_site&&($(".js-mobile-dropdown").removeClass("open"),$(".global-search .searchfield").is(":focus")||$(this).toggleClass("open"))},c=function(){if($(".navbar").length&&n.mobile_site){var e=$(this).parent();return e.hasClass("open")?e.removeClass("open"):($(".js-navbar-menu-toggle").removeClass("open"),$(".js-mobile-dropdown").removeClass("open"),e.addClass("open")),!1}},u=function(){$(this).parent().fadeOut()},d=function(e){s.loadContent(e).open()},h=new r({emailPopup:!0,emailStart:function(){},emailComplete:function(){},emailForm:d,googlePlusPopup:!0,googlePlusAlert:function(e){s.loadContent(e).open()}}),f=h.click,p=function(){return s.close(),!1},m=function(e){e.preventDefault();var t=$(this).parent();t.addClass("global-search-visible"),t.find(".searchfield").focus()},g=function(e){var t=$(".js-search-history"),i=$.cookie("weheartit_searches"),n=i?i.toString().split(","):[],o=n.length,r=$(e.currentTarget).width(),s="";t.find("li").remove(),$(n).each(function(e,t){if(e>o-25){var i=decodeURIComponent(t);s+='<li class="ui-menu-item js-search-history-item" style="text-align: left;" data-search-item="'+i+'"><a>'+i+"</a></li>"}}),o&&(s+='<li class="ui-menu-item js-search-history-delete" style="text-align: left;"><a>'+I18n.t("js.navbar.clear_search_history")+"</a></li>",t.prepend(s),t.width(r),$(".js-search-history-item").on("mousedown",y),$(".js-search-history-delete").on("mousedown",b),t.show("fast"))},v=function(){$searchHistoryMenu=$(".js-search-history"),$(".js-search-history-item").off("mousedown"),$searchHistoryMenu.hide(),$searchHistoryMenu.find("li").remove()},y=function(e){$(".searchfield").val($(e.currentTarget).data("searchItem")),$(".searchfield").closest("form").submit()},b=function(e){event.preventDefault(),$.cookie("weheartit_searches","",{path:"/"}),v(e)},w=function(e){var t=$(this);t.hasClass("typing")&&e.offsetX>t.width()&&(""==t.val()&&($(".global-search").removeClass("global-search-visible"),t.removeClass("typing")),t.val(""))},_=function(e){var t=$(this);""!=t.val()&&0==t.find(".closex").length?(t.addClass("typing"),v(e)):t.removeClass("typing")},x=function(){return $("#addimages").show(),!1};a.events=[["#languages-picker","click",".close, .closex",u],[".js-navbar-menu-toggle","click",l],[".js-mobile-dropdown .tab","click",c],[".js-mobile-dropdown","click",".button.join",f],["body","click",".email_popup .close",p],[".global-search","click",".tab",m],[".searchfield","keyup",_],[".searchfield","click",w],[".global-search","focus",".searchfield",g],[".global-search","blur",".searchfield",v],[".js-add-images","click",x]]}}),this.require.define({"modules/views/navbar/notifications":function(e,t,i){var n=t("../../lib/config"),o=t("../../lib/view"),r=t("../../lib/tracking"),s=i.exports=new o;s.matchRoute=function(){return $(".js-notifications-list").length},s.init=function(){};var a=function(){r.trackGAEvent("Notifications","NotificationsAll","UserID",n.user_id)};s.events=[[window,"click",".js-notifications-view-all",a]]}}),this.require.define({"modules/views/navbar/topbar_touches":function(e,t,i){var n=t("../../lib/view"),o=i.exports=new n;o.matchRoute=function(){return!0};var r=function(e){var t=$(this);t.next().hasClass("dropdown-menu")&&(t.parent().toggleClass("hovered"),e.preventDefault())};o.events=[[".navbar li > a","touchend",r]]}}),this.require.define({"modules/views/new_account/new_confirmation":function(e,t,i){var n=t("../../lib/view"),o=i.exports=new n;o.matchRoute=function(){return $(".sign_up_confirmation #share_updates").length},o.init=function(){$.cookie("lightbox_registration",!1,{path:"/"})};var r=function(){var e=$(this).data("facebook-url");$(this).is(":checked")&&!$(this).data("share-updates")&&(location.href=e)};o.events=[["#share_updates","change",r]]}}),this.require.define({"modules/views/onboarding_inspirations":function(e,t,i){"use strict";var n=t("../lib/view"),o=(t("../utils/utils"),t("../lib/tracking"),i.exports=new n);o.matchRoute=function(){return $(".js-onboarding-inspirations").length},o.init=function(){};var r=function(){var e=$("input[type=checkbox]:checked").length;e>=4?($(".js-select-four-btn").addClass("hide"),$(".js-find-collections-btn").removeClass("hide")):($(".js-select-four-btn").removeClass("hide"),$(".js-find-collections-btn").addClass("hide"))};o.events=[[".js-onboarding-inspirations","changed",".js-selectable",r]]}}),this.require.define({"modules/views/postcard":function(e,t,i){"use strict";var n=(t("../lib/config"),t("../lib/routes")),o=t("../lib/view"),r=t("../lib/tracking"),s=(t("../lib/link_social_network"),t("../utils/utils")),a=t("./modal"),l=i.exports=new o,c=[],u=!1,d=1,h="",f=null,p=null,m=null;l.matchRoute=function(){return $(".js-postcard-modal").length},l.init=function(){f=$(".js-postcard-modal"),f.find("textarea").focus(),0===$(".js-recipients-modal").length&&(c=[]),$.cookie("correspondent_id")&&(m=+$.cookie("correspondent_id"),c.push(m),$.removeCookie("correspondent_id",{path:"/"}))};var g=function(e){e.preventDefault(),j(q($(this).addClass("btn-is-loading")))},v=function(){j(q($(this).addClass("btn-is-loading")))},y=function(){var e=f.attr("data-entry-id"),t=f.find("textarea").val(),i=$(this).addClass("btn-is-loading");return $.ajax(n.create_postcard(),{type:"post",data:{content:t,entry_id:e,recipient_ids:c}}).done(function(){c=[],A(!0);var t=$(".js-postcard-modal").data("trackingUrl"),i=$(".js-postcard-modal").data("adsNativeSid");$.publish("whi:share_postcard",{adsNativeTrackingUrl:t,adsNativeSID:i}),r.trackGridAction("Postcard",$(".entry[data-entry-id='"+e+"']"))}).fail(function(e,t,i){s.defaultAjaxErrorCallback(e,t,i),a.closeAll()}).always(q(i)),!1},b=function(e){e.preventDefault(),A(!1,q($(this).addClass("btn-is-loading")))},w=function(e){return h=$(this).val(),""===h.trim()?void j():(d=1,u=!0,S(function(){u=!1}),void(13===e.keyCode&&e.preventDefault()))},_=function(e,t){var i=$(this).find("input[type=checkbox]"),n=t.checked,o=+i.val();n&&-1===c.indexOf(o)?c.push(o):n||-1===c.indexOf(o)||c.splice(c.indexOf(o),1),T()},x=function(){var e=$(".js-spinner"),t=p.find(".js-recipients"),i=t.get(0).scrollHeight-(t.scrollTop()+t.height());u||i<t.height()&&(e.show(),u=!0,S(function(i){i&&t.off("scroll",x),e.hide(),d++,u=!1}))},k=function(){var e=f.find(".js-counter");e.text(200-f.find("textarea").val().length)},C=function(){13===event.keyCode&&event.preventDefault()},j=function(e){var t="";e=e||function(){},null!==m&&(t="?correspondent_id="+m,m=null),$.get(n.recipients_modal()+t).done(function(e){a.load(e),d=2,p=$(".js-recipients-modal"),p.find(".js-recipients").scroll(x),p.find(".js-share").attr("data-item-id",f.attr("data-entry-id")),p.find(".js-share").attr("data-postcard-message",f.find("textarea").val()),T(),$.publish("whi:content_updated")}).fail(s.defaultAjaxErrorCallback).always(e)},S=function(e){var t=p.find(".js-recipients"),i=$(".js-spinner");$.get(n.recipients_scroll()+"?query="+h+"&page="+d).done(function(n){1===d?t.html(n):i.before(n),T(),e(!n.trim())}).fail(s.defaultAjaxErrorCallback).always(function(t,i){"error"===i&&e&&e(!1)})},T=function(){var e=p.find(".js-recipients input[type=checkbox]");e.prop("checked",!1),c.forEach(function(t){e.filter("[value="+t+"]").prop("checked",!0)}),F()},A=function(e,t){t=t||function(){},a.loading(!0),$.get(n.postcards_share_modal()+(e?"?postcard_sent=1":"")).done(function(e){a.closeAll(),a.load(e),$(".js-postcard-share-modal .bg-facebook").on("click",I),$(".js-postcard-share-modal .bg-tumblr").on("click",I),$(".js-postcard-share-modal .bg-twitter").on("click",I),$(".js-postcard-share-modal .js-email").on("click",I),$(".js-postcard-share-modal .js-get-link").on("click",P),$.publish("whi:content_updated")}).fail(s.defaultAjaxErrorCallback).always(t)},I=function(){var e=$(this),t=e.attr("data-service"),i=e.attr("href");return i?(r.trackSocial(t,"postcard_share"),"email"===t?!0:(E(i),!1)):(e.addClass("ajax"),D(function(t){O(t),e.removeClass("ajax"),e.click()}),!1)},E=function(e){var t=500,i=445,n=screen.width/2-t/2,o=200;window.open(e,"title","width="+t+",height="+i+",scrollbars=yes,status=1,left="+n+",top="+o)},P=function(){var e=$(".js-link"),t=$(".js-get-link");""===e.val().trim()&&D(O),t.hide(),e.show()},N=function(){$(this).select()},D=function(e){var t=f.attr("data-entry-id"),i=f.find("textarea").val();$.post(n.postcards_share_link(),{entry_id:t,message:i}).done(function(t){e(t)}).fail(s.defaultAjaxErrorCallback).always(function(){e()})},O=function(e){e&&($(".js-postcard-share-modal a[data-service=facebook]").attr("href",e.facebook),$(".js-postcard-share-modal a[data-service=tumblr]").attr("href",e.tumblr),$(".js-postcard-share-modal a[data-service=twitter]").attr("href",e.twitter),$(".js-postcard-share-modal a[data-service=email]").attr("href",e.email),$(".js-postcard-share-modal .js-link").val(e.link))},F=function(){var e=$(".js-postcard-modal .js-reply-send, .js-recipients-modal .js-send");e.toggleClass("btn-is-disabled",!c.length),e.attr("disabled",!c.length)},q=function(e){return function(){e.removeClass("btn-is-loading")}};l.events=[[".js-postcard-modal","click",".js-next",g],[".js-postcard-modal","click",".js-change",v],[".js-postcard-modal","click",".js-reply-send",y],[".js-postcard-modal","keyup",".js-message",k],[".js-postcard-modal","keydown",".js-message",C],[".js-recipients-modal","click",".js-share",b],[".js-recipients-modal","keyup",".js-search",w],[".js-recipients-modal","changed",".js-recipients .js-selectable",_],[".js-recipients-modal","click",".js-send",y],[".js-recipients-modal","click",".js-link",N]]}}),this.require.define({"modules/views/postcard_button":function(e,t,i){var n=t("../lib/view"),o=(t("../lib/tracking"),t("../lib/routes")),r=t("../utils/utils"),s=t("./modal"),a=i.exports=new n;a.matchRoute=function(){return $(".js-postcard-button").length};var l=function(e){e.preventDefault();var t=$(this),i=$.cookie("correspondent_id"),n=i?"?correspondent_id="+i:"";s.loading(!0),$.get(o.postcard_modal(t.attr("data-entry-id"))+n).done(function(e){s.load(e),$.publish("whi:content_updated"),$(".js-postcard-modal").attr({"data-tracking-url":t.closest(".entry").data("trackingUrl"),"data-ads-native-sid":t.closest(".entry").data("adsNativeSid")})}).fail(r.defaultAjaxErrorCallback)};a.events=[[window,"click",".js-postcard-button",l]]}}),this.require.define({"modules/views/prompts/app_promo_ad":function(e,t,i){var n=(t("../../lib/config"),t("../../lib/view")),o=t("../../utils/utils"),r=i.exports=new n;r.matchRoute=function(){return $(".apps-promo-ad").length},r.init=function(){};var s=function(){$.publish("trackGAEvent",["AppPromoAd","iOSClick",o.uniqueUserId()]),$.publish("trackEvent",["click",{widget:"AppPromoAd",action:"iOS Text"}])},a=function(){$.publish("trackGAEvent",["AppPromoAd","AndroidClick",o.uniqueUserId()]),$.publish("trackEvent",["click",{widget:"AppPromoAd",action:"Android Text"}])},l=function(){$.publish("trackGAEvent",["AppPromoAd","iOSClick2",o.uniqueUserId()]),$.publish("trackEvent",["click",{widget:"AppPromoAd",action:"iOS Button"}])},c=function(){$.publish("trackGAEvent",["AppPromoAd","AndroidClick2",o.uniqueUserId()]),$.publish("trackEvent",["click",{widget:"AppPromoAd",action:"Android Button"}])},u=function(){$.publish("trackGAEvent",["AppPromoAd","iOSClick3",o.uniqueUserId()]),$.publish("trackEvent",["click",{widget:"AppPromoAd",action:"iOS Icon"}])},d=function(){$.publish("trackGAEvent",["AppPromoAd","AndroidClick3",o.uniqueUserId()]),$.publish("trackEvent",["click",{widget:"AppPromoAd",action:"Android Icon"}])},h=function(){var e=$(this).data("gaAction");$.publish("trackGAEvent",["AppPromoAd",e,"Click"]),$.publish("trackEvent",["click",{widget:"AppPromoAd",action:e}])};r.events=[[".text .itunes-icon","click",s],[".text .play-icon","click",a],[".buttons .itunes-link","click",l],[".buttons .play-link","click",c],[".phone .itunes-icon","click",u],[".phone .play-icon","click",d],["a.hint","click",h]]}}),this.require.define({"modules/views/registration/email_signup":function(e,t,i){var n=t("../../lib/view"),o=t("../../utils/slug"),r=t("../../lib/verifier"),s=(t("../../lib/routes"),t("../../lib/tracking/data_layer"),i.exports=new n);s.matchRoute=function(){return $("#create-user-form, #login-form").length},s.init=function(){f(),y.apply($("#user_email")),_()};var a=function(){d(),$(".sign_up_button").addClass("disabled").addClass("ajax")},l=function(){$(".sign_up_button").removeClass("disabled").removeClass("ajax")},c=function(){$.publish("whi:signup_updated")},u=function(e){$(".js-sign-up-error").html("").append(e).slideDown(c),"grecaptcha"in window&&grecaptcha.reset()},d=function(){$(".js-sign-up-error").html("").slideUp(c)},h=function(e,t,i,n){u("<p>"+(n||"Unknown Error")+"</p>")},f=function(){var e="#user_username",t=new r(e,"#username-check","#suggested-username",{data:function(){return $(e).serialize()},empty:function(){return""==$(e).val()},equals:function(e){return null!=this.data()&&this.data()===e},complete:function(){_()}});t.verify()},p=function(){y.apply(this,arguments);var e=o($(this).val()).toLowerCase();e.length&&$("#user_username").val(e).trigger("change")},m=function(){$("#username-preview").text($(this).val())},g=function(){var e=$(this),t=e.val(),i=!0;e.removeClass("is-valid is-invalid js-empty"),0==t.length?e.addClass("js-empty"):(t.length>=5&&(i=!/^[^\s]+?\@[^\s]+\.[^\s]+$/.test(t)),e.addClass(i?"is-invalid":"is-valid").removeClass(i?"is-valid":"is-invalid")),_()},v=function(){var e=$(this).removeClass("valid invalid js-empty").val();failed=e.length<2,$(this).addClass(e.length>0?failed?"invalid":"valid":"js-empty"),_()},y=function(){w(this,6)},b=function(){w(this,1)},w=function(e,t){var i=$(e).removeClass("is-valid is-invalid js-empty").val();failed=i.length<t,$(e).addClass(i.length>0?failed?"is-invalid":"is-valid":"js-empty"),_()},_=function(){var e=!$(".is-invalid").length&&!$(".js-empty").length;$.fn[e?"removeClass":"addClass"].call($(".sign_up_button"),"disabled"),e?$(".sign_up_button").removeAttr("disabled"):$(".sign_up_button").attr("disabled","disabled")};s.events=[[".error.notice","click",d],["#create-user-form","keyup blur change input","#user_email",g],["#login-form","keyup blur change input","#user_email",g],["#create-user-form","keyup blur change input","#user_password",y],["#login-form","keyup blur change input","#user_password_login",b],["#login-form","keyup blur change input","#user_email_or_username",v],["#create-user-form","keyup blur change input","#user_name",p],["#create-user-form","keyup blur change input","#user_username",m],["#create-user-form","ajax:before",a],["#create-user-form","ajax:error",h],["#create-user-form","ajax:complete",l]]}}),this.require.define({"modules/views/registration/join_tracker":function(e,t,i){var n=t("../../lib/view"),o=t("../../lib/tracking"),r=i.exports=new n;r.matchRoute=function(){return $("#create-user-form").length},r.init=function(){o.trackGAEvent("Registration","JoinPageViewed","Redesign",null,!0)}}}),this.require.define({"modules/views/registration/login":function(e,t,i){var n=t("../../lib/view"),o=t("../../lib/lightbox"),r=t("../../lib/signup_buttons"),s=i.exports=new n;s.matchRoute=function(){return $("#login,#navbar .email.join").length},s.init=function(){if($("#sign_in_form").length){var e=$($("#sign_in_form").html());$("#sign_in_form").remove(),o.loadContent(e,!0),$(".js-sign-up-error").slideDown(200),o.open()}};var a=function(e){return e="string"==typeof e?e:"?done="+window.location.href,o.showLoader(),$.ajax({url:"/users/sign_in_form"+e,success:function(e){e=$(e),o.loadContent(e.show()),o.open()},complete:function(){o.hideLoader()}}),!1},l=new r({googlePlusPopup:!0,googlePlusAlert:function(e){o.loadContent(e).open()}});s.events=[["#navbar .email_login_link","click",a],["#navbar .google_login_link","click",l.click],["#login","click","#login-page-email-login",a],["#login","click","#login-page-google-login",l.click]]}}),this.require.define({"modules/views/registration/registration":function(e,t,i){var n=t("../../lib/view"),o=(t("../../lib/lightbox"),t("../../lib/tracking")),r=t("../../lib/routes"),s=t("../../lib/config"),a=t("../../lib/tracking/data_layer"),l=i.exports=new n;
l.matchRoute=function(){return!0},l.init=function(){return"1"==d("login")?($.cookie("logged_in_earlier")||(a.userLogin(),$.cookie("logged_in_earlier",!0,{path:window.location.pathname})),g()):("1"==d("logout")&&$.removeCookie("logged_in_earlier"),void("1"==d("sign_up")&&(a.userRegister(),u())))};var c=function(){$.cookie("lightbox_registration",!!$("#registration_intercept").length,{path:"/"})},u=function(){o.trackGAEvent("Registration","User Created",s.user_id||"unknown")},d=function(e){var t=new RegExp("(?:^|\\?|&)"+e+"=([^&]+)","i"),i=window.location.search.match(t);return i&&i[1]},h=function(e,t){var i=function(n,o){o.user==e&&($.unsubscribe("whi:followed",i),t())};$.subscribe("whi:followed",i)},f=function(e,t){var i=function(n,o){o.entry==e&&($.unsubscribe("whi:hearted",i),t())};$.subscribe("whi:hearted",i)},p=function(e,t){var i=function(n,o){o.collectionId==e&&($.unsubscribe("whi:followed_collection",i),t())};$.subscribe("whi:followed_collection",i)},m=function(e,t){switch(e.type){case"follow":h(e.userId,t),$.publish("whi:follow_user",e);break;case"heart":f(e.entryId,t),$.publish("whi:heart_entry",e);break;case"follow_collection":p(e.collectionId,t),$.publish("whi:follow_collection",e);break;default:console.error("doAction called with invalid type")}},g=function(e){y(!1);var t=v();t.done&&(t.done=t.done.replace(/(^|\?|&)login=[^&]+/gi,""));var i=function(){if(!/[&\?]login=1/.test(window.location.search)){$.removeCookie("whi:registration_complete_data",{path:"/",expires:30}),o.trackGAEvent("Registration","FlowCompleted");var i=e||t.done||r.getUrl("/dashboard");window.location=r.mergeQueryParams(i,"registration_complete=1")}};t.action?m(t.action,i):i()},v=function(){var e=$.cookie("whi:registration_complete_data");try{e=JSON.parse(e)}catch(t){e={}}return e},y=function(e){return e?$.cookie("whi_registration_step",e,{expires:999,path:"/"}):$.removeCookie("whi_registration_step",{expires:999,path:"/"})};l.events=[["subscribe","whi:signup",u],["subscribe","whi:initiate_signup",c]]}}),this.require.define({"modules/views/registration/testimonials":function(e,t,i){var n=t("../../lib/view"),o=5e3,r=i.exports=new n;r.matchRoute=function(){return $("#registration_testimonials").length},r.init=function(){this.slideInterval=setInterval(s,o)},r.teardown=function(){clearInterval(this.slideInterval)};var s=function(){var e=$("#registration_testimonials .testimonials_carousel"),t=e.find("li"),i=t.first().outerWidth()+parseInt(t.first().css("margin-left"),10)+parseInt(t.first().css("margin-right"),10),n=i*t.length,o=parseInt(e.css("left"),10),r=o-i,s=function(){};Math.abs(r)>=n&&(e.prepend(t.last().clone()),e.css({left:0}),r=-i,s=function(){e.find("li:first-child").remove(),e.css({left:0})}),e.animate({left:r},{duration:800,complete:s,easing:"easeInOutCubic"})}}}),this.require.define({"modules/views/share_modal":function(e,t,i){"use strict";var n=(t("../lib/config"),t("../lib/routes")),o=t("../lib/view"),r=t("../lib/tracking"),s=t("../lib/link_social_network"),a=t("../utils/utils"),l=t("./modal"),c=i.exports=new o;c.matchRoute=function(){return $(".js-share-modal, .js-share-modal-basic").length},c.init=function(){};var u=function(e){var t=$(".js-share-modal input[type=submit]"),i=$(".js-modal-errors"),o=$(this),s=o.find("textarea").val(),c=o.find("input[name=type]").val(),u=o.find("input[name=link]").val(),d=o.find("input[name=id]").val(),h=[];return e.preventDefault(),o.find("input[value=facebook]").is(":checked")&&h.push("facebook"),o.find("input[value=twitter]").is(":checked")&&h.push("twitter"),o.find("input[value=twitter]").is(":checked")&&h.push("tumblr"),g(!1),t.addClass("btn-is-loading"),i.empty(),$.ajax(n.share(),{type:"post",data:{services:h,type:c,content:s,link:u,id:d},success:function(e){var t=!1;r.trackGridAction("Share",$(".entry[data-entry-id='"+d+"']")),e.forEach(function(e){e.success&&r.trackSocial(e.service,"modal_share"),e.error&&($(".js-modal-errors").append($("<p>").text(e.error)),t=t||e.error)}),t?($(".js-modal-errors").fadeIn(),setTimeout(function(){$(".js-modal-errors").fadeOut()},5e3)):l.closeAll()},error:function(e,t,i){a.defaultAjaxErrorCallback(e,t,i),l.closeAll()},complete:function(){g(!0),t.removeClass("btn-is-loading")}}),!1},d=function(){var e=$(this),t=e.find("a").attr("href"),i=e.attr("data-service");return f(t,i),!1},h=function(e){return function(){var t=$(this),i=($(".js-share-modal input[type=submit]"),t.hasClass("js-connected")),o=t.find("input[type=checkbox]");if("tumblr"===e&&o.attr("checked")){var r=t.find("a").attr("href");r=r.replace(/source=.*?&/,"source="+encodeURIComponent($(".js-carousel-images img").attr("src").replace("thumb","original"))+"&"),r=r.replace(/caption=.*?&/,"caption="+encodeURIComponent($(".js-share-modal textarea").val())+"&"),f(r,"tumblr")}if(!i&&"tumblr"!==e){var a=n["link_"+e];o.attr("checked",!1);var l=s.openPopup(a(),function(i){"success"===i&&(t.addClass("js-connected"),o.attr("checked",!0),g(),"twitter"===e&&p(!0)),s.closePopup(l)});return!1}var c=(!!$(".js-btn-facebook input[type=checkbox]").attr("checked"),!!$(".js-btn-twitter input[type=checkbox]").attr("checked"));g(),p(c)}},f=function(e,t){{var i=500,n=445,o=screen.width/2-i/2,s=200;window.open(e,"title","width="+i+",height="+n+",scrollbars=yes,status=1,left="+o+",top="+s)}r.trackSocial(t,"inline_share")},p=function(e){$(".js-counter").toggle(e),m()},m=function(){if($(".js-btn-twitter input[type=checkbox]").is(":checked")){var e=$(".js-message");e.val().length>140&&e.val(e.val().slice(0,140)),$(".js-counter").text("("+(140-e.val().length)+")")}},g=function(e){var t=$(".js-share-modal input[type=submit]");"undefined"==typeof e&&(e=!1,e=e||$(".js-btn-facebook input[type=checkbox]").is(":checked"),e=e||$(".js-btn-twitter input[type=checkbox]").is(":checked"),e=e||$(".js-btn-tumblr input[type=checkbox]").is(":checked")),t.toggleClass("btn-is-disabled",!e),t.attr("disabled",!e)};c.events=[[".js-share-modal","submit","form",u],[".js-share-modal-basic","click",".js-btn-facebook",d],[".js-share-modal-basic","click",".js-btn-tumblr",d],[".js-share-modal-basic","click",".js-btn-twitter",d],[".js-share-modal","changed",".js-btn-facebook",h("facebook")],[".js-share-modal","changed",".js-btn-twitter",h("twitter")],[".js-share-modal","changed",".js-btn-tumblr",h("tumblr")],[".js-share-modal","keyup",".js-message",m]]}}),this.require.define({"modules/views/sidebar":function(e,t,i){"use strict";var n=t("../lib/view"),o=i.exports=new n,r=!1,s=null;o.matchRoute=function(){return $(".sidebar").length&&$(".grid-item").length},o.init=function(){r||(r=!0,s=$(".sidebar")[0].clientHeight,a())};var a=function(){var e=$(".grid-item")[0].clientHeight,t=s;if(t%e!==0&&t%e!==1){if(e>t)return void $(".sidebar").css("height",e);var i=t%e,n=e-i;$(".sidebar").css("height",t+n+1)}},l=function(e){var t=!1;return function(){t||(t=!0,e.apply(this,arguments),setTimeout(function(){t=!1},100))}};o.events=[[".sidebar","resize",l(a)]]}}),this.require.define({"modules/views/static/app":function(e,t,i){var n=t("../../lib/view"),o=t("../../lib/config"),r=i.exports=new n;r.matchRoute=function(){return $(".apps-page").length};var s=function(){$.publish("trackGAEvent",["DownloadApp","iTunesStore",o.user_id]),$.publish("trackEvent",["click",{widget:"DownloadApp",action:"iTunesStore"}])},a=function(){$.publish("trackGAEvent",["DownloadApp","GooglePlay",o.user_id]),$.publish("trackEvent",["click",{widget:"DownloadApp",action:"GooglePlay"}])};r.events=[[".apps-page","click",".store-itunes",s],[".apps-page","click",".store-play",a]]}}),this.require.define({"modules/views/static/contact":function(e,t,i){"use strict";var n=t("../../lib/view"),o=i.exports=new n;o.matchRoute=function(){return $("#contact_form").length};var r=[],s=function(e,t){var i=[];$.each(e,function(e,n){var o=new RegExp(n),r=t.toLowerCase().match(o);null!==r&&i.push(n)}),$(".js-faq-item").hide(),$("#faq_iframe_wrapper").hide(),$.each(i,function(e,t){$("#solutions").show(),$(".cs_"+t.toLowerCase()).show()})};o.init=function(){if($("#user_keyword_search").length){0==r.length&&(r=$("#faq_keywords").text().split(/\s+/).filter(Boolean));var e=$("#user_keyword_search"),t=e.val();e.focus(),s(r,t)}};var a=function(e){13==e.keyCode&&e.preventDefault();var t=$(this).val();s(r,t),t.length&&$("#solutions").show()},l=function(){$(".loading").remove(),$(this).show()},c=function(e){$(this).parent().hasClass("redirect")||(e.preventDefault(),$("#faq_iframe_wrapper").show(),$("#faq_iframe").attr("src",$(this).attr("href"))),$("#contact_basic").hide(),$("#issue_not_found").show()},u=function(e){"none"!=$(this).css("display")&&(e.preventDefault(),$("#issue_not_found").hide(),$("#solutions").hide(),$("#faq_iframe_wrapper").hide(),$('input[type="submit"]').prop("disabled",!0),$("#contact_basic").show(),$("body").animate({scrollTop:$("#contact_basic").offset().top-100+"px"},"slow"))},d=function(e){13==e.keyCode&&e.preventDefault(),$(this).removeClass("js-required"),$("input[type='text'].js-required").filter(function(){return 0!==this.value.length}).removeClass("js-required"),$(".js-required").length<=0&&h()},h=function(){$('input[type="submit"]').prop("disabled",!1),$(".js-required-alert").hide()},f=function(e){e.preventDefault(),$(".cs_faqs").show()};o.events=[["#user_keyword_search","keydown",a],["#user_keyword_search","keyup",a],["#user_keyword_search","focus",a],[".js-faq-link","click",c],["iframe","load",l],[".js-required","change",d],[".js-required","keydown",d],["#open_faqs","click",f],["#issue_not_found","click",u]]}}),this.require.define({"modules/views/static/download_heart_button":function(e,t,i){var n=t("../../lib/view"),o=i.exports=new n;o.matchRoute=function(){return $(".js-download-heart-button").length};var r=function(e){var t=$(this),i=t.html();return t.hasClass("disabled")?void e.preventDefault():(t.html(t.attr("data-disable-with")).addClass("disabled"),setTimeout(function(){t.html(i).removeClass("disabled")},5e3),void(chrome&&(chrome.webstore.install(),e.preventDefault())))};o.events=[[".js-download-heart-button","click",r]]}}),this.require.define({"modules/views/static/facebook_timeline":function(e,t,i){var n=t("../../lib/view"),o=i.exports=new n;o.matchRoute=function(){return $(".facebook-timeline").length},o.init=function(){$("#ticker-item").hover(function(){$("#ticker-hover").fadeIn(),$("#fb-ticker-container").addClass("hover")},function(){$("#ticker-hover").fadeOut(),$("#fb-ticker-container").removeClass("hover")})}}}),this.require.define({"modules/views/static/left_share_buttons":function(e,t,i){var n=t("../../lib/view"),o=i.exports=new n;o.matchRoute=function(){return $(".left_share_buttons").length};var r=!1,s=function(){var e=$(window).scrollTop();$(".left_share_buttons").css({top:e}),r=!1},a=function(){r||(r=!0,requestAnimationFrame(s))};o.events=[[window,"scroll",a]]}}),this.require.define({"modules/views/static/popular":function(e,t,i){var n=t("../../lib/view"),o=t("../../lib/routes"),r=i.exports=new n;r.matchRoute=function(){return $(".date_selection_container .popular_date_select").length},r.init=function(){};var s=function(){return $(".date_selection_container .date_selection").toggle(),!1},a=function(){var e=$(this).closest(".date_selection"),t={date:$(this).data("date"),selected:$(this).data("selected-date")};return $(this).data("query")&&(t.query=$(this).data("query")),$.ajax({url:o.date_selection_path(),data:t,success:function(t){e.html(t),$.publish("whi:content_updated")}}),!1},l=function(){0==$(this).closest(".date_selection").length&&$(".date_selection_container .date_selection").hide()},c=function(e){var t=$(e.target);return!(!t.attr("href")||t.hasClass("disabled"))};r.events=[[".date_selection_container .popular_date_select","click",s],[".date_selection_container .date_selection_close","click",s],[".date_selection_container .date_selection a[data-date]","click",a],[".date_selection_container .date_selection","click",c],[window,"click","*",l]]}}),this.require.define({"modules/views/static/postcards":function(e,t,i){var n=t("../../lib/view"),o=t("../../lib/config"),r=i.exports=new n;r.matchRoute=function(){return $(".js-postcards").length};var s=function(){$.publish("trackGAEvent",["DownloadApp","iTunesStore",o.user_id]),$.publish("trackEvent",["click",{widget:"DownloadApp",action:"iTunesStore"}])},a=function(){$.publish("trackGAEvent",["DownloadApp","GooglePlay",o.user_id]),$.publish("trackEvent",["click",{widget:"DownloadApp",action:"GooglePlay"}])};r.events=[[".js-postcards","click",".store-itunes",s],[".js-postcards","click",".store-play",a]]}}),this.require.define({"modules/views/static/postcards_gallery":function(e,t,i){var n=t("../../lib/view"),o=t("../../lib/config"),r=i.exports=new n;r.matchRoute=function(){return $(".js-postcards-gallery").length},r.init=function(){$(window).width()>767&&$(".js-sticky").each(function(){var e=$(this),t=e.width(),i=($(window).height()-e.height())/2;i>=0&&(e.css("width",t),e.css("position","fixed"),e.css("top",i))})};var s=function(){$.publish("trackGAEvent",["DownloadApp","iTunesStore",o.user_id]),$.publish("trackEvent",["click",{widget:"DownloadApp",action:"iTunesStore"}])},a=function(){$.publish("trackGAEvent",["DownloadApp","GooglePlay",o.user_id]),$.publish("trackEvent",["click",{widget:"DownloadApp",action:"GooglePlay"}])};r.events=[[".js-postcards-gallery","click",".store-itunes",s],[".js-postcards-gallery","click",".store-play",a]]}}),this.require.define({"modules/views/text_preview":function(e,t,i){"use strict";var n=t("../lib/view"),o=i.exports=new n;o.matchRoute=function(){return $(".js-text-preview-input").length};var r=function(){var e=$(event.target).data("target");if(e)var t=$(e);else var t=$(".js-text-preview-target");var i=$(this).val();void 0!=i&&t.text(i)};o.events=[[".js-text-preview-input","keyup blur change input",r]]}}),this.require.define({"modules/views/toggle_element":function(e,t,i){var n=t("../lib/view"),o=(t("../lib/lightbox"),i.exports=new n);o.matchRoute=function(){return $(".js-toggle-element").length||$(".js-switch-elements").length||$(".js-show-element").length||$(".js-hide-element").length},o.init=function(){};var r=function(e){e.preventDefault();var t=$(this).data("element");u(t)},s=function(e){e.preventDefault();var t=$(this),i=t.data("element"),n=t.find(":selected");l(n,i)},a=function(){var e=$(this),t=$(this).data("element");l(e,t)},l=function(e,t){e.hasClass("js-show-element")?$(t).show():e.hasClass("js-hide-element")&&$(t).hide()},c=function(){console.log("switchElements");var e=$(this);e.find("option").each(function(){var e=$(this).data("element");$(e).hide()});var t=e.find(":selected").data("element");$(t).show()},u=function(e){$(e).toggle()};o.events=[[".js-toggle-element","click",r],[".js-show-element, .js-hide-element","click",a],[".js-switch-elements","change",c],["select:has('.js-hide-element, .js-show-element')","change",s]]}}),this.require.define({"modules/views/user_account/edit_notices":function(e,t,i){var n=t("../../lib/config"),o=t("../../lib/view"),r=i.exports=new o;r.matchRoute=function(){return $(".js-toggle-checkboxes").length};var s,a,l;r.init=function(){s=n.emailOptedOut,a=$(".js-toggle-checkboxes"),l=$(".js-notices-form input:checkbox"),a.attr("checked",c()),s&&l.attr("checked",!1)};var c=function(){return l.length===l.filter(":checked").length},u=function(e){e.preventDefault(),$checkboxes=$(e.target).closest("tr").find("input:checkbox"),$firstCheckBox=$($checkboxes[0]),checked=!$firstCheckBox.attr("checked"),$checkboxes.attr("checked",checked)},d=function(){a.attr("checked",c())},h=function(){l.attr("checked",a.is(":checked"))};r.events=[[".js-notices-form label","click",u],[".js-notices-form input:checkbox","click",d],[".js-toggle-checkboxes","click",h]]}}),this.require.define({"modules/views/user_account/email_suggestion":function(e,t,i){var n=t("../../lib/view"),o=i.exports=new n;o.matchRoute=function(){return $(".email-suggestion").length},o.init=function(){};var r=function(){var e=$(this).attr("data-email-field-id"),t=$(this).attr("data-did-you-mean");$(this).mailcheck({suggested:function(i,n){var o="<u>"+n.address+"@<strong>"+n.domain+"</strong></u>",r="$('#"+e+"').val('"+n.full.replace("'","\\'")+"');$('#"+e+"_suggestion').hide();return false;",s='<a href="#" onclick="'+r+'">'+t.replace("__EMAIL__",o)+"</a>";$("#"+e+"_suggestion").html(s).show()},empty:function(){$("#"+e+"_suggestion").hide()}})};o.events=[[".email-suggestion","change",r]]}}),this.require.define({"modules/views/user_account/facebook_timeline":function(e,t,i){var n=t("../../lib/view"),o=i.exports=new n;o.matchRoute=function(){return $("#update-facebook-timeline").length},o.init=function(){};var r=function(){return $("#update-facebook-timeline").submit(),!1},s=function(){$(".entry-container")||$(this).is(".success-highlight")?$("#update-facebook-timeline").effect("highlight",{},2e3):window.location.reload()};o.events=[["#update-facebook-timeline","ajax:success",s],["#update-facebook-timeline-button","click",r]]}}),this.require.define({"modules/views/user_account/find_friends":function(e,t,i){var n=t("../../lib/view"),o=t("../../lib/paginator"),r=t("../../lib/tracking"),s=t("../../lib/facebook"),a=t("../../lib/facebook_api"),l=i.exports=new n;l.matchRoute=function(){return $("#find_friends_result,#follow_all").length},l.init=function(){var e=$("#find_friends_result[data-result-url]");e.attr("data-result-url")&&$.post(e.attr("data-result-url"),{},function(e){$("#find_friends_result").html(e),$("#other_networks").show(),new o("#find_friends_result .userlist",".pagination")},"html"),0==$(".user-list .js-follow-button").length&&$("#follow_all").hide(),$.subscribe("whi:fb_init",c)};var c=function(){FB.getLoginStatus(function(e){"unknown"===e.status?FB.login(function(e){e.authResponse&&($(".auth_explain").hide(),$(".invite-sidebar").show())}):"connected"===e.status&&($(".auth_explain").hide(),$(".invite-sidebar").show())})},u=function(){return $("#find_friends_result .js-follow-button").click(),r.trackGAEvent("Follow","Follow","all"),!1},d=function(){return s.load(a.requestDialog),!1};l.events=[[window,"click","#find_friends_result #follow_all",u],[window,"click","#invite_friends_button",d]]}}),this.require.define({"modules/views/user_account/link_account":function(e,t,i){var n=t("../../lib/view"),o=t("../../lib/tracking"),r=t("../../lib/routes"),s=t("../../utils/utils"),a=t("../../lib/link_social_network"),l=t("../../lib/facebook"),c=t("../../lib/facebook_api"),u=i.exports=new n;u.matchRoute=function(){return $(".link-accounts").length};var d=function(){var e=$(this).attr("data-service"),t=$(this).attr("data-link");o.trackSocial(e,"link");var i=a.openPopup(t,function(e){$.ajax({url:r.link_account(),success:function(t){"success"===e&&($("#sidebar").html(t),$.publish("whi:content_updated")),a.closePopup(i)},error:function(e,t,n){s.defaultAjaxErrorCallback(e,t,n),a.closePopup(i)}})});return!1},h=function(){var e=$(this).attr("data-service");o.trackSocial(e,"unlink")},f=function(){o.trackSocial("facebook","add_timeline_link")},p=function(){var e=$(this).attr("data-service");o.trackSocial(e,"link_find")},m=function(){return l.load(c.requestDialog),!1},g=function(){var e=$(this);if(e.is(".share_toggle")){var t=e.closest(".sharing-setting").data("update-url"),i=$(this).is(":checked")?"yes":0;$.ajax({type:"put",url:t,data:{share_updates:i},success:function(){},error:s.defaultAjaxErrorCallback})}};u.events=[[".link-accounts","click",".link-account:not(.linked)",d],[".link-accounts","click",".unlink-account",h],[".link-accounts","click",".add_timeline_link",f],[".sharing-settings","change",".share_toggle",g],[".link_find","click",p],[window,"click","#link_invite_button",m]]}}),this.require.define({"modules/views/user_profile/profile":function(e,t,i){var n=(t("../../lib/routes"),t("../../lib/view")),o=t("../../utils/utils"),r=t("../../lib/tracking"),s=i.exports=new n;s.matchRoute=function(){return $(".user-header").length};var a=function(){r.trackGAEvent("Profile","TagClick",o.uniqueUserId())},l=function(){r.trackGAEvent("Profile","HeartSearch",o.uniqueUserId())};s.events=[[document,"click",".user-tags a.tag",a],[document,"submit","#user-search",l]]}}),this.require.define({"modules/views/user_set":function(e,t,i){var n=t("../lib/view"),o=i.exports=new n;o.matchRoute=function(){return $(".js-edit-set-form").length||$(".js-create-set-form").length},o.init=function(){};var r=function(e){e.preventDefault(),$(".js-edit-set-form").show(),$(".js-set-name-field").focus()},s=function(e){e.preventDefault(),$(".js-edit-set-form").hide(),$(".js-set-name-field").blur()},a=function(e){e.preventDefault(),$(".js-create-set-form").show(),$(".js-set-name-field").focus()},l=function(e){e.preventDefault(),$(".js-create-set-form").hide(),$(".js-set-name-field").focus()};o.events=[[window,"click",".js-edit-set-button",r],[window,"click",".js-edit-set-cancel",s],[window,"click",".js-create-set-button",a],[window,"click",".js-create-set-cancel",l]]}}),this.require.define({"modules/views/valentines_remix":function(e,t,i){var n=(t("../lib/routes"),t("../lib/view")),o=(t("../utils/utils"),t("../lib/tracking")),r=i.exports=new n;r.matchRoute=function(){return $(".valentines-remix").length};var s=function(){var e=$(this).parent().attr("href");o.trackGAEvent("Valentines","CollectionClick",e)},a=function(){o.trackGAEvent("Valentines","SearchClick")};r.events=[[document,"click",".remix_images_desktop img",s],[document,"click",".link-desktop a",a]]}}),this.require.define({"modules/views/widgets":function(e,t,i){var n=t("../lib/view"),o=(t("../lib/lightbox"),i.exports=new n);o.matchRoute=function(){return $(".js-widget-builder").length},o.init=function(){a()};var r=function(){var e=$(".js-widget-url").val(),t="-",i=e.match(/entry\/([0-9]+)/),n=e.match(/\/([a-z_]+)\/?$/),o=e.match(/\/collections\/([0-9]+)/);return i?t="widget/entry/"+i[1]:n?t="widget/hearts/"+n[1]:o&&(t="widget/collection/"+o[1]),t+"/?"},s=function(){var e=$(".js-widget-builder");return e.serialize()+""},a=function(e){var t="http://"+window.location.hostname+"/",i=s();if($(".js-widget-url").length){var n=t+r(e)+i,o=$("<iframe></iframe>").attr("frameborder","0").attr("scrolling","no");o.attr("src",n),o.attr("width",$(".js-widget-width").val()),$(".js-widget-preview").html(o),l(o),$(".js-iframe-url").text(n)}$(".js-code-params").text(i)},l=function(e){e.load(function(){var t=$(this.contentWindow.document).find("body").height();t=0!=t?t:540,e.css({height:t+"px"}),$(".js-iframe-style").html("width:"+$(".js-widget-width").val()+"px;height:"+t+"px")})};o.events=[[".js-widget-builder","change","select, input",a],[".js-widget-builder","keyup","input, textarea",a]]}}),this.require.define({"modules/whi":function(e,t,i){var n,o,r,s,a=t("./lib/config"),l=t("./utils/logger"),c=t("./lib/heart_button_thumb"),u=t("./lib/heart_button_thumb_anonymous"),d=t("./lib/tracking"),h=t("./lib/tracking/data_layer"),f=(t("./lib/whi_history"),t("./utils/anonymous_session")()),p=i.exports=function(e){a.updateCache(),e=e||{},o=e.views||[],n=e.modules||[],d.init(),h.init(),this.init(),f.track_anonymous_session()};p.prototype.subscriptions={"whi:content_updated":function(e,t){s.addHearts&&s.addHearts(),this.refreshViews(),h.contentViewUpdate(t)},"whi:tags_loaded":function(){s.addHearts&&s.addHearts()},"whi:load_view":function(){var e=Array.prototype.slice.call(arguments,1);this.loadView.apply(this,e)},"whi:unload_view":function(e,t){try{this.views[t]._teardown()}catch(i){l.log("Could not unload view: "+t,i.toString())}var n=r.length-1;for(n;n>=0;n--)if(r[n].name==t)return r.splice(n,1)}},p.prototype.init=function(){var e=this;r=this.currentViews=[],n.forEach(function(e){var i=t("./lib/"+e);i.init()}),s=(/^yes/.test(a.authenticated)?c:u).init();for(var i in this.subscriptions)this.subscriptions.hasOwnProperty(i)&&$.subscribe(i,this.subscriptions[i].bind(this));e.views={},o.forEach(function(i,n){try{var r=t("./views/"+i);r.name=i,o[n]=r,e.views[r.name]=r}catch(s){if(a.dev_mode)throw s;l.error("failed to load view",i,"with error",s.stack),e.viewErrors=e.viewErrors||{},e.viewErrors[i]=s}}),this.refreshViews()},p.prototype.loadView=function(e){var t=this.views[e];if(!t)return l.error("tried to instantiate non existent view",e);r.push(t);var i=Array.prototype.slice.call(arguments,1);t._init.apply(t,i)},p.prototype.clearViews=function(){r.forEach(function(e){e._teardown()})},p.prototype.refreshViews=function(){this.clearViews(),r=o.filter(function(e){return e?e.matchRoute?e.matchRoute()?(e._init(),e):!1:l.error("View",e.name,"is missing a matchRoute method."):l.error("view",e.name,"does not export a view. Did you forget to module.exports the view?")}),l.log("current views : ",r.map(function(e){return e.name}))}}}),$(function(){$(".js-carousel-next").live("click",function(e){e.preventDefault();var t=$(this).closest(".js-carousel"),i=t.find(".js-carousel-images"),n=i.find("img").first();i.append(n)}),$(".js-carousel-prev").live("click",function(e){e.preventDefault();var t=$(this).closest(".js-carousel"),i=t.find(".js-carousel-images"),n=i.find("img").last();i.prepend(n)})}),$(".js-dropdown-toggle").live("click",function(e){e.stopPropagation(),e.preventDefault();var t=$(this).closest(".dropdown");t.toggleClass("is-open")}),$(function(){jQuery.expr[":"].contains=function(e,t,i){return jQuery(e).text().toUpperCase().indexOf(i[3].toUpperCase())>=0},$(window).on("click",".js-selectable",function(e){console.log("selectable click");var t=null,i=null;t=$(this),i=$(this).find("input[type=checkbox]"),$(e.target).is("input[type=checkbox]")||(i.prop("checked",!i.prop("checked")),e.preventDefault()),$(this).toggleClass("is-selected"),$(this).trigger("changed",{checked:i.prop("checked")})}),$(".js-filter-list").keyup(function(e){var t=$(this),i=t.val(),n=t.closest(".list");i&&27!=e.keyCode?(n.find(".list-item").css("display","none"),n.find(".list-item:contains("+i+")").css("display","block"),n.find(".list-item:first-child").css("display","block")):n.find(".list-item").css("display","block")})}),$(".overlay-tap, .overlay-tap-reverse").on("click",function(){$(this).toggleClass("is-active")}),$(".blur-tap-reverse").on("click",function(){$(this).toggleClass("is-active")}),function(){var e,t;e=this.jQuery||window.jQuery,t=e(window),e.fn.stick_in_parent=function(i){var n,o,r,s,a,l,c,u,d,h;for(null==i&&(i={}),c=i.sticky_class,o=i.inner_scrolling,l=i.recalc_every,a=i.parent,s=i.offset_top,r=i.spacer,n=i.bottoming,null==s&&(s=0),null==a&&(a=void 0),null==o&&(o=!0),null==c&&(c="is_stuck"),null==n&&(n=!0),u=function(i,u,d,h,f,p,m,g){var v,y,b,w,_,x,k,$,C,j,S;if(!i.data("sticky_kit")){if(i.data("sticky_kit",!0),x=i.parent(),null!=a&&(x=x.closest(a)),!x.length)throw"failed to find stick parent";if(v=b=!1,(j=null!=r?r&&i.closest(r):e("<div />"))&&j.css("position",i.css("position")),k=function(){var e,t,n;return!g&&(e=parseInt(x.css("border-top-width"),10),t=parseInt(x.css("padding-top"),10),u=parseInt(x.css("padding-bottom"),10),d=x.offset().top+e+t,h=x.height(),b&&(v=b=!1,null==r&&(i.insertAfter(j),j.detach()),i.css({position:"",top:"",width:"",bottom:""}).removeClass(c),n=!0),f=i.offset().top-parseInt(i.css("margin-top"),10)-s,p=i.outerHeight(!0),m=i.css("float"),j&&j.css({width:i.outerWidth(!0),height:p,display:i.css("display"),"vertical-align":i.css("vertical-align"),"float":m}),n)?S():void 0},k(),p!==h)return w=void 0,_=s,C=l,S=function(){var e,a,y,$;return!g&&(null!=C&&(--C,0>=C&&(C=l,k())),y=t.scrollTop(),null!=w&&(a=y-w),w=y,b?(n&&($=y+p+_>h+d,v&&!$&&(v=!1,i.css({position:"fixed",bottom:"",top:_}).trigger("sticky_kit:unbottom"))),f>y&&(b=!1,_=s,null==r&&("left"!==m&&"right"!==m||i.insertAfter(j),j.detach()),e={position:"",width:"",top:""},i.css(e).removeClass(c).trigger("sticky_kit:unstick")),o&&(e=t.height(),p+s>e&&!v&&(_-=a,_=Math.max(e-p,_),_=Math.min(s,_),b&&i.css({top:_+"px"})))):y>f&&(b=!0,e={position:"fixed",top:_},e.width="border-box"===i.css("box-sizing")?i.outerWidth()+"px":i.width()+"px",i.css(e).addClass(c),null==r&&(i.after(j),"left"!==m&&"right"!==m||j.append(i)),i.trigger("sticky_kit:stick")),b&&n&&(null==$&&($=y+p+_>h+d),!v&&$))?(v=!0,"static"===x.css("position")&&x.css({position:"relative"}),i.css({position:"absolute",bottom:u,top:"auto"}).trigger("sticky_kit:bottom")):void 0},$=function(){return k(),S()},y=function(){return g=!0,t.off("touchmove",S),t.off("scroll",S),t.off("resize",$),e(document.body).off("sticky_kit:recalc",$),i.off("sticky_kit:detach",y),i.removeData("sticky_kit"),i.css({position:"",bottom:"",top:"",width:""}),x.position("position",""),b?(null==r&&("left"!==m&&"right"!==m||i.insertAfter(j),j.remove()),i.removeClass(c)):void 0},t.on("touchmove",S),t.on("scroll",S),t.on("resize",$),e(document.body).on("sticky_kit:recalc",$),i.on("sticky_kit:detach",y),setTimeout(S,0)}},d=0,h=this.length;h>d;d++)i=this[d],u(e(i));return this}}.call(this),window.require=require;